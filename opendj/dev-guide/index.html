<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <style type="text/css">
   /*
* The contents of this file are subject to the terms of the Common Development and
* Distribution License (the License). You may not use this file except in compliance with the
* License.
*
* You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the
* specific language governing permission and limitations under the License.
*
* When distributing Covered Software, include this CDDL Header Notice in each file and include
* the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL
* Header, with the fields enclosed by brackets [] replaced by your own identifying
* information: "Portions copyright [year] [name of copyright owner]".
*
* Copyright 2015 ForgeRock AS.
* Portions copyright 2024 3A Systems LLC.
*/

/***********************************/
/* Imported Styles
/***********************************/

@import url(https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700);
@import url(https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css);
@import url(https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css);
/* @import url(https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css); */
@import url(https://cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.4.33/example1/colorbox.css);

/***********************************/
/* General Styles
/***********************************/

html {
    height: 100%;
}

body {
    /* Dark Grey */

    color: #2a2f32;
    font-family: 'Open Sans', "proxima-nova", sans-serif;
}

a {
    /* Sea Green */
    color: #519387;
}

a.link[href^="http"] {
    background-image: url("includes/logos/Icon_External_Link.png");
    background-position: top right;
    background-repeat: no-repeat;
    padding-right: 15px;
    margin-right: 2px;
}

a.self-link, a.self-link:hover, a.self-link:active {
    color: inherit;
    text-decoration: none;
}

a[href].self-link:hover::after
{
    -moz-osx-font-smoothing: grayscale;
    content: "\e144";
    color: #519387;
    display: inline-block;
    font-family: "Glyphicons Halflings";
    font-size: 75%;
    font-style: normal;
    line-height: 1;
    padding-left: 5px;
    position: relative;
    top: 1px;
}


li.L0,
li.L1,
li.L2,
li.L3,
li.L5,
li.L6,
li.L7,
li.L8 {
    list-style-type: decimal !important
}

.section,
.chapter,
.preface,
.glossary,
.refentry,
.reference,
.appendix,
.index,
.titlepage h2,
.titlepage h3,
.titlepage h4,
.titlepage h5 {
    padding-top: 60px;
    margin-top: -50px;
}

.left-shape-content {
    background: url("includes/logos/left-shape-4.png") no-repeat scroll 0 0 rgba(0, 0, 0, 0);
    float: left;
    height: 566px;
    position: fixed;
    width: 57px;
    top: 60%;
    z-index: -1;
}

/***********************************/
/* Bootstrap Override Styles
/***********************************/

/* Button Styles */

.btn-primary {
    /* Sea Green */
    background-color: #519387;

    /* Dark Sea Green */
    border-color: #488378;
    color: #fff;
}

.btn-default {
    background-color: #A1A8AD;
    border-color: #8a9298;
    color: #ffffff;
}

.btn-default:hover,
.btn-default:focus,
.btn-default.focus,
.btn-default:active,
.btn-default.active,
.open > .dropdown-toggle.btn-default {
    background-color: #3f4b54;
    border-color: #1B2025;
    color: #ffffff;
}

/* Tooltip Styles */

.tooltip.in {
    opacity: 0.95;
}

.tooltip.bottom .tooltip-arrow {
    border-bottom-color: #519387;
}

.tooltip-inner {
    background-color: #519387;
}

/* List Styles */

.dl-horizontal dt {
    white-space: normal;
    padding: 0 3px 0 0;
    width: 200px;
}

.dl-horizontal dd {
    border-bottom: 1px dotted rgb(125, 179, 168);
    border-bottom: 1px dotted rgba(125, 179, 168, 0.8);
    margin-bottom: 18px;
    margin-left: 210px;
}

.dl-horizontal {
    border-top: 1px dotted rgb(125, 179, 168);
    border-top: 1px dotted rgba(125, 179, 168, 0.9);
    padding-top: 10px;
}

.variablelist dt {
    margin: 18px 0 5px 15px;
}

.variablelist dd {
    border-bottom: 1px dotted rgba(125, 179, 168, 0.8);
    margin: 5px 0 5px 30px;
}

.variablelist > dl {
    border-top: 1px dotted rgba(125, 179, 168, 0.8);
}


/***********************************/
/* Redirect Page Styles
/***********************************/

.index-redirect,
.index-redirect body {
    height: 100%;
    background-color: #333;
    font-family: 'Open Sans', "proxima-nova", sans-serif;
}
.index-redirect body {
    color: #fff;
    text-align: center;
}
.index-redirect .container {
    display: table;
    vertical-align: middle;
    height: 100%;
}
.index-redirect .btn-primary {
    /* Sea Green */
    background-color: #519387;

    /* Dark Sea Green */
    border-color: #488378;
    color: #fff;
}
.index-redirect .cover-heading {
    font-weight: 400 !important;
}
.index-redirect .vertical-center-row {
    display: table-cell;
    vertical-align: middle;
}

/***********************************/
/* Header Styles
/***********************************/

.navbar-brand {
    padding: 7px 15px;
    display: flex;
    align-items: center;
}
.navbar-brand > img {
    height: 100%;
}

.navbar.navbar-inverse.navbar-fixed-top {
    box-shadow: 0 0 10px 2px #111;
}
.nav > li > a {
    font-weight: 200;
}

/***********************************/
/* Banner Styles
/***********************************/

.jumbotron {
    /* Sea Green */
    background: url("includes/logos/hero-bg-01.png") no-repeat scroll left top #519387;
    color: white;
    box-shadow: 0 0 10px 2px grey;
    margin-top: 50px;
    padding: 0 0 10px;
}
.jumbotron small {
    color: white;
}
.jumbotron p {
    font-size: 12px;
    font-weight: 400;
    margin-bottom: 5px;
}
.jumbotron h1 {
    font-size: 23px !important;
    font-weight: 300 !important;
}

/***********************************/
/* Table of Contents Styles
/***********************************/

#sidebar .nav>li>a {
    /* Light Grey */

    color: #777;
    border-left: 4px solid transparent;
    padding: 4px 10px;
    font-size: 13px;
    font-weight: 400;
}
/* nested links */

#sidebar .nav .nav>li>a {
    padding-top: 2px;
    padding-bottom: 2px;
    padding-left: 30px;
    font-size: 12px;
}
/* nested nested links */

#sidebar .nav .nav .nav>li>a {
    font-size: 11px;
    padding-bottom: 2px;
    padding-left: 50px;
    padding-top: 4px;
}
/* nested nested nested links */

#sidebar .nav .nav .nav .nav>li>a {
    font-size: 11px;
    padding-bottom: 2px;
    padding-left: 70px;
    padding-top: 4px;
}
/* active and hover links */

#sidebar .nav>.active>a,
#sidebar .nav>.locked-active>a,
#sidebar .nav>li>a:hover,
#sidebar .nav>li>a:focus {
    text-decoration: none;
    /*
    background-color: rgb(125, 179, 168, 0.8);
    background-color: rgba(125, 179, 168, 0.8);
    border-color: rgb(45, 52, 55, 0.8);
    border-color: rgba(45, 52, 55, 0.8);
    color: white;
    */
    /* Bright Yellow */

    background-color: #eeea07;
    border-color: #eeea07;
    /* Grey */

    color: #2a2f32;
}
/* all active links */

#sidebar .nav>.active>a,
#sidebar .nav>.active:hover>a,
#sidebar .nav>.active:focus>a {
    font-weight: 600;
}
/* nested active links */

#sidebar .nav .nav>.active>a,
#sidebar .nav .nav>.active:hover>a,
#sidebar .nav .nav>.active:focus>a {
    font-weight: 400;
}
/* nested nested active links */

#sidebar .nav .nav .nav>.active>a,
#sidebar .nav .nav .nav>.active:hover>a,
#sidebar .nav .nav .nav>.active:focus>a {
    font-weight: 300;
}
/* nested nested active links */

#sidebar .nav .nav .nav>.active>a,
#sidebar .nav .nav .nav>.active:hover>a,
#sidebar .nav .nav .nav>.active:focus>a {
    font-weight: 300;
}
/* hide all (inactive) nested list */

#sidebar .nav ul.nav {
    display: none;
}
/* show active nested list */

#sidebar .nav>.active>ul.nav {
    display: block;
}
#sidebar.affix {
    top: 66px;
    position: fixed;
    bottom: 30px;
    height: auto;
    overflow-y: scroll;
}
#sidebar.affix-bottom {
    position: absolute;
}

/***********************************/
/* Content Styles
/***********************************/

/* Main Content Styles */

h1 {
    font-size: 40px !important;
    font-weight: 700 !important;
}

h1 span {
    margin-right: .3em;
}

#doc-content h1,
#doc-content .h1 {
    /* Sea Green */
    border-bottom: 2px solid #70ab9b;
    font-size: 36px;
    margin-top: 24px;
    padding-bottom: 5px;
}

h2 {
    font-size: 32px !important;
    font-weight: 700 !important;
}

h5, .h5 {
    border-bottom: 1px solid #d3d3d3;
    font-size: 16px;
    padding-bottom: 4px;
    font-style: italic;
}

.anchorjs-link .anchorjs-icon {
    color: #A1A8AD;
    text-decoration: none;
}
.anchorjs-link:hover .anchorjs-icon {
    color: #519387;
    text-decoration: none;
}

h1:hover > .anchorjs-link,
h2:hover > .anchorjs-link,
h3:hover > .anchorjs-link,
h4:hover > .anchorjs-link,
h5:hover > .anchorjs-link,
.anchorjs-link:focus {
    opacity: 1 !important;
    transition: color 0.16s linear 0s;
    text-decoration: none;
}

.chapter > p:first-of-type,
.preface > p:first-of-type {
    font-size: 21px;
    font-weight: 300;
    line-height: 1.4;
    margin-bottom: 20px;
}

#doc-content {
    padding: 0 20px 85px 10px;
}

div.procedure, div.table {
    margin-top:-50px;
    padding-top: 60px;
}

div.procedure-title, div.table-title {
    margin: 6px 0 8px;
}

div.procedure-inner {
    border-color: lightslategray;
    border-left: 6px solid lightslategray;
    border-style: dotted dotted dotted solid;
    border-width: 1px 1px 1px 6px;
    margin: 15px 0 10px;
    padding: 10px 15px 10px 10px;
}

.author {
    display: inline;
}

.table {
    font-size: 14px;
}

div.simplelist {
    margin-bottom: 10px;
    width: 100%;
    font-size: 15px;
}

/* Title Styles */

.procedure-title > a, .procedure-title > a:hover {
    color: lightslategray;
    font-size: 14pt;
    font-weight: 400;
}

.itemizedlist-title {
    font-size: 18px;
    font-weight: 600;
    margin: 12px 0 6px;
}

.figure-title {
    font-weight: bold;
    margin: 16px 0 4px;
    text-align: center;
}

.table-title {
    font-size: 12pt;
    font-weight: 700;
}

.variablelist-title {
    font-weight: bold;
    margin: 10px 0;
    text-decoration: underline;
}

/* Code Styles */

.btn-copy-cmdline,
.btn-copy-codelisting {
    /* White */

    background-color: #fff;
    /* Light Grey */

    border: 1px solid #e1e1e8;
    border-radius: 0 4px;
    color: #777;
    display: block;
    font-size: 12px;
    padding: 5px 8px;
    position: absolute;
    right: 5px;
    top: 5px;
    z-index: 10;
}

pre.prettyprint {
    border: 1px solid #ccc;
    padding: 9.5px;
    font-size: 12px;
}

.zero-clipboard {
    display: block;
    position: relative;
}
.zeroclipboard-is-hover {
    /* Light Sea Green */

    background-color: #6faa9b;
    border-color: #6faa9b;
    color: #fff;
    cursor: pointer;
}

.ui-effects-transfer {
    border: 1px dotted black;
    background-color: yellow;
    opacity: 0.4;
}

/* Modal Dialog Styles */

#doc-content .modal h1.title {
    font-size: 40px !important;
    font-weight: 500 !important;
    margin: 14px 0 5px;
}
#doc-content .modal h2.subtitle {
    font-size: 26px !important;
    font-weight: 400 !important;
    margin-bottom: 26px;
}
#doc-content .modal h3.author {
    font-size: 14px !important;
    font-style: italic;
    font-weight: 100 !important;
    margin: 4px 0 5px 18px;
}
#doc-content .modal .affiliation .orgname {
    display: block;
    font-size: 20px !important;
    font-weight: 400 !important;
    margin: 20px 0 0 0;
}
#doc-content .modal .affiliation .address p {
    font-size: 16px !important;
    font-weight: 100 !important;
    margin: 4px 0;
}
#doc-content .modal .copyright {
    display: none;
}
#doc-content .modal .copyright {
    display: none;
}
#doc-content .modal .abstract .abstract-title {
    font-size: 20px !important;
    font-weight: 400 !important;
}
#doc-content .modal .abstract > p {
    margin: 10px 0 5px 20px;
    font-size: 16px !important;
    font-weight: 100 !important;
}

/* Image Styles */

.fancybox > img {
    cursor: zoom-in;
}
a.fancybox {
    text-decoration: none;
}

#cboxTitle {
    color: #519387;
    font-size: 14px;
    font-weight: 700;
}

#cboxOverlay{
    background: none repeat scroll 0 0 rgba(66, 130, 116, 0.6);
}

img.img-responsive {
    margin-bottom: 20px;
}

/* Index Styles */

.indexdiv > h3 {
    border-bottom: 2px dotted lightgrey;
    padding-bottom: 5px;
}
.indexdiv > dl {
    margin-left: 30px;
}
.indexdiv dl {
    margin-bottom: 5px;
}
.indexdiv dt {
    margin: 5px 0 2px;
}
.indexdiv dd {
    margin-left: 35px;
}
.indexdiv .indexterm {
    font-weight: 200;
}

/* Reference Styles */

.refnamediv h2 {
    display: none;
}

.refsect1 h2,
.refsynopsisdiv h2 {
    font-size: 20px !important;
    font-weight: 400 !important;
}

.refnamediv p {
    font-size: 32px !important;
    font-weight: 700 !important;
}

/***********************************/
/* Footer Styles
/***********************************/

.back-to-top {
    position: fixed;
    bottom: 55px;
    right: 5px;
    display: none;
    z-index: 15;
}

#footer {
    display: none;
}

.footer {
    /* Light Grey */
    background-color: #f5f5f5;

    /* Medium Grey */
    border-top: 1px solid #ACB5BD;
    bottom: 0;
    font-size: 12px;
    height: 30px;
    padding-top: 4px;
    position: fixed;
    width: 100%;
    z-index: 100;
}

.footer h3 {
    margin: 0;
}

.footer a:hover {
    text-decoration: none;
}

.footer-item {
    line-height: 22px;
    margin-left: 10px;
}

.footer-item.highlighted {
    /* Orange */
    color: #f7a540;
}

.footer-item.highlighted:hover {
    /* Dark Orange */
    color: #c97208;
}

.footer span {
    /* Grey */
    color: #2a2f32;
    margin-bottom: 0;
}

.footer .footer-left {
    float: left;
}

.footer .footer-right {
    float: right;
}

/***********************************/

  </style><meta name="viewport" content="width=device-width, initial-scale=1"><title>OpenDJ SDK Developer's Guide</title><script src="https://code.jquery.com/jquery-1.11.2.min.js" type="text/javascript"></script><script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><meta name="description" content="Hands-on guide to developing applications with the OpenDJ SDK. The OpenDJ project offers open source LDAP directory services in Java."><script type="text/javascript">
     /*
 * The contents of this file are subject to the terms of the Common Development and
 * Distribution License (the License). You may not use this file except in compliance with the
 * License.
 *
 * You can obtain a copy of the License at legal/CDDLv1.0.txt. See the License for the
 * specific language governing permission and limitations under the License.
 *
 * When distributing Covered Software, include this CDDL Header Notice in each file and include
 * the License file at legal/CDDLv1.0.txt. If applicable, add the following below the CDDL
 * Header, with the fields enclosed by brackets [] replaced by your own identifying
 * information: "Portions copyright [year] [name of copyright owner]".
 *
 * Copyright 2015 ForgeRock AS.
 */

//

var loadJavaScriptsFN = function () {
    $.ajaxSetup({ cache: true });
    $.getScript("http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js", function () { prettyPrint() });
    $.getScript("http://cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.2.0/ZeroClipboard.min.js", function () {enableZeroClipboardFN() });
    $.getScript("http://cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.4.33/jquery.colorbox-min.js", function () { enableColorboxFN() });
};

var wrapConfigurablesFn = function () {
    $('*:contains("https://openam.example.com:8443")').each(function(){
        if($(this).children().length < 1)
            $(this).html(
                $(this).text().replace(new RegExp("https://openam.example.com:8443", 'g'),'<span class="exampleUrl">https://openam.example.com:8443</span>')
            )
    });
    $('*:contains("amadmin")').each(function(){
        if($(this).children().length < 1)
            $(this).html(
                $(this).text().replace(new RegExp("amadmin", 'g'),'<span class="exampleAdmin">amadmin</span>')
            )
    });
    $('*:contains("iPlanetDirectoryPro")').each(function(){
        if($(this).children().length < 1)
            $(this).html(
                $(this).text().replace(new RegExp("iPlanetDirectoryPro", 'g'),'<span class="exampleSsoCookieName">iPlanetDirectoryPro</span>')
            )
    });
};

var btnClickHandler = function () {
    $("button#applyDocUpdate").click(function(){

        $('span.exampleUrl').fadeOut("slow", function(){
            $('span.exampleUrl').text($("input#exampleUrl").val());
            $('span.exampleUrl').fadeIn("slow");
        });

        $('span.exampleAdmin').fadeOut("slow", function(){
            $('span.exampleAdmin').text($("input#exampleAdmin").val());
            $('span.exampleAdmin').fadeIn("slow");
        });

        $('span.exampleSsoCookieName').fadeOut("slow", function(){
            $('span.exampleSsoCookieName').text($("input#exampleSsoCookieName").val());
            $('span.exampleSsoCookieName').fadeIn("slow");
        });

        $('#docConfig').modal('hide');
    });
};


var addCopyButtonFN = function () {
    $( ".cmdline" ).each(function() {
        $(this).before('<div class="zero-clipboard hidden-xs"><span class="btn-copy-cmdline"><span class="glyphicon glyphicon-pencil"></span> Copy<span class="hidden-sm"> command to clipboard</span></span></div>');
    });

    $( ".codelisting" ).each(function() {
        $(this).before('<div class="zero-clipboard hidden-xs"><span class="btn-copy-codelisting"><span class="glyphicon glyphicon-pencil"></span> Copy<span class="hidden-sm"> code to clipboard</span></span></div>');
    });
};
var enableScrollSpyFN = function () {
    $('body').scrollspy({
        target: '#sidebar',
        offset: 16
    });
};

var enableToolTipFN = function () {
    $(function () {
        $("[data-toggle='tooltip']").tooltip({placement: 'bottom'});
    });
};

var enableBackToTopFadeInFN = function () {
    var offset = 220;
    var duration = 500;
    $(window).scroll(function() {
        if ($(this).scrollTop() > offset) {
            $('.back-to-top').fadeIn(duration);
        } else {
            $('.back-to-top').fadeOut(duration);
        }
    });

    $('.back-to-top').click(function(event) {
        event.preventDefault();
        $('html, body').animate({scrollTop: 0}, duration);
        return false;
    })
};

var enableClampedWidthsFN = function () {

    /*
     * Clamped-width.
     * Usage:
     *  <div data-clampedwidth=".myParent">This long content will force clamped width</div>
     *
     * Author: LV
     */
    $('[data-clampedwidth]').each(function () {
        var elem = $(this);
        var parentPanel = elem.data('clampedwidth');
        var resizeFn = function () {
            var sideBarNavWidth = $(parentPanel).width() - parseInt(elem.css('paddingLeft')) - parseInt(elem.css('paddingRight')) - parseInt(elem.css('marginLeft')) - parseInt(elem.css('marginRight')) - parseInt(elem.css('borderLeftWidth')) - parseInt(elem.css('borderRightWidth'));
            elem.css('width', sideBarNavWidth);
        };

        resizeFn();
        $(window).resize(resizeFn);
    });
};

var affixToCFN = function() {
    $('#sidebar').affix({
        offset: {
            top: function () {
                return (this.top = $('.jumbotron').outerHeight(true)-66)
            }
        }
    });
};

var attachAnchorsToHeadings = function() {
    //addAnchors('h1.title, h2.title, h3.title, h4.title, h5.title');


    $('h1.title, h2.title, h3.title, h4.title, h5.title, .procedure-title, .table-title').each(function () {

        var href = $(this).closest("div[id]").attr("id");

        if (href === undefined || href === "") { // Unable to locate ID of parent element.
            return;
        }

        $(this).wrapInner('<a class=\"self-link" href=\"#' + href + '\"></a>');

    });
};

var addZeroClipboardToCmdlineButtonsFN = function () {
    var copycmdline = new ZeroClipboard( $('.btn-copy-cmdline') );

    copycmdline.on( 'ready', function(event) {
        // console.log( 'movie is loaded' );

        copycmdline.on( 'copy', function(event) {
            var wrappedText = "";
            $(event.target).parent().next().find("strong").each(function(index) {
                wrappedText += $(this).text() + "\n";
            });
            event.clipboardData.setData('text/plain', wrappedText);
        });

        copycmdline.on( 'aftercopy', function(event) {
            // console.log('Copied to clipboard: ' + event.data['text/plain']);
            $(event.target).parent().next().find("strong").each(function(index) {
                $(this).effect("transfer", { to: $(event.target)}, 750);
            });
        });
    });

    copycmdline.on( 'error', function(event) {
        console.log( 'ZeroClipboard error of type "' + event.name + '": ' + event.message );
        ZeroClipboard.destroy();
    });
};

var addZeroClipboardToCodeButtonsFN = function () {
    var copycodelisting = new ZeroClipboard( $('.btn-copy-codelisting') );

    copycodelisting.on( 'ready', function(event) {
        //console.log( 'movie is loaded' );

        copycodelisting.on( 'copy', function(event) {
            var wrappedText = "";
            $(event.target).parent().next(".codelisting.linenums").children().contents().each(function(index) {
                wrappedText += $(this).text() + "\n";
            });
            if(wrappedText == "") {
                wrappedText = $(event.target).parent().next(".codelisting").contents().text();
            };
            event.clipboardData.setData('text/plain', wrappedText);
        });

        copycodelisting.on( 'aftercopy', function(event) {
            // console.log('Copied code to clipboard: ' + event.data['text/plain']);
            $(event.target).parent().next(".codelisting").first().effect("transfer", { to: $(event.target)}, 750);
        });
    });

    copycodelisting.on( 'error', function(event) {
        console.log( 'ZeroClipboard error of type "' + event.name + '": ' + event.message );
        ZeroClipboard.destroy();
    });
};

var enableColorboxFN = function () {
    $(".fancybox").colorbox({
        title: function() {
            return $(this).children('img').attr('alt');
        },
        opacity: 1,
        transition:"elastic",
        initialWidth: 0,
        initialHeight: 0,
        maxWidth:"95%",
        maxHeight: "95%",
        scalePhotos: true,
        fixed: true
    });
};

var trackPageViewsFN = function () {

    $("a").click(function() {
        var href = $(this).attr('href');
        if(href) {
            var titleText =  $(this).text();
            if(href.charAt(0) === '#') {
                ga('send', {
                    'hitType': 'pageview',
                    'page': location.pathname + location.search + href,
                    'title': titleText
                });
            };
            if(href.charAt(0) === '.') {
                var lastHashPos = href.lastIndexOf('#');
                var cleanHref = href.slice(3,lastHashPos);
                var cleanFrag = href.slice(lastHashPos);
                if(window.location.href.search(cleanHref) > -1)
                {
                    ga('send', {
                        'hitType': 'pageview',
                        'page': location.pathname + location.search + cleanFrag,
                        'title': titleText
                    });
                }
            };
        }
    });
};

var enableZeroClipboardFN = function () {
    ZeroClipboard.config({
            swfPath:  "includes/swf/ZeroClipboard.swf",
            trustedDomains: ["*"],
            forceEnhancedClipboard: false,
            forceHandCursor: true,
            debug: false}
    );
    addCopyButtonFN();
    addZeroClipboardToCmdlineButtonsFN();
    addZeroClipboardToCodeButtonsFN();
};

$(document).ready(function() {
    //wrapConfigurablesFn();
    btnClickHandler();
    enableToolTipFN();
    enableBackToTopFadeInFN();
    enableClampedWidthsFN();
    enableScrollSpyFN();
    affixToCFN();
    attachAnchorsToHeadings();
    trackPageViewsFN();
    loadJavaScriptsFN();
});

//

    </script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navbar navbar-inverse navbar-fixed-top"><nav class="container-fluid"><div class="navbar-header"><a href="/" class="navbar-brand"><span>Open Identity Platform</span></a></div><ul id="pdf-link"></ul></nav></div><div class="jumbotron"><div class="container-fluid"><h1>OpenDJ SDK Developer's Guide<span></span><small>Version ${sdkDocTargetVersion}</small></h1><p>Hands-on guide to developing applications with the OpenDJ SDK. The
   OpenDJ project offers open source LDAP directory services in Java.</p></div></div><div class="left-shape-content"></div><div class="container-fluid"><div class="row"><div class="col-sm-3 hidden-xs"><div id="sidebar" data-clampedwidth=".col-sm-3"><h4 class="toc-title">OpenDJ SDK Developer's Guide<br><small class="toc-subtitle">Version ${sdkDocTargetVersion}</small></h4><ul class="nav nav-stacked"><li><a href="#preface">Preface</a><ul class="nav nav-stacked"><li><a href="#d247e141">1. Who Should Read this Guide</a></li><li><a href="#formatting-conventions">2. Formatting Conventions</a></li><li><a href="#accessing-doc-online">3. Accessing Documentation Online</a></li><li><a href="#joining-the-community">4. Joining the Open Identity Platform Community</a></li></ul></li><li><a href="#chap-understanding-ldap">1. Understanding LDAP</a><ul class="nav nav-stacked"><li><a href="#ldap-directory-history">1.1. How Directories &amp; LDAP Evolved</a></li><li><a href="#directory-data">1.2. Data In LDAP Directories</a></li><li><a href="#ldap-client-server-communication">1.3. LDAP Client &amp; Server Communication</a></li><li><a href="#standard-ldapv3-extensions">1.4. Standard LDAPv3 &amp; Extensions</a></li></ul></li><li><a href="#chap-best-practices">2. Best Practices For LDAP Application Developers</a><ul class="nav nav-stacked"><li><a href="#authenticate-correctly">2.1. Authenticate Correctly</a></li><li><a href="#reuse-connections">2.2. Reuse Connections</a></li><li><a href="#health-check-connections">2.3. Health Check Connections</a></li><li><a href="#request-what-you-need-all-at-once">2.4. Request Exactly What You Need All At Once</a></li><li><a href="#use-specific-filters">2.5. Use Specific LDAP Filters</a></li><li><a href="#make-modifications-specific">2.6. Make Modifications Specific</a></li><li><a href="#trust-result-codes">2.7. Trust Result Codes</a></li><li><a href="#ismemberof-for-membership">2.8. Check Group Membership on the Account, Not the Group</a></li><li><a href="#ask-directory-what-it-supports">2.9. Ask the Directory Server What It Supports</a></li><li><a href="#storing-large-attributes">2.10. Store Large Attribute Values By Reference</a></li><li><a href="#careful-with-persistent-search-and-server-side-sorting">2.11. Take Care With Persistent Search &amp; Server-Side Sorting</a></li><li><a href="#reuse-schemas">2.12. Reuse Schemas Where Possible</a></li><li><a href="#handle-referrals">2.13. Handle Referrals</a></li><li><a href="#check-result-codes">2.14. Troubleshooting: Check Result Codes</a></li><li><a href="#check-log-files">2.15. Troubleshooting: Check Server Log Files</a></li><li><a href="#inspect-network-traffic">2.16. Troubleshooting: Inspect Network Traffic</a></li></ul></li><li><a href="#chap-get-sdk">3. Getting OpenDJ LDAP SDK</a><ul class="nav nav-stacked"><li><a href="#about-opendj-ldap-sdk">3.1. About OpenDJ LDAP SDK</a></li><li><a href="#prepare-ldap-server">3.2. Preparing an LDAP Server</a></li><li><a href="#getting-the-ldap-sdk">3.3. Getting the LDAP SDK</a></li><li><a href="#opendj-ldap-sdk-examples">3.4. Accessing Example Java Code</a></li></ul></li><li><a href="#chap-using-the-sdk">4. Using the LDAP SDK</a><ul class="nav nav-stacked"><li><a href="#sync-vs-async">4.1. Synchronous &amp; Asynchronous Operations</a></li><li><a href="#error-handling">4.2. Managing Errors</a></li></ul></li><li><a href="#chap-authenticating">5. Authenticating To the Directory</a><ul class="nav nav-stacked"><li><a href="#simple-auth">5.1. Simple Authentication</a></li><li><a href="#simple-auth-with-starttls-or-ssl">5.2. Start TLS &amp; SSL Authentication</a></li><li><a href="#sasl-auth">5.3. SASL Authentication</a></li></ul></li><li><a href="#chap-reading">6. Searching &amp; Comparing Directory Data</a><ul class="nav nav-stacked"><li><a href="#about-searching">6.1. About Searching</a></li><li><a href="#basedn-and-scope">6.2. Setting Search Base &amp; Scope</a></li><li><a href="#about-filters">6.3. Working With Search Filters</a></li><li><a href="#send-search-request">6.4. Sending a Search Request</a></li><li><a href="#get-search-results">6.5. Getting Search Results</a></li><li><a href="#handle-entry-attributes">6.6. Working With Entry Attributes</a></li><li><a href="#handle-ldap-urls">6.7. Working With LDAP URLs</a></li><li><a href="#sort-search-results">6.8. Sorting Search Results</a></li><li><a href="#about-comparisons">6.9. About Comparing</a></li></ul></li><li><a href="#chap-getting-directory-info">7. Getting Information About the Directory Service</a><ul class="nav nav-stacked"><li><a href="#read-root-dse">7.1. Reading Root DSEs</a></li><li><a href="#check-ldapv3-support">7.2. Checking For LDAPv3 Support</a></li><li><a href="#get-schema-information">7.3. Getting Schema Information</a></li></ul></li><li><a href="#chap-writing">8. Updating Directory Data</a><ul class="nav nav-stacked"><li><a href="#about-writes">8.1. About Add, Modify, Rename, &amp; Delete</a></li><li><a href="#adding-entries">8.2. Adding Directory Entries</a></li><li><a href="#modifying-attr-values">8.3. Modifying Directory Entry Attribute Values</a></li><li><a href="#renaming-entries">8.4. Renaming Directory Entries</a></li><li><a href="#deleting-entries">8.5. Deleting Directory Entries</a></li><li><a href="#updating-static-groups">8.6. Updating Static Groups</a></li></ul></li><li><a href="#chap-ldif">9. Working With LDIF</a><ul class="nav nav-stacked"><li><a href="#about-ldif">9.1. About LDIF</a></li><li><a href="#reading-ldif">9.2. Reading LDIF</a></li><li><a href="#writing-ldif">9.3. Writing LDIF</a></li></ul></li><li><a href="#chap-controls">10. Working With Controls</a><ul class="nav nav-stacked"><li><a href="#about-ldap-controls">10.1. About LDAP Controls</a></li><li><a href="#get-supported-controls">10.2. Determining Supported Controls</a></li><li><a href="#use-assertion-request-control">10.3. Assertion Request Control</a></li><li><a href="#use-authorization-identity-control">10.4. Authorization Identity Controls</a></li><li><a href="#use-entry-change-notification-control">10.5. Entry Change Notification Response Controls</a></li><li><a href="#use-get-effective-rights-control">10.6. GetEffectiveRights Request Control</a></li><li><a href="#use-managedsait-control">10.7. ManageDsaIT Request Control</a></li><li><a href="#use-matched-values-request-control">10.8. Matched Values Request Control</a></li><li><a href="#use-password-expired-control">10.9. Password Expired Response Control</a></li><li><a href="#use-password-expiring-control">10.10. Password Expiring Response Control</a></li><li><a href="#use-password-policy-controls">10.11. Password Policy Controls</a></li><li><a href="#use-permissive-modify-request-control">10.12. Permissive Modify Request Control</a></li><li><a href="#use-persistent-search-request-control">10.13. Persistent Search Request Control</a></li><li><a href="#use-post-read-control">10.14. Post-Read Controls</a></li><li><a href="#use-pre-read-control">10.15. Pre-Read Controls</a></li><li><a href="#use-proxy-authz-control">10.16. Proxied Authorization Request Controls</a></li><li><a href="#use-server-side-sort-control">10.17. Server-Side Sort Controls</a></li><li><a href="#use-simple-paged-results-control">10.18. Simple Paged Results Control</a></li><li><a href="#use-subentry-request-control">10.19. Subentries Request Control</a></li><li><a href="#use-subtree-delete-control">10.20. Subtree Delete Request Control</a></li><li><a href="#use-vlv-control">10.21. Virtual List View Controls</a></li><li><a href="#use-generic-control">10.22. Using a Generic Control</a></li></ul></li><li><a href="#chap-extended-ops">11. Working With Extended Operations</a><ul class="nav nav-stacked"><li><a href="#about-ldap-extended-operations">11.1. About LDAP Extended Operations</a></li><li><a href="#get-supported-extended-operations">11.2. Determining Supported Extended Operations</a></li><li><a href="#use-cancel-extended-operation">11.3. Cancel Extended Operation</a></li><li><a href="#use-password-modify-extended-operation">11.4. Password Modify Extended Operation</a></li><li><a href="#use-starttls-extended-operation">11.5. Start TLS Extended Operation</a></li><li><a href="#use-who-am-i-extended-operation">11.6. Who am I? Extended Operation</a></li></ul></li><li><a href="#chap-i18n">12. Internationalizing Applications</a></li><li><a href="#chap-simple-proxy">13. Writing a Simple LDAP Proxy</a><ul class="nav nav-stacked"><li><a href="#connection-pooling">13.1. Connection Pooling</a></li><li><a href="#load-balancing-and-failover">13.2. Load Balancing &amp; Failover</a></li><li><a href="#handling-client-connections">13.3. Listening For &amp; Handling Client Connections</a></li><li><a href="#dn-attr-rewriting">13.4. DN &amp; Attribute Rewriting</a></li></ul></li><li><a href="#dev-tools-ref">I. Tools Reference</a><ul class="nav nav-stacked"><li><a href="#authrate-1">authrate &#8212; measure bind throughput and response time</a></li><li><a href="#ldapcompare-1">ldapcompare &#8212; perform LDAP compare operations</a></li><li><a href="#ldapmodify-1">ldapmodify &#8212; perform LDAP modify, add, delete, mod DN operations</a></li><li><a href="#ldappasswordmodify-1">ldappasswordmodify &#8212; perform LDAP password modifications</a></li><li><a href="#ldapsearch-1">ldapsearch &#8212; perform LDAP search operations</a></li><li><a href="#ldifdiff-1">ldifdiff &#8212; compare small LDIF files</a></li><li><a href="#ldifmodify-1">ldifmodify &#8212; apply LDIF changes to LDIF</a></li><li><a href="#ldifsearch-1">ldifsearch &#8212; search LDIF with LDAP filters</a></li><li><a href="#modrate-1">modrate &#8212; measure modification throughput and response time</a></li><li><a href="#searchrate-1">searchrate &#8212; measure search throughput and response time</a></li></ul></li><li><a href="#glossary">OpenDJ Glossary</a></li><li><a href="#d247e7263">Index</a></li></ul></div></div><div id="doc-content" class="col-sm-9"><div class="titlepage modal fade" id="myModal"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">X</span></button><h4 class="modal-title">About this document</h4></div><div class="modal-body"><div><div><h1 class="title">OpenDJ SDK Developer's Guide</h1></div><div><h2 class="subtitle">Version ${sdkDocTargetVersion}</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Mark </span> <span class="surname">Craig</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Ludovic </span> <span class="surname">Poitou</span></h3><div lang="en" class="affiliation"><span class="orgname">ForgeRock AS<br></span><div class="address"><p><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="street">201&nbsp;Mission&nbsp;St.</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="otheraddr">Suite&nbsp;2900</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="city">San&nbsp;Francisco</span>,&nbsp;<span class="state">CA</span>&nbsp;<span class="postcode">94105</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="country">USA</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="phone">+1&nbsp;415-599-1100&nbsp;(US)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<code class="uri">www.forgerock.com</code><br>
&nbsp;&nbsp;&nbsp;</p></div></div></div></div></div><div><p class="releaseinfo">${softwareReleaseDate}</p></div><div><p class="copyright">Copyright &copy; 2011-2014 ForgeRock AS</p></div><div><a href="legalnotice.html">Legal Notice</a></div><div><p class="pubdate">${publicationDate}</p></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>Hands-on guide to developing applications with the OpenDJ SDK. The
   OpenDJ project offers open source LDAP directory services in Java.</p></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div><div lang="en" class="preface" id="preface"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>This guide shows you how to work with OpenDJ SDK to create client
 applications in the Java language to connect to LDAP servers and perform
 LDAP operations.</p><div class="section" id="d247e141"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.&nbsp;Who Should Read this Guide</h2></div></div></div><p>This guide is written for Java developers who want to build directory
  client applications with OpenDJ LDAP SDK.</p><p>This guide starts by explaining LDAP directories briefly, and
  describing best practices for LDAP client applications. Then it demonstrates
  how to install and use OpenDJ LDAP SDK to build LDAP clients.</p><p>You do not need to be an LDAP wizard to learn something from this
  guide. You do need some background in writing Java 6 and client-server
  applications to get the most out of this guide. You can nevertheless get
  started with this guide, and then learn more as you go along.</p></div><div lang="en" class="section" id="formatting-conventions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.&nbsp;Formatting Conventions</h2></div></div></div><p>
  Most examples in the documentation are created in GNU/Linux or Mac OS X
  operating environments.

  If distinctions are necessary between operating environments,
  examples are labeled with the operating environment name in parentheses.

  To avoid repetition file system directory names are often given
  only in UNIX format as in <code class="filename">/path/to/server</code>,
  even if the text applies to <code class="filename">C:\path\to\server</code> as well.
 </p><p>
  Absolute path names usually begin with the placeholder
  <code class="filename">/path/to/</code>.

  This path might translate to <code class="filename">/opt/</code>,
  <code class="filename">C:\Program Files\</code>, or somewhere else on your system.
 </p><p>
  Command line, terminal sessions are formatted as follows:
 </p><pre class="cmdline prettyprint">$ <strong>echo $JAVA_HOME</strong>
<em>/path/to/jdk</em></pre><p>
  Command output is sometimes formatted for narrower, more readable output
  even though formatting parameters are not shown in the command.
  In the following example,
  the query string parameter <code class="literal">_prettyPrint=true</code> is omitted
  and some of the output is replaced with an ellipsis (<code class="literal">...</code>):
 </p><pre class="cmdline prettyprint">
$ <strong>curl https://bjensen:hifalutin@opendj.example.com:8443/users/newuser</strong>
<em>{
  "_rev" : "000000005b337348",
  "_id" : "newuser",
  ...
}</em>
 </pre><p>
  Program listings are formatted as follows:
 </p><pre class="codelisting prettyprint linenums lang-java">
class Test {
    public static void main(String [] args)  {
        System.out.println("This is a program listing.");
    }
}
 </pre></div><div lang="en" class="section" id="accessing-doc-online"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.&nbsp;Accessing Documentation Online</h2></div></div></div><p>
  Open Identity Platform core documentation, such as this document, aims to be
  technically accurate and complete with respect to the software documented.
 </p><div class="itemizedlist"><p>
   Core documentation therefore follows a three-phase review process
   designed to eliminate errors:
  </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
    Product managers and software architects review project documentation design
    with respect to the readers' software lifecycle needs.
   </p></li><li class="listitem"><p>
    Subject matter experts review proposed documentation changes for
    technical accuracy and completeness
    with respect to the corresponding software.
   </p></li><li class="listitem"><p>
    Quality experts validate implemented documentation changes
    for technical accuracy, completeness in scope,
    and usability for the readership.
   </p></li></ul></div><p>
  The review process helps to ensure that documentation published for
  a ForgeRock release is technically accurate and complete.
 </p><p>
  Fully reviewed, published core documentation is available at
  <a class="link" href="https://www.openidentityplatform.org/" target="_blank">https://www.openidentityplatform.org/</a>.
  Use this documentation when working with a ForgeRock Enterprise release.
 </p><p>
  You can find pre-release draft documentation at the online
  <a class="link" href="https://github.com/OpenIdentityPlatform" target="_blank">community resource center</a>.
  Use this documentation when trying a nightly build.
 </p></div><div lang="en" class="section" id="joining-the-community"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.&nbsp;Joining the Open Identity Platform Community</h2></div></div></div><p>
  Visit the
  <a class="link" href="https://github.com/OpenIdentityPlatform" target="_blank">community resource center</a>
  where you can find information about each project,
  download nightly builds, browse the resource catalog,
  ask and answer questions on the forums, find community events near you,
  and of course get the source code as well.
 </p></div></div><div lang="en" class="chapter" id="chap-understanding-ldap"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;1.&nbsp;Understanding LDAP</h1></div></div></div><a class="indexterm" name="d247e244"></a><p>A directory resembles a dictionary or a phone book. If you know a
 word, you can look it up its entry in the dictionary to learn its definition
 or its pronunciation. If you know a name, you can look it up its entry in the
 phone book to find the telephone number and street address associated with the
 name. If you are bored, curious, or have lots of time, you can also read
 through the dictionary, phone book, or directory, entry after entry.</p><p>Where a directory differs from a paper dictionary or phone book is
 in how entries are indexed. Dictionaries typically have one index: words
 in alphabetical order. Phone books, too: names in alphabetical order.
 Directories entries on the other hand are often indexed for multiple
 attributes, names, user identifiers, email addresses, telephone numbers.
 This means you can look up a directory entry by the name of the user the
 entry belongs to, but also by her user identifier, her email address, or
 her telephone number, for example.</p><div class="section" id="ldap-directory-history"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.1.&nbsp;How Directories &amp; LDAP Evolved</h2></div></div></div><p>Phone companies have been managing directories for many decades. The
  Internet itself has relied on distributed directory services like DNS since
  the mid 1980s.</p><p>It was not until the late 1980s, however, that experts from what is now
  the International Telecommunications Union brought forth the X.500 set of
  international standards, including Directory Access Protocol. The X.500
  standards specify Open Systems Interconnect (OSI) protocols and
  data definitions for general-purpose directory services. The X.500 standards
  were designed to meet the needs of systems built according to the X.400
  standards, covering electronic mail services.</p><p>Lightweight Directory Access Protocol has been around since the early
  1990s. LDAP was originally developed as an alternative protocol that would
  allow directory access over Internet protocols rather than OSI protocols,
  and be lightweight enough for desktop implementations. By the mid 1990s, LDAP
  directory servers became generally available and widely used.</p><p>Until the late 1990s, LDAP directory servers were designed primarily
  with quick lookups and high availability for lookups in mind. LDAP directory
  servers replicate data, so when an update is made, that update gets pushed
  out to other peer directory servers. Thus if one directory server goes down
  lookups can continue on other servers. Furthermore, if a directory service
  needs to support more lookups, the administrator can simply add another
  directory server to replicate with its peers.</p><p>As organizations rolled out larger and larger directories serving more
  and more applications, they discovered that they needed high availability
  not only for lookups, but also for updates. Around 2000 directories began
  to support multi-master replication, that is replication with multiple
  read-write servers. Soon thereafter the organizations with the very largest
  directories started to need higher update performance as well as
  availability.</p><p>The OpenDJ code base began in the mid 2000s, when engineers solving the
  update performance issue decided the cost of adapting the existing C-based
  directory technology for high performance updates would be higher than the
  cost of building a next generation, high performance directory using Java
  technology.</p></div><div class="section" id="directory-data"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.2.&nbsp;Data In LDAP Directories</h2></div></div></div><a class="indexterm" name="d247e271"></a><a class="indexterm" name="d247e276"></a><p>LDAP directory data is organized into entries, similar to the entries
  for words in the dictionary, or for subscriber names in the phone book.
  A sample entry follows.</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
uid: bjensen
cn: Babs Jensen
cn: Barbara Jensen
facsimileTelephoneNumber: +1 408 555 1992
gidNumber: 1000
givenName: Barbara
homeDirectory: /home/bjensen
l: Cupertino
mail: bjensen@example.com
objectClass: inetOrgPerson
objectClass: organizationalPerson
objectClass: person
objectClass: posixAccount
objectClass: top
ou: People
ou: Product Development
roomNumber: 0209
sn: Jensen
telephoneNumber: +1 408 555 1862
uidNumber: 1076
</pre><p>Barbara Jensen's entry has a number of attributes, such as
  <code class="literal">uid: bjensen</code>,
  <code class="literal">telephoneNumber: +1 408 555 1862</code>, and
  <code class="literal">objectClass: posixAccount</code><a href="#ftn.d247e293" class="footnote"><sup class="footnote" id="d247e293">[1]</sup></a>. When you look up her entry
  in the directory, you specify one or more attributes and values to match
  in the entries that come back as the result of your search. Typically the
  attributes you search for are indexed in the directory, so the directory
  server can retrieve them more quickly.<a href="#ftn.d247e300" class="footnote"><sup class="footnote" id="d247e300">[2]</sup></a></p><p>The entry also has a unique identifier, shown at the top of the entry, 
  <code class="literal">dn: uid=bjensen,ou=People,dc=example,dc=com</code>. DN stands
  for distinguished name. No two entries in the directory have the same
  distinguished name.<a href="#ftn.d247e308" class="footnote"><sup class="footnote" id="d247e308">[3]</sup></a></p><p>LDAP entries are arranged hierarchically in the directory. The
  hierarchical organization resembles a file system on a PC or a web server,
  often imagined as an upside-down tree structure, looking similar to a
  pyramid.<a href="#ftn.d247e315" class="footnote"><sup class="footnote" id="d247e315">[4]</sup></a>The distinguished name consists of components
  separated by commas,
  <code class="literal">uid=bjensen,ou=People,dc=example,dc=com</code>. Those components
  reflect the hierarchy of directory entries.</p><div class="mediaobject" align="center" id="figure-data-organization"><a class="fancybox" href="images/data-organization.png"><img class="img-responsive center-block" data-toggle="tooltip" src="images/thumb_data-organization.png" align="middle" alt="Directory data hierarchy as seen in OpenDJ Control Panel." title="You can see the hierarchy of directory data in the left pane of&#xA;    the Manage Entries browser."></a></div><p>Barbara Jensen's entry is located under an entry with DN
  <code class="literal">ou=People,dc=example,dc=com</code>, an organization unit and
  parent entry for the people at Example.com. The
  <code class="literal">ou=People</code> entry is located under the entry with DN
  <code class="literal">dc=example,dc=com</code>, the root entry for Example.com.
  DC stands for domain component. The directory has other root entries, such
  as <code class="literal">cn=config</code>, under which the configuration is accessible
  through LDAP, and potentially others such as
  <code class="literal">dc=mycompany,dc=com</code> or <code class="literal">o=myOrganization</code>.
  Thus when you look up entries, you specify the parent entry to look under
  in the same way you need to know whether to look in the New York, Paris,
  or Tokyo phone book to find a telephone number.<a href="#ftn.d247e350" class="footnote"><sup class="footnote" id="d247e350">[5]</sup></a></p></div><div class="section" id="ldap-client-server-communication"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.3.&nbsp;LDAP Client &amp; Server Communication</h2></div></div></div><a class="indexterm" name="d247e359"></a><p>You may be used to web service client server communication, where
  each time the web client has something to request of the web server, a
  connection is set up and then torn down. LDAP has a different model. In
  LDAP the client application connects to the server and authenticates, then
  requests any number of operations perhaps processing results in between
  requests, and finally disconnects when done.</p><div class="mediaobject" align="center" id="figure-ldap-lifecycle"><a class="fancybox" href="images/ldap-lifecycle.png"><img class="img-responsive center-block" data-toggle="tooltip" src="images/thumb_ldap-lifecycle.png" align="middle" alt="Schematic of LDAP client-server session" title="An LDAP client binds, performs operations, and then unbinds."></a></div><a class="indexterm" name="d247e374"></a><a class="indexterm" name="d247e377"></a><a class="indexterm" name="d247e380"></a><a class="indexterm" name="d247e383"></a><a class="indexterm" name="d247e386"></a><a class="indexterm" name="d247e389"></a><a class="indexterm" name="d247e392"></a><div class="itemizedlist" id="standard-ldap-operations"><p>The standard operations are as follows.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Bind (authenticate). The first operation in an LDAP session involves
    the client binding to the LDAP server, with the server authenticating the
    client. Authentication identifies the client's identity in LDAP terms, the
    identity which is later used by the server to authorize (or not) access
    to directory data that the client wants to lookup or change.</p></li><li class="listitem"><p>Search (lookup). After binding, the client can request that the server
    return entries based on an LDAP filter, which is an expression that the
    server uses to find entries that match the request, and a base DN under
    which to search. For example, to lookup all entries for people with email
    address <code class="literal">bjensen@example.com</code> in data for Example.com,
    you would specify a base DN such as
    <code class="literal">ou=People,dc=example,dc=com</code> and the filter
    <code class="literal">(mail=bjensen@example.com)</code>.</p></li><li class="listitem"><p>Compare. After binding, the client can request that the server
    compare an attribute value the client specifies with the value stored
    on an entry in the directory.</p></li><li class="listitem"><p>Modify. After binding, the client can request that the server
    change one or more attribute values stored on one or more entries. Often
    administrators do not allow clients to change directory data, so request
    that your administrator set appropriate access rights for your client
    application if you want to update data.</p></li><li class="listitem"><p>Add. After binding, the client can request to add one or more
    new LDAP entries to the server. </p></li><li class="listitem"><p>Delete. After binding, the client can request that the server
    delete one or more entries. To delete and entry with other entries
    underneath, first delete the children, then the parent.</p></li><li class="listitem"><p>Modify DN. After binding, the client can request that the server
    change the distinguished name of the entry. For example, if Barbara
    changes her unique identifier from <code class="literal">bjensen</code> to something
    else, her DN would have to change. For another example, if you decide
    to consolidate <code class="literal">ou=Customers</code> and
    <code class="literal">ou=Employees</code> under <code class="literal">ou=People</code>
    instead, all the entries underneath much change distinguished names.
    <a href="#ftn.d247e440" class="footnote"><sup class="footnote" id="d247e440">[6]</sup></a></p></li><li class="listitem"><p>Unbind. When done making requests, the client should request an
    unbind operation to release resources right away for other clients.</p></li><li class="listitem"><p>Abandon. When a request seems to be taking too long to complete,
    or when a search request returns many more matches than desired, the client
    can send an abandon request to the server to drop the operation in
    progress. The server then drops the connection without a reply to the
    client.</p></li></ul></div></div><div class="section" id="standard-ldapv3-extensions"><div class="titlepage"><div><div><h2 class="title" style="clear: both">1.4.&nbsp;Standard LDAPv3 &amp; Extensions</h2></div></div></div><p>LDAP has standardized two mechanisms for extending the kinds of
  operations that directory servers can perform. One mechanism involves using
  LDAP controls. The other mechanism involves using LDAP extended
  operations.</p><a class="indexterm" name="d247e454"></a><p>LDAP controls are information added to an LDAP message to further
  specify how an LDAP operation should be processed. For example, the
  Server Side Sort Request Control modifies a search to request that the
  directory server return entries to the client in sorted order. The Subtree
  Delete Request Control modifies a delete to request that the server
  also remove child entries of the entry targeted for deletion.</p><a class="indexterm" name="d247e461"></a><p>LDAP extended operations are additional LDAP operations not included
  in the original standard list. For example, the Cancel Extended Operation
  works like an abandon operation, but finishes with a response from the
  server after the cancel is complete. The StartTLS Extended Operation allows
  a client to connect to a server on an unsecure port, but then start
  Transport Layer Security negotiations to protect communications.</p><p>Both LDAP controls and extended operations are demonstrated later in
  this guide. OpenDJ directory server supports many LDAP controls and a few
  LDAP extended operations, controls and extended operations matching those
  demonstrated in this guide.</p></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d247e293" class="footnote"><p><a href="#d247e293" class="para"><sup class="para">[1] </sup></a>The
  <code class="literal">objectClass</code> attribute type indicates which types of
  attributes are allowed and optional for the entry. As the entries object
  classes can be updated online, and even the definitions of object classes
  and attributes are expressed as entries that can be updated online, directory
  data is extensible on the fly.</p></div><div id="ftn.d247e300" class="footnote"><p><a href="#d247e300" class="para"><sup class="para">[2] </sup></a>Attribute values
  do not have to be strings. The directory can use base64 encoding, however,
  to make binary attribute values, such as passwords, certificates, or photos,
  portable in text format.</p></div><div id="ftn.d247e308" class="footnote"><p><a href="#d247e308" class="para"><sup class="para">[3] </sup></a>Sometimes your distinguished names include
  characters that you must escape. The following example shows an entry that
  includes escaped characters in the DN.</p><pre class="cmdline prettyprint">$ ldapsearch --port 1389 --baseDN dc=example,dc=com "(uid=escape)"
dn: cn=\" # \+ \, \; \&lt; = \&gt; \\ DN Escape Characters,dc=example,dc=com
objectClass: person
objectClass: inetOrgPerson
objectClass: organizationalPerson
objectClass: top
givenName: " # + , ; &lt; = &gt; \
uid: escape
cn: " # + , ; &lt; = &gt; \ DN Escape Characters
sn: DN Escape Characters
mail: escape@example.com</pre></div><div id="ftn.d247e315" class="footnote"><p><a href="#d247e315" class="para"><sup class="para">[4] </sup></a>Hence pyramid icons are associated with directory
  servers.</p></div><div id="ftn.d247e350" class="footnote"><p><a href="#d247e350" class="para"><sup class="para">[5] </sup></a>The root entry for the directory, technically the entry with DN
  <code class="literal">""</code> (the empty string), is called the root DSE, and
  contains information about what the server supports, including the other
  root entries it serves.</p></div><div id="ftn.d247e440" class="footnote"><p><a href="#d247e440" class="para"><sup class="para">[6] </sup></a>Renaming entire branches of entries can be a major
    operation for the directory, so avoid moving entire branches if you
    can.</p></div></div></div><div lang="en" class="chapter" id="chap-best-practices"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;2.&nbsp;Best Practices For LDAP Application Developers</h1></div></div></div><p>Follow the advice in this chapter to write effective, maintainable,
 high performance directory client applications.</p><div class="section" id="authenticate-correctly"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.1.&nbsp;Authenticate Correctly</h2></div></div></div><a class="indexterm" name="d247e479"></a><a class="indexterm" name="d247e482"></a><p>Unless your application performs only read operations, you should
  authenticate to the directory server. Some directory administrators require
  authentication even to read directory data.</p><p>Once you authenticate (bind), directory servers like OpenDJ make
  authorization decisions based on your identity. With servers like OpenDJ
  that support proxied authorization, once authenticated your application can
  also request an operation on behalf of another identity, for example the
  identity of the end user.</p><p>Your application therefore should have an account used to authenticate
  such as <code class="literal">cn=My Killer App,ou=Apps,dc=example,dc=com</code>. The
  directory administrator can then authorize appropriate access for your
  application, and also monitor your application's requests to help you
  troubleshoot problems if they arise.</p><p>Your application can use simple, password-based authentication. When
  you opt for password-based authentication, also use Start TLS for example to
  avoid sending the password as clear text over the network. If you prefer to
  manage certificates rather than passwords, directory servers like OpenDJ can
  do client authentication as well.</p></div><div class="section" id="reuse-connections"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.2.&nbsp;Reuse Connections</h2></div></div></div><a class="indexterm" name="d247e499"></a><p>LDAP is a stateful protocol. You authenticate (bind), you do stuff,
  you unbind. The server maintains a context that lets it make authorization
  decisions concerning your requests. You should therefore reuse
  connections when possible.</p><p>You can make multiple requests without having to set up a new
  connection and authenticate for every request. You can issue a request and
  get results asynchronously, while you issue another request. You can even
  share connections in a pool, avoiding the overhead of setting up and tearing
  down connections if you use them often.</p></div><div class="section" id="health-check-connections"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.3.&nbsp;Health Check Connections</h2></div></div></div><a class="indexterm" name="d247e511"></a><p>In a network built for HTTP applications, your long-lived LDAP
  connections can get cut by network equipment configured to treat idle and
  even just old connections as stale resources to reclaim.</p><p>When you maintain a particularly long-lived connection such as a
  connection for a persistent search, periodically perform a health check to
  make sure nothing on the network quietly decided to drop your connection
  without notification. A health check might involve reading an attribute
  on a well-known entry in the directory.</p><p>OpenDJ LDAP SDK offers
  <code class="literal">Connections.newHeartBeatConnectionFactory()</code> methods to
  ensure your <code class="literal">ConnectionFactory</code> serves connections that
  are periodically checked to detect whether they are still alive.</p></div><div class="section" id="request-what-you-need-all-at-once"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.4.&nbsp;Request Exactly What You Need All At Once</h2></div></div></div><p>By the time your application makes it to production, you should know
  what attributes you want, so request them explicitly and request all
  the attributes you need in the same search. For example, if all you need
  is <code class="literal">mail</code> and <code class="literal">cn</code>, then specify both
  attributes in your <code class="literal">SearchRequest</code>.</p></div><div class="section" id="use-specific-filters"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.5.&nbsp;Use Specific LDAP Filters</h2></div></div></div><a class="indexterm" name="d247e545"></a><p>The difference between a general filter
  <code class="literal">(mail=*@example.com)</code> and a good, specific filter like
  <code class="literal">(mail=user@example.com)</code> can be huge numbers of entries
  and enormous amounts of processing time, both for the directory server
  that has to return search results, and also for your application that has
  to sort through the results. Many use cases can be handled with short,
  specific filters. As a rule, prefer equality filters over substring
  filters.</p><p>Some directory servers like OpenDJ reject unindexed searches by
  default, because unindexed searches are generally far more resource intensive.
  If your application needs to use a filter that results in an unindexed search,
  then work with your directory administrator to find a solution, such as having
  the directory maintain the indexes required by your application.</p><p>Furthermore, always use <code class="literal">&amp;</code> with
  <code class="literal">!</code> to restrict the potential result set before returning
  all entries that do not match part of the filter. For example, <code class="literal">(&amp;(location=Oslo)(!(mail=birthday.girl@example.com)))</code>.</p></div><div class="section" id="make-modifications-specific"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.6.&nbsp;Make Modifications Specific</h2></div></div></div><a class="indexterm" name="d247e572"></a><p>When you modify attributes with multiple values, for example when you
  modify a list of group members, replace or delete specific values
  individually, rather than replacing the entire list of values. Making
  modifications specific helps directory servers replicate your changes more
  effectively.</p></div><div class="section" id="trust-result-codes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.7.&nbsp;Trust Result Codes</h2></div></div></div><a class="indexterm" name="d247e580"></a><p>Trust the LDAP result code that your application gets from the
  directory server. For example, if you request a modify application and you
  get <code class="literal">ResultCode.SUCCESS</code>, then consider the operation a
  success rather than issuing a search immediately to get the modified
  entry.</p><p>The LDAP replication model is loosely convergent. In other words,
  the directory server can, and probably does, send you
  <code class="literal">ResultCode.SUCCESS</code> before replicating your change to
  every directory server instance across the network. If you issue a read
  immediately after a write, and a load balancer sends your request to another
  directory server instance, you could get a result that differs from what
  you expect.</p><a class="indexterm" name="d247e595"></a><p>The loosely convergent model also means that the entry could have
  changed since you read it. If needed, you can use <a class="link" href="http://tools.ietf.org/html/rfc4528" target="_blank">LDAP assertions</a> to set
  conditions for your LDAP operations.</p></div><div class="section" id="ismemberof-for-membership"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.8.&nbsp;Check Group Membership on the Account, Not the Group</h2></div></div></div><a class="indexterm" name="d247e606"></a><p>If you need to determine which groups an account belongs to, request
  <code class="literal">isMemberOf</code> for example with OpenDJ when you read the
  account entry. Other directory servers use other names for this attribute
  that identifies the groups to which an account belongs.</p></div><div class="section" id="ask-directory-what-it-supports"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.9.&nbsp;Ask the Directory Server What It Supports</h2></div></div></div><a class="indexterm" name="d247e617"></a><p>Directory servers expose their capabilities, suffixes they support,
  and so forth as attribute values on the root DSE. See the section on
  <a href="../dev-guide/index.html#read-root-dse" class="link"><em class="citetitle">Reading Root
  DSEs</em></a>.</p><p>This allows your application to discover a variety of information at
  run time, rather than storing configuration separately. Thus putting effort
  into querying the directory about its configuration and the features it
  supports can make your application easier to deploy and to maintain.</p><p>For example, rather than hard-coding
  <code class="literal">dc=example,dc=com</code> as a suffix DN in your configuration,
  you can search the root DSE on OpenDJ for <code class="literal">namingContexts</code>,
  and then search under the naming context DNs to locate the entries you are
  looking for in order to initialize your configuration.</p><p>Directory servers also expose their schema over LDAP. The root DSE
  attribute <code class="literal">subschemaSubentry</code> shows the DN of the entry
  holding LDAP schema definitions. See the section, <a href="../dev-guide/index.html#get-schema-information" class="link"><em class="citetitle">Getting Schema
  Information</em></a>. Note that LDAP object class and attribute
  type names are case-insensitive, so <code class="literal">isMemberOf</code> and
  <code class="literal">ismemberof</code> refer to the same attribute for example.</p></div><div class="section" id="storing-large-attributes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.10.&nbsp;Store Large Attribute Values By Reference</h2></div></div></div><a class="indexterm" name="d247e656"></a><p>When you use large attribute values such as photos or audio messages,
  consider storing the objects themselves elsewhere and keeping only a reference
  to external content on directory entries. In order to serve results quickly
  with high availability, directory servers both cache content and also
  replicate it everywhere.</p><p>Textual entries with a bunch of attributes and perhaps a certificate
  are often no larger than a few KB. Your directory administrator might
  therefore be disappointed to learn that your popular application stores
  users' photo and .mp3 collections as attributes of their accounts.</p></div><div class="section" id="careful-with-persistent-search-and-server-side-sorting"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.11.&nbsp;Take Care With Persistent Search &amp; Server-Side Sorting</h2></div></div></div><a class="indexterm" name="d247e666"></a><a class="indexterm" name="d247e671"></a><p>A persistent search lets your application receive updates from the
  server as they happen by keeping the connection open and forcing the server
  to check whether to return additional results any time it performs a
  modification in the scope of your search. Directory administrators therefore
  might hesitate to grant persistent search access to your application.
  Directory servers like OpenDJ can let you discover updates with less
  overhead by searching the change log periodically. If you do have to use
  a persistent search instead, try to narrow the scope of your search.</p><p>Directory servers also support a resource-intensive operation called
  server-side sorting. When your application requests a server-side sort, the
  directory server retrieves all the entries matching your search, and then
  returns the whole set of entries in sorted order. For result sets of any size
  server-side sorting therefore ties up server resources that could be used
  elsewhere. Alternatives include both sorting the results after your
  application receives them, and also working with the directory administrator
  to have appropriate browsing (virtual list view) indexes maintained on the
  directory server for applications that must regularly page through long
  lists of search results.</p></div><div class="section" id="reuse-schemas"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.12.&nbsp;Reuse Schemas Where Possible</h2></div></div></div><a class="indexterm" name="d247e683"></a><p>Directory servers like OpenDJ come with schema definitions for a wide
  range of standard object classes and attribute types. This is because
  directories are designed to be shared by many applications. Directories
  use unique, typically <a class="link" href="http://www.iana.org/" target="_blank">IANA</a>-registered object identifiers (OID) to avoid
  object class and attribute type name clashes. The overall goal is
  Internet-wide interoperability.</p><p>You therefore should reuse schema definitions that already exist
  whenever you reasonably can. Reuse them as is. Do not try to redefine
  existing schema definitions.</p><p>If you must add schema definitions for your application, extend
  existing object classes with AUXILIARY classes of your own. Take care to
  name your definitions such that they do not clash with other names.</p><p>When you have defined schema required for your application, work with
  the directory administrator to have your definitions added to the directory
  service. Directory servers like OpenDJ let directory administrators update
  schema definitions over LDAP, so there is not generally a need to interrupt
  the service to add your application. Directory administrators can however
  have other reasons why they hesitate to add your schema definitions.
  Coming to the discussion prepared with good schema definitions, explanations
  of why they should be added, and evident regard for interoperability makes
  it easier for the directory administrator to grant your request.</p></div><div class="section" id="handle-referrals"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.13.&nbsp;Handle Referrals</h2></div></div></div><a class="indexterm" name="d247e702"></a><a class="indexterm" name="d247e705"></a><p>When a directory server returns a search result, the result is not
  necessarily an entry. If the result is a referral, then your application
  should follow up with an additional search based on the URIs provided in
  the result.</p></div><div class="section" id="check-result-codes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.14.&nbsp;Troubleshooting: Check Result Codes</h2></div></div></div><a class="indexterm" name="d247e715"></a><p>LDAP result codes are standard and clearly defined. When you receive
  a <code class="literal">Result</code>, check the <code class="literal">ResultCode</code> value to
  determine what action your application should take. When the result is not
  what you expect, you can also read or at least log the message string from
  <code class="literal">ResultCode.getDiagnosticMessage()</code>.</p></div><div class="section" id="check-log-files"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.15.&nbsp;Troubleshooting: Check Server Log Files</h2></div></div></div><p>If you can read the directory server access log, then you can check
  what the server did with your application's request. For example, the
  following OpenDJ access log excerpt shows a successful connection from
  <code class="literal">cn=My Killer App,ou=Apps,dc=example,dc=com</code> performing
  a simple bind after Start TLS, and then a simple search before unbind.
  The lines are wrapped for readability, whereas in the log each record starts
  with the time stamp.</p><pre>[20/Apr/2012:13:31:05 +0200] CONNECT conn=5
 from=127.0.0.1:51561 to=127.0.0.1:1389 protocol=LDAP
[20/Apr/2012:13:31:05 +0200] EXTENDED REQ conn=5 op=0 msgID=1 name="StartTLS"
 oid="1.3.6.1.4.1.1466.20037"
[20/Apr/2012:13:31:05 +0200] EXTENDED RES conn=5 op=0 msgID=1 name="StartTLS"
 oid="1.3.6.1.4.1.1466.20037" result=0 etime=0
[20/Apr/2012:13:31:07 +0200] BIND REQ conn=5 op=1 msgID=2 version=3 type=SIMPLE
 dn="cn=My Killer App,ou=Apps,dc=example,dc=com"
[20/Apr/2012:13:31:07 +0200] BIND RES conn=5 op=1 msgID=2 result=0
 authDN="cn=My Killer App,ou=Apps,dc=example,dc=com" etime=1
[20/Apr/2012:13:31:07 +0200] SEARCH REQ conn=5 op=2 msgID=3
 base="dc=example,dc=com" scope=wholeSubtree
 filter="(uid=kvaughan)" attrs="isMemberOf"
[20/Apr/2012:13:31:07 +0200] SEARCH RES conn=5 op=2 msgID=3
 result=0 nentries=1 etime=6
[20/Apr/2012:13:31:07 +0200] UNBIND REQ conn=5 op=3 msgID=4
[20/Apr/2012:13:31:07 +0200] DISCONNECT conn=5 reason="Client Unbind"</pre><p>Notice that each operation type is shown in upper case, and that the
  server tracks both the connection (<code class="literal">conn=5</code>), operation
  (<code class="literal">op=[0-3]</code>), and message ID (<code class="literal">msgID=[1-4]</code>)
  numbers to make it easy to filter records. The <code class="literal">etime</code> refers
  to how long the server worked on the request in milliseconds. Result code
  0 corresponds to <code class="literal">ResultCode.SUCCESS</code>, as described in
  <a class="link" href="http://tools.ietf.org/html/rfc4511#section-4.1.9" target="_blank">RFC 4511</a>.</p></div><div class="section" id="inspect-network-traffic"><div class="titlepage"><div><div><h2 class="title" style="clear: both">2.16.&nbsp;Troubleshooting: Inspect Network Traffic</h2></div></div></div><p>If result codes and server logs are not enough, many network tools
  can interpret LDAP packets. Get the necessary certificates to decrypt
  encrypted packet content.</p></div></div><div lang="en" class="chapter" id="chap-get-sdk"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;3.&nbsp;Getting OpenDJ LDAP SDK</h1></div></div></div><p>This chapter introduces OpenDJ LDAP SDK, demonstrating how to get the
 software and to build a first basic directory client application.</p><div class="section" id="about-opendj-ldap-sdk"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.1.&nbsp;About OpenDJ LDAP SDK</h2></div></div></div><a class="indexterm" name="d247e775"></a><p>OpenDJ LDAP SDK provides a set of modern, developer-friendly Java APIs
  as part of the OpenDJ product suite. The product suite includes the client
  SDK alongside command-line tools and sample code, a 100% pure Java directory
  server, and more. You can use OpenDJ LDAP SDK to create client applications
  for use with any server that complies with the <em class="citetitle">Lightweight
  Directory Access Protocol (LDAP): Technical Specification Road
  Map</em>, <a class="link" href="http://tools.ietf.org/html/rfc4510" target="_blank">RFC 4510</a>.</p><p>OpenDJ LDAP SDK brings you easy-to-use connection management, connection
  pooling, load balancing, and all the standard LDAP operations to read and
  write directory entries. OpenDJ LDAP SDK also lets you build applications with
  capabilities defined in additional draft and experimental RFCs that are
  supported by modern LDAP servers.</p></div><div class="section" id="prepare-ldap-server"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.2.&nbsp;Preparing an LDAP Server</h2></div></div></div><a class="indexterm" name="d247e793"></a><a class="indexterm" name="d247e798"></a><p>Install an LDAP server such as OpenDJ directory server that you can
  use to test the applications you develop. Also, load sample data into your
  server. The sample data used in this guide are available in LDIF form at
  <a class="link" href="http://opendj.forgerock.org/Example.ldif" target="_blank">http://opendj.forgerock.org/Example.ldif</a>.</p></div><div class="section" id="getting-the-ldap-sdk"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.3.&nbsp;Getting the LDAP SDK</h2></div></div></div><p>You can either install a build or build your own from source.</p><p>Before you either download a build of OpenDJ LDAP SDK, or get the
  source code to build your own SDK, make sure you have a Java Development Kit
  installed. See the <em class="citetitle">Release Notes</em> section on
  <a href="../release-notes/index.html#prerequisites-java" class="link"><em class="citetitle">Java
  Environment</em></a> requirements.</p><div class="procedure" id="use-maven"><div class="procedure-inner"><div class="procedure-title">Procedure&nbsp;3.1.&nbsp;To Include the SDK as a Maven Dependency</div><a class="indexterm" name="d247e825"></a><p>Let that expensive computer you bought do the work.</p><ul class="procedure"><li class="step"><p>Include the ForgeRock repository in your list, and include the SDK
    as a dependency.</p><pre class="codelisting prettyprint lang-xml">&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;forgerock-staging-repository&lt;/id&gt;
    &lt;name&gt;ForgeRock Release Repository&lt;/name&gt;
    &lt;url&gt;http://maven.forgerock.org/repo/releases&lt;/url&gt;
    &lt;snapshots&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
    &lt;/snapshots&gt;
  &lt;/repository&gt;
  &lt;repository&gt;
    &lt;id&gt;forgerock-snapshots-repository&lt;/id&gt;
    &lt;name&gt;ForgeRock Snapshot Repository&lt;/name&gt;
    &lt;url&gt;http://maven.forgerock.org/repo/snapshots&lt;/url&gt;
    &lt;releases&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
    &lt;/releases&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;

...

&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.forgerock.opendj&lt;/groupId&gt;
    &lt;artifactId&gt;opendj-ldap-sdk&lt;/artifactId&gt;
    &lt;version&gt;&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></li></ul></div></div><div class="procedure" id="install-latest-sdk"><div class="procedure-inner"><div class="procedure-title">Procedure&nbsp;3.2.&nbsp;To Install the Latest SDK &amp; Tools</div><a class="indexterm" name="d247e840"></a><ol class="procedure" type="1"><li class="step"><p>Download the latest OpenDJ LDAP Client Toolkit nightly build from the
    <a class="link" href="http://forgerock.org/opendj.html" target="_blank">Nightly Builds</a> page.</p></li><li class="step"><p>Unzip the bundle,
    <code class="filename">opendj-ldap-toolkit-.zip</code>,
    where you want to install the SDK.</p><pre class="cmdline prettyprint">$ unzip opendj-ldap-toolkit-.zip</pre></li><li class="step"><p>Add the tools to your PATH.</p><pre class="cmdline prettyprint">(UNIX)
$ export PATH=/path/to/opendj-ldap-toolkit-/bin:$PATH</pre><pre class="cmdline prettyprint">(Windows)
C:\&gt;set PATH=\\path\to\opendj-ldap-toolkit-\bat:%PATH%</pre></li><li class="step"><p> Add the OpenDJ LDAP SDK for the APIs, the I18N core library,
     and Grizzly I/O framework for the transport to your CLASSPATH, typically found under
     <code class="filename">opendj-ldap-toolkit-/lib/</code>.</p><pre class="cmdline prettyprint">(UNIX)
$ export CLASSPATH=/path/to/lib/grizzly-framework-.jar:$CLASSPATH
$ export CLASSPATH=/path/to/lib/i18n-core-.jar:$CLASSPATH
$ export CLASSPATH=/path/to/lib/opendj-ldap-sdk-.jar:$CLASSPATH
     </pre><pre class="cmdline prettyprint">(Windows)
C:\&gt;set CLASSPATH=\\path\to\lib\grizzly-framework-.jar:%CLASSPATH%
C:\&gt;set CLASSPATH=\\path\to\lib\i18n-core-.jar:%CLASSPATH%
C:\&gt;set CLASSPATH=\\path\to\lib\opendj-ldap-sdk-.jar:%CLASSPATH%</pre></li></ol></div></div><div class="procedure" id="proc-roll-your-own-sdk"><div class="procedure-inner"><div class="procedure-title">Procedure&nbsp;3.3.&nbsp;To Build Your Own SDK From Source</div><a class="indexterm" name="d247e879"></a><ol class="procedure" type="1"><li class="step"><p>Make sure you have Subversion (<span class="command"><strong>svn</strong></span>) and
    Maven (<span class="command"><strong>mvn</strong></span>) installed.</p></li><li class="step"><p>Check out the source code.</p><pre class="cmdline prettyprint">$ svn co https://svn.forgerock.org/opendj/trunk/opendj3
...
Checked out revision <em><strong>XXXX</strong></em>.</pre></li><li class="step"><p>Build the modules and install them in the local repository.</p><pre class="cmdline prettyprint">$ cd opendj3/
$ mvn install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] OpenDJ Directory Services Project
[INFO] OpenDJ LDAP SDK
[INFO] OpenDJ LDAP Toolkit
[INFO] OpenDJ LDAP SDK Examples
[INFO] OpenDJ Commons REST Adapter
[INFO] OpenDJ Commons REST LDAP Gateway
[INFO] OpenDJ Server 2.x Adapter
[INFO]
       ...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:51.315s
[INFO] Finished at: Wed Apr 10 14:28:36 CEST 2013
[INFO] Final Memory: 37M/382M
[INFO] ------------------------------------------------------------------------</pre></li><li class="step"><p>Unzip the tools and libraries included in the file,
    <code class="filename">opendj3/opendj-ldap-toolkit/target/opendj-ldap-toolkit-.zip</code>.</p></li><li class="step"><p>Add the <code class="filename">opendj-ldap-toolkit-/bin</code>
    (UNIX) or <code class="filename">opendj-ldap-toolkit-\bat</code>
    (Windows) directory to your PATH.</p></li><li class="step"><p>Set your CLASSPATH to include the OpenDJ LDAP SDK library,
    <code class="filename">opendj-ldap-sdk-.jar</code>, 
    the I18N core library,
    <code class="filename">i18n-core-.jar</code>, and the
    Grizzly framework,
    <code class="filename">grizzly-framework-.jar</code>
    under
    <code class="filename">opendj-ldap-toolkit-/lib/</code>.</p></li></ol></div></div><p>After you install OpenDJ LDAP SDK and configure your environment as
  described, if you have a directory server running import sample data,
  and test your configuration with a sample client application.</p><pre class="codelisting prettyprint linenums lang-java">import org.forgerock.opendj.ldap.Connection;
import org.forgerock.opendj.ldap.LDAPConnectionFactory;
import org.forgerock.opendj.ldap.SearchScope;
import org.forgerock.opendj.ldap.responses.SearchResultEntry;
import org.forgerock.opendj.ldap.responses.SearchResultReference;
import org.forgerock.opendj.ldif.ConnectionEntryReader;
import org.forgerock.opendj.ldif.LDIFEntryWriter;

//Test.java:
//Kick the SDK tires, reading Babs Jensen's entry and displaying LDIF.
//If your LDAP server is not listening on localhost:1389, or if your
//data are different change the appropriate lines below.

class Test {
    public static void main(String[] args) {

        // Create an LDIF writer which will write the search results to stdout.

        final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
        Connection connection = null;

        try {
            // Connect and bind to the server.
            // CHANGE THIS IF SERVER IS NOT AT localhost:1389.
            final LDAPConnectionFactory factory =
                    new LDAPConnectionFactory("localhost", 1389);

            connection = factory.getConnection();
            // CHANGE THIS IF ANONYMOUS SEARCHES ARE NOT ALLOWED.
            // connection.bind(userName, password);

            // Read the entries and output them as LDIF.
            // CHANGE THIS IF NO uid=bjensen,ou=people,dc=example,dc=com EXISTS.
            final ConnectionEntryReader reader =
                    connection.search("dc=example,dc=com",
                            SearchScope.WHOLE_SUBTREE, "(uid=bjensen)", "*");
            while (reader.hasNext()) {
                if (reader.isEntry()) {
                    // Got an entry.
                    final SearchResultEntry entry = reader.readEntry();
                    writer.writeComment("Search result entry: "
                            + entry.getName().toString());
                    writer.writeEntry(entry);
                } else {
                    // Got a continuation reference.
                    final SearchResultReference ref = reader.readReference();
                    writer.writeComment("Search result reference: "
                            + ref.getURIs().toString());
                }
            }
            writer.flush();
        } catch (final Exception e) {
            // Handle exceptions...
            System.err.println(e.getMessage());
        } finally {
            if (connection != null) {
                connection.close();
            }
        }
    }
}
</pre><p>If all goes well, <code class="filename">Test.java</code> compiles without
  errors. The test program displays Babs Jensen's entry in LDIF.</p><pre class="cmdline prettyprint">$ javac Test.java
$ java Test
# Search result entry: uid=bjensen,ou=People,dc=example,dc=com
dn: uid=bjensen,ou=People,dc=example,dc=com
givenName: Barbara
objectClass: person
objectClass: inetOrgPerson
objectClass: organizationalPerson
objectClass: top
uid: bjensen
cn: Barbara Jensen
cn: Babs Jensen
sn: Jensen
telephoneNumber: +1 408 555 1862
roomNumber: 0209
ou: Product Development
ou: People
l: Cupertino
mail: bjensen@example.com
facsimileTelephoneNumber: +1 408 555 1992</pre></div><div class="section" id="opendj-ldap-sdk-examples"><div class="titlepage"><div><div><h2 class="title" style="clear: both">3.4.&nbsp;Accessing Example Java Code</h2></div></div></div><a class="indexterm" name="d247e950"></a><p>A number of OpenDJ LDAP SDK examples are available online on the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ community site</a>. There you find samples
  whose excerpts are shown in this guide.</p></div></div><div lang="en" class="chapter" id="chap-using-the-sdk"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;4.&nbsp;Using the LDAP SDK</h1></div></div></div><p>As LDAP relies on a connection from the client to the directory server,
 the starting point for working with the LDAP SDK is a new
 <code class="literal">LDAPConnectionFactory</code>, from which you then get either
 a synchronous connection, or pass in a handler to an asynchronous
 connection. You then use the connection to make requests and get responses
 from the directory server.</p><div class="section" id="sync-vs-async"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.1.&nbsp;Synchronous &amp; Asynchronous Operations</h2></div></div></div><a class="indexterm" name="d247e972"></a><a class="indexterm" name="d247e977"></a><p>For synchronous operations your application gets a connection from
  the <code class="literal">LDAPConnectionFactory</code> and requests operations on
  the connection. When finished, your application closes the connection.</p><pre class="codelisting prettyprint linenums lang-java">
final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;

try {
    connection = factory.getConnection();

    // Perform operations on the connection, such as connection.bind(),
    // connection.search(), connection.modify(), etc.

    } catch (final ErrorResultException e) {
        System.err.println(e.getMessage());
        System.exit(e.getResult().getResultCode().intValue());
        return;
    } finally {
        if (connection != null) {
            connection.close();
        }
    }
</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Search.html" target="_blank">Search.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><p>For asynchronous operations, your application passes a result handler
  to <code class="literal">LDAPConnectionFactory.getConnectionAsync()</code> that
  implements the <code class="literal">ResultHandler&lt;Connection&gt;</code>
  interface.</p><pre class="codelisting prettyprint linenums lang-java">
private static final class ConnectResultHandlerImpl
        implements ResultHandler&lt;Connection&gt; {
    @Override
    public void handleErrorResult(final ErrorResultException error) {
        ...
    }

    @Override
    public void handleResult(final Connection connection) {
        // Connect succeeded: save connection and initiate bind.
        SearchAsync.connection = connection;

        final BindRequest request =
                Requests.newSimpleBindRequest(userName, password.toCharArray());
        connection.bindAsync(request, null, new BindResultHandlerImpl());
    }
}

// Main method initiates async operations by getting a connection...
final LDAPConnectionFactory factory = new LDAPConnectionFactory(hostName, port);
factory.getConnectionAsync(new ConnectResultHandlerImpl());

...

if (connection != null) {
    connection.close();
}
</pre><p>When the connection result handler gets a connection, your application
  can pass result handlers for other operations using methods on the connection
  named <code class="literal">*Async()</code>. For most operations, your application
  implements <code class="literal">ResultHandler</code>. For searches, your application
  implements <code class="literal">SearchResultHandler</code>. The result handler is
  notified upon completion of the operation.</p><p>Asynchronous methods are non-blocking, returning a
  <code class="literal">FutureResult</code> whose <code class="literal">get()</code> method lets
  you retrieve the result. Your application must coordinate concurrency when
  you use asynchronous operations.</p><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/SearchAsync.html" target="_blank">SearchAsync.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="error-handling"><div class="titlepage"><div><div><h2 class="title" style="clear: both">4.2.&nbsp;Managing Errors</h2></div></div></div><a class="indexterm" name="d247e1037"></a><p>LDAP <a class="link" href="http://tools.ietf.org/html/rfc4511#appendix-A" target="_blank">defines many result codes</a> to deal with conditions
  other than success. The <code class="literal">ResultCode</code> class encapsulates the
  LDAP codes and additional client-side codes specific to the SDK.</p><p>Your application deals with most non-success result codes when it
  catches one of the LDAP SDK exceptions corresponding to the operation you
  requested. <code class="literal">ErrorResultException</code> is a common way for the
  SDK to indicate a non-successful result. Your application can then take
  remedial action based on the result code, as in the following synchronous
  excerpt.</p><pre class="codelisting prettyprint linenums lang-java">
final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;

try {
    connection = factory.getConnection();
    connection.bind(name, password);

    // Perform operations on the connection...

} catch (final ErrorResultException e) {

    // Take remedial action based on the result code...
    // e.getResult().getResultCode() returns the code for you to interpret.

} finally {
    if (connection != null) {
        connection.close();
    }
}
</pre><p>Also notice the methods <code class="literal">ResultCode.getName()</code> that
  provides a short, human-readable version of the result code, and
  <code class="literal">Result.getDiagnosticMessage()</code> that can also help debug
  problems after the fact.</p></div></div><div lang="en" class="chapter" id="chap-authenticating"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;5.&nbsp;Authenticating To the Directory</h1></div></div></div><p>When your client application connects to the directory, the first
 operation to perform is a bind operation. The bind operation authenticates
 the client to the directory.</p><div class="section" id="simple-auth"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.1.&nbsp;Simple Authentication</h2></div></div></div><a class="indexterm" name="d247e1073"></a><p>You perform simple authentication by binding with the distinguished
  name of a user's directory entry and the user's password. For this reason
  simple authentication over unsecure network connections should be done only
  in the lab. If your real end users are providing their passwords, your
  application must use simple authentication only if the network is
  secure.</p><p>To bind using Barbara Jensen's identity and simple authentication,
  for example, your application would provide the DN
  <code class="literal">uid=bjensen,ou=People,dc=example,dc=com</code> with the
  password <code class="literal">hifalutin</code>.</p><p>The directory stores the password value used for simple authentication
  in binary form on the <code class="literal">userPassword</code> attribute of the entry.
  In other words, for the purposes of your application the password is not a
  string, but instead an array of bytes. Typically the directory is further
  configured to store only hashed values of user passwords, rather than plain
  text versions. Thus even if someone managed to read the stored password
  values, they would still have to crack the hash in order to learn the
  actual passwords. When your application performing simple authentication
  sends the password value, the directory server therefore hashes the password
  value, and then compares the hashed result with the value of the
  <code class="literal">userPassword</code> on the user entry. If the values match,
  then the directory authenticates the user. Once the user has authenticated,
  the directory determines authorization for operations on the connection
  based on the users identity.</p><pre class="codelisting prettyprint linenums lang-java">
/**
 * Authenticate over LDAP.
 */
private static void connect()
{
  final LDAPConnectionFactory factory = new LDAPConnectionFactory(
    host, port);
  Connection connection = null;

  try
  {
    connection = factory.getConnection();
    connection.bind(bindDN, bindPassword.toCharArray());
    System.out.println("Authenticated as " + bindDN + ".");
  }
  catch (final ErrorResultException e)
  {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
  }
  finally
  {
    if (connection != null) connection.close();
  }
}</pre><p>If the password values do not match, a directory might nevertheless
  authenticate the client application. The LDAP specifications say that in this
  case, however, the directory authenticates the user as anonymous, therefore
  no doubt with fewer rights than the normal user, and surely fewer rights
  than an administrator.</p><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/SimpleAuth.html" target="_blank">SimpleAuth.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="simple-auth-with-starttls-or-ssl"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.2.&nbsp;Start TLS &amp; SSL Authentication</h2></div></div></div><a class="indexterm" name="d247e1111"></a><a class="indexterm" name="d247e1116"></a><p>Simple authentication involves sending a user name and password to
  the directory server. To avoid sending the user name and password in
  the clear, you can use SSL or Start TLS.</p><p>For both SSL and Start TLS, you pass LDAP options to the connection
  factory in order to set an SSL context, and set whether to use Start TLS.
  The SSL context lets you set a trust manager to check server certificates,
  and also set a key manager to provide keys when the server needs to check
  your client certificates. In the simplest, not-so-secure case, you can
  set up a trust manager that trusts all certificates.</p><p>The following example is an excerpt from the OpenDJ LDAP SDK example,
  <code class="filename">org.forgerock.opendj.examples.SimpleAuth.java</code>.</p><pre class="codelisting prettyprint linenums lang-java">
private static LDAPOptions getTrustAllOptions()
  throws GeneralSecurityException
{
  LDAPOptions lo = new LDAPOptions();
  SSLContext sslContext = new SSLContextBuilder()
    .setTrustManager(TrustManagers.trustAll()).getSSLContext();
  lo.setSSLContext(sslContext);
  lo.setUseStartTLS(useStartTLS);
  return lo;
}</pre><p>A more secure and extensive SSL context would include a trust manager
  using a trust store and trust manager methods to check server certificates.
  If you also want to be able to authenticate to the server using your client
  certificate, you would need a key manager.</p><p>The authentication over SSL or using Start TLS in the trust-all case is
  much like simple authentication over LDAP without connection-level security.
  The primary differences are that you pass the <code class="literal">LDAPOptions</code>
  to the LDAP connection factory, and that you handle the potential security
  exception involved in setting up the SSL context.</p><pre class="codelisting prettyprint linenums lang-java">
/**
 * Perform authentication over a secure connection, trusting all server
 * certificates.
 */
private static void trustAllConnect()
{
  Connection connection = null;

  try
  {
    final LDAPConnectionFactory factory =
        new LDAPConnectionFactory(host, port, getTrustAllOptions());
    connection = factory.getConnection();
    connection.bind(bindDN, bindPassword.toCharArray());
    System.out.println("Authenticated as " + bindDN + ".");
  }
  catch (final ErrorResultException e)
  {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
  }
  catch (final GeneralSecurityException e)
  {
    System.err.println(e.getMessage());
    System.exit(ResultCode.CLIENT_SIDE_CONNECT_ERROR.intValue());
  }
  finally
  {
    if (connection != null)
      connection.close();
  }
}</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/SimpleAuth.html" target="_blank">SimpleAuth.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="sasl-auth"><div class="titlepage"><div><div><h2 class="title" style="clear: both">5.3.&nbsp;SASL Authentication</h2></div></div></div><a class="indexterm" name="d247e1152"></a><p>Simple Authentication and Security Layer (SASL) provides a way to
  use other mechanisms for authentication such as Kerberos or Digest
  authentication, or even to define your own authentication mechanism. The
  directory server likely advertises supported SASL mechanisms in the root
  DSE. The follow example shows how to search OpenDJ for supported SASL
  mechanisms.</p><pre class="cmdline prettyprint">$ ldapsearch
 --port 1389
 --bindDN "cn=Directory Manager"
 --bindPassword password
 --baseDN ""
 --searchScope base
 "(objectclass=*)" supportedSASLMechanisms
dn: 
supportedSASLMechanisms: PLAIN
supportedSASLMechanisms: EXTERNAL
supportedSASLMechanisms: DIGEST-MD5
supportedSASLMechanisms: CRAM-MD5</pre><p>Notice that neither the Kerberos (GSSAPI SASL) nor the Anonymous
  mechanism is enabled by default, though OpenDJ implements both.</p><p>In order to use a SASL mechanism to bind, your program must set up
  a <code class="literal">SASLBindRequest</code> and pass that to the
  <code class="literal">bind()</code> method of the <code class="literal">Connection</code>.</p><p>This section shows an example using the SASL PLAIN mechanism, which
  takes either a DN or a user ID to authenticate, with an optional DN or user
  ID as the authorization ID that identifies the user who performs operations.
  The SASL PLAIN mechanism itself does not secure the connection, so the
  example uses StartTLS. The example is provided with the OpenDJ LDAP SDK
  examples in <code class="filename">org.forgerock.opendj.examples.SASLAuth.java</code>.
  The following excerpt shows the core of the bind process.</p><pre class="codelisting prettyprint linenums lang-java">
try
{
  final LDAPConnectionFactory factory =
      new LDAPConnectionFactory(host, port, getTrustAllOptions());
  connection = factory.getConnection();
  PlainSASLBindRequest request =
      Requests.newPlainSASLBindRequest(authcid, passwd.toCharArray())
      .setAuthorizationID(authzid);
  connection.bind(request);
  System.out.println("Authenticated as " + authcid + ".");
}</pre><p>The implementation for <code class="literal">getTrustAllOptions()</code>, the
  same as in the example above, sets up Start TLS. When you run this example
  with both authorization and authentication IDs, <code class="literal">authzid</code>
  and <code class="literal">authcid</code>, set to <code class="literal">u:bjensen</code> and
  password <code class="literal">hifalutin</code>, the bind is successful, and the
  program reaches the final line of the <code class="literal">try</code> block.</p><pre class="cmdline prettyprint">Authenticated as u:bjensen.</pre><p>Behind the scenes, OpenDJ has the SASL PLAIN mechanism configured by
  default to use the Exact Match Identity Mapper to look up user IDs as
  <code class="literal">uid</code> values. If you use another directory server, you might
  have to configure how it maps user IDs to user entries.</p><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/SASLAuth.html" target="_blank">SASLAuth.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div></div><div lang="en" class="chapter" id="chap-reading"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;6.&nbsp;Searching &amp; Comparing Directory Data</h1></div></div></div><p>Traditionally directories excel at serving read requests. This chapter
 covers the read (search and compare) capabilities that OpenDJ LDAP Java SDK
 provides. The data used in examples here is <a class="link" href="http://opendj.forgerock.org/Example.ldif" target="_blank">available
 online</a>.</p><div class="section" id="about-searching"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.1.&nbsp;About Searching</h2></div></div></div><a class="indexterm" name="d247e1228"></a><div class="itemizedlist"><p>An LDAP search looks up entries based on the following
   parameters.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A <em class="firstterm">filter</em> that indicates which attribute values
    to match</p></li><li class="listitem"><p>A <em class="firstterm">base DN</em> that specifies where in the
    directory information tree to look for matches</p></li><li class="listitem"><p>A <em class="firstterm">scope</em> that defines how far to go under
    the base DN</p></li><li class="listitem"><p>A list of attributes to fetch for an entry when a match is
    found</p></li></ul></div><p>For example, imagine you must write an application where users login
  using their email address and a password. After the user logs in, your
  application displays the user's full name so it is obvious who is logged in.
  Your application is supposed to go to the user directory both for
  authentication, and also to read user profile information. You are told the
  user directory stores user profile entries under base DN
  <code class="literal">ou=People,dc=example,dc=com</code>, that email addresses are
  stored on the standard <code class="literal">mail</code> attribute, and full names are
  store on the standard <code class="literal">cn</code> attribute.</p><p>You figure out how to authenticate from the chapter on <a href="../dev-guide/index.html#chap-authenticating" class="link">authentication</a>,
  in which you learn you need a bind DN and a password to do simple
  authentication. But how do you find the bind DN given the email? How do you
  get the full name?</p><p>The answer to both questions is that you do an LDAP search for the
  user's entry, which has the DN that you use to bind, and you have the server
  fetch the <code class="literal">cn</code> attribute in the results. Your search uses
  the following parameters.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The filter is
    <code class="literal">(mail=<em class="replaceable"><code>emailAddress</code></em>)</code>, where
    <em class="replaceable"><code>emailAddress</code></em> is the email address the user
    provided.</p></li><li class="listitem"><p>The base DN is the one given to you,
    <code class="literal">ou=People,dc=example,dc=com</code>.</p></li><li class="listitem"><p>For the scope, you figure the user entry is somewhere under the base
    DN, so you opt to search the whole subtree.</p></li><li class="listitem"><p>The attribute to fetch is <code class="literal">cn</code>.</p></li></ul></div><p>The following code excerpt demonstrates how this might be done in a
  minimal command-line program.</p><pre class="codelisting prettyprint linenums lang-java">// Prompt for mail and password.
Console c = System.console();
if (c == null) {
    System.err.println("No console.");
    System.exit(1);
}

String mail = c.readLine("Email address: ");
char[] password = c.readPassword("Password: ");

// Search using mail address, and then bind with the DN and password.
final LDAPConnectionFactory factory = new LDAPConnectionFactory(host,
        port);
Connection connection = null;
try {
    connection = factory.getConnection();

    // No explicit bind yet so we remain anonymous for now.
    SearchResultEntry entry = connection.searchSingleEntry(baseDN,
            SearchScope.WHOLE_SUBTREE, "(mail=" + mail + ")", "cn");
    DN bindDN = entry.getName();
    connection.bind(bindDN.toString(), password);

    String cn = entry.getAttribute("cn").firstValueAsString();
    System.out.println("Hello, " + cn + "!");
} catch (final ErrorResultException e) {
    System.err.println("Failed to bind.");
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/SearchBind.html" target="_blank">SearchBind.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="basedn-and-scope"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.2.&nbsp;Setting Search Base &amp; Scope</h2></div></div></div><a class="indexterm" name="d247e1319"></a><a class="indexterm" name="d247e1324"></a><p>Directory servers organize entries somewhat like a file system.
  Directory data is often depicted as an upside-down tree.</p><div class="mediaobject" align="center" id="figure-ldap-tree"><a class="fancybox" href="images/ldap-tree.png"><img class="img-responsive center-block" data-toggle="tooltip" src="images/thumb_ldap-tree.png" align="middle" alt="Directory data is often depicted as an upside-down tree." title="This figure shows three levels, the base DN for the suffix, a couple&#xA;    of organizational units, and three user entries."></a></div><p>In the figure shown above, entries are represented by the relevant
  parts of their DNs. The entry with DN <code class="literal">dc=example,dc=com</code>
  is the base entry for a suffix. Under the base entry, you see two
  organizational units, one for people, <code class="literal">ou=People</code>, the other
  for groups, <code class="literal">ou=Groups</code>. The entries for people include
  those of Babs Jensen, Kirsten Vaughan, and Sam Carter.</p><p>When you are searching for a person's entry somewhere under
  <code class="literal">dc=example,dc=com</code>, you can start from
  <code class="literal">dc=example,dc=com</code>, from
  <code class="literal">ou=People,dc=example,dc=com</code>, or if you have enough
  information to pinpoint the user entry and only want to look up another
  attribute value for example, then directly from the entry such as
  <code class="literal">cn=Babs Jensen,ou=People,dc=example,dc=com</code>. The DN of
  the entry where you choose to start the search is the base DN for the
  search.</p><div class="itemizedlist"><p>When searching, you also define the scope. Scope defines what entries
   the server considers when checking for entries that match your search.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>For <code class="literal">SearchScope.BASE_OBJECT</code> the server considers
    only the base entry.</p><p>This is the scope you use if you know the full DN of the object
    that interests you. For example, if your base DN points to Babs Jensen's
    entry, <code class="literal">cn=Babs Jensen,ou=People,dc=example,dc=com</code>, and
    you want to read some of Babs's attributes, you would set scope to
    <code class="literal">SearchScope.BASE_OBJECT</code>.</p></li><li class="listitem"><p>For <code class="literal">SearchScope.SINGLE_LEVEL</code> the server considers
    all entries directly below the base entry.</p><p>You use this scope if for example you want to discover organizational
    units under <code class="literal">dc=example,dc=com</code>, or if you want to find
    people's entries and you know they are immediately under
    <code class="literal">ou=People,dc=example,dc=com</code>.</p></li><li class="listitem"><p>For <code class="literal">SearchScope.SUBORDINATES</code> the server considers
    all entries below the base entry.</p><p>This scope can be useful if you know that the base DN for your search
    is an entry that you do not want to match.</p></li><li class="listitem"><p>For <code class="literal">SearchScope.WHOLE_SUBTREE</code> (default) the server
    considers the base entry and all entries below.</p></li></ul></div><p>In addition to a base DN and scope, a search request also calls for a
  search filter.</p></div><div class="section" id="about-filters"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.3.&nbsp;Working With Search Filters</h2></div></div></div><a class="indexterm" name="d247e1414"></a><a class="indexterm" name="d247e1417"></a><p>When you look someone up in the telephone directory, you use the value
  of one attribute of a person's entry (last name), to recover the person's
  directory entry, which has other attributes (phone number, address). LDAP
  works the same way. In LDAP, search requests identify both the scope of the
  directory entries to consider (for example, all people or all organizations),
  and also the entries to retrieve based on some attribute value (for example,
  surname, mail address, phone number, or something else). The way you express
  the attribute value(s) to match is by using a search filter.</p><p>LDAP search filters define what entries actually match your request.
  For example, the following simple equality filter says, "Match all entries
  that have a surname attribute (sn) value equivalent to Jensen."</p><pre class="literallayout">(sn=Jensen)</pre><p>When you pass the directory server this filter as part of your search
  request, the directory server checks the entries in scope for your search to
  see whether they match.<a href="#ftn.d247e1430" class="footnote"><sup class="footnote" id="d247e1430">[7]</sup></a> If the directory server finds entries that match,
  it returns those entries as it finds them.</p><p>The example, <code class="literal">(sn=Jensen)</code>, shows a string
  representation of the search filter. The OpenDJ LDAP SDK lets you express
  your filters as strings, or as <code class="literal">Filter</code> objects. In both
  cases, the SDK translates the strings and objects into the binary
  representation sent to the server over the network.</p><p>Equality is just one of the types of comparisons available in LDAP
  filters. Comparison operators include the following.</p><div class="table" id="filter-operators"><div class="table-title">Table&nbsp;6.1.&nbsp;LDAP Filter Operators</div><div class="table-contents"><table xmlns:ng="http://docbook.org/docbook-ng" xmlns:db="http://docbook.org/ns/docbook" xmlns:exsl="http://exslt.org/common" xmlns:exslt="http://exslt.org/common" xmlns:doc="http://nwalsh.com/xsl/documentation/1.0" xmlns:stbl="http://nwalsh.com/xslt/ext/com.nwalsh.saxon.Table" xmlns:xtbl="xalan://com.nwalsh.xalan.Table" xmlns:lxslt="http://xml.apache.org/xslt" xmlns:ptbl="http://nwalsh.com/xslt/ext/xsltproc/python/Table" class="table table-striped" summary="LDAP Filter Operators" width="100%" border="0"><colgroup><col width="14%"><col width="43%"><col width="43%"></colgroup><thead><tr><th>Operator</th><th>Definition</th><th>Example</th></tr></thead><tbody><tr valign="top"><td valign="top"><code class="literal">=</code></td><td valign="top">
     <p>Equality comparison, as in <code class="literal">(sn=Jensen)</code>.</p>
     <p>This can also be used with substring matches. For example, to match
     last names starting with <code class="literal">Jen</code>, use the filter
     <code class="literal">(sn=Jen*)</code>. Substrings are more expensive for the
     directory server to index. Substring searches therefore might not be
     permitted for many attributes.</p>
    </td><td valign="top">
     <p><code class="literal">"(cn=My App)"</code> matches entries with common name
     <code class="literal">My App</code>.</p>
     <p><code class="literal">"(sn=Jen*)"</code> matches entries with surname starting
     with <code class="literal">Jen</code>.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">&lt;=</code></td><td valign="top">
     <p>Less than or equal to comparison, which works
     alphanumerically.</p>
    </td><td valign="top">
     <p><code class="literal">"(cn&lt;=App)"</code> matches entries with
     <code class="literal">commonName</code> up to those starting with App
     (case-insensitive) in alphabetical order.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">&gt;=</code></td><td valign="top">
     <p>Greater than or equal to comparison, which works
     alphanumerically.</p>
    </td><td valign="top">
     <p><code class="literal">"(uidNumber&gt;=1151)"</code> matches entries with
     <code class="literal">uidNumber</code> greater than 1151.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">=*</code></td><td valign="top">
     <p>Presence comparison. For example, to match all entries having a
     <code class="literal">userPassword</code>, use the filter
     <code class="literal">(userPassword=*)</code>.</p>
    </td><td valign="top">
     <p><code class="literal">"(member=*)"</code> matches entries with a
     <code class="literal">member</code> attribute.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">~=</code></td><td valign="top">
     <p>Approximate comparison, matching attribute values similar to the
     value you specify.</p>
    </td><td valign="top">
     <p><code class="literal">"(sn~=jansen)"</code> matches entries with a surname
     that sounds similar to <code class="literal">Jansen</code> (Johnson, Jensen, and
     so forth).</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">[:dn][:<em class="replaceable"><code>oid</code></em>]:=</code></td><td valign="top">
     <p>Extensible match comparison.</p>
     <div class="itemizedlist"><p>At the end of the OID or language subtype, you further specify the
      matching rule as follows:</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Add <code class="literal">.1</code> for less than</p></li><li class="listitem"><p>Add <code class="literal">.2</code> for less than or equal to</p></li><li class="listitem"><p>Add <code class="literal">.3</code> for equal to (default)</p></li><li class="listitem"><p>Add <code class="literal">.4</code> for greater than or equal to</p></li><li class="listitem"><p>Add <code class="literal">.5</code> for greater than</p></li><li class="listitem"><p>Add <code class="literal">.6</code> for substring</p></li></ul></div>
    </td><td valign="top">
     <p><code class="literal">(uid:dn:=bjensen)</code> matches entries where
     <code class="literal">uid</code> having the value <code class="literal">bjensen</code> is
     a component of the entry DN.</p>
     <p><code class="literal">(lastLoginTime: 1.3.6.1.4.1.26027.1.4.5:=-13w)</code>
     matches entries with a last login time more recent than 13 weeks.</p>
     <p>You also use extensible match filters with localized values.
     Directory servers like OpenDJ support a variety of internationalized
     locales, each of which has an OID for collation order, such as
     <code class="literal">1.3.6.1.4.1.42.2.27.9.4.76.1</code> for French. OpenDJ also
     lets you use the language subtype, such as <code class="literal">fr</code>, instead
     of the OID.</p>
     <p><code class="literal">"(cn:dn:=My App)"</code> matches entries who have
     <code class="literal">My App</code> as the common name and also as the value of a
     DN component.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">!</code></td><td valign="top">
     <p>NOT operator, to find entries that do not match the specified filter
     component.</p>
     <p>Take care to limit your search when using <code class="literal">!</code> to
     avoid matching so many entries that the server treats your search as
     unindexed.</p>
    </td><td valign="top">
     <p><code class="literal">'!(objectclass=person)'</code> matches non-person
     entries.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">&amp;</code></td><td valign="top">
     <p>AND operator, to find entries that match all specified filter
     components.</p>
    </td><td valign="top">
     <p><code class="literal">'(&amp;(l=Cupertino)(!(uid=bjensen)))'</code> matches
     entries for users in Cupertino other than the user with ID
     <code class="literal">bjensen</code>.</p>
    </td></tr><tr valign="top"><td valign="top"><code class="literal">|</code></td><td valign="top">
     <p>OR operator, to find entries that match one of the specified filter
     components.</p>
    </td><td valign="top">
     <p><code class="literal">"|(sn=Jensen)(sn=Johnson)"</code> matches entries with
     surname Jensen or surname Johnson.</p>
    </td></tr></tbody></table></div></div><br class="table-break"><p>When taking user input, take care to protect against users providing
  input that has unintended consequences. OpenDJ SDK offers several Filter
  methods to help you. First, you can use strongly typed construction methods
  such as <code class="literal">Filter.equality()</code>.</p><pre class="codelisting prettyprint linenums lang-java">String userInput = getUserInput();
Filter filter = Filter.equality("cn", userInput);

// Invoking filter.toString() with input of "*" results in a filter
// string "(cn=\2A)".</pre><p>You can also let the SDK escape user input by using a template with
  <code class="literal">Filter.format()</code> as in the following example.</p><pre class="codelisting prettyprint linenums lang-java">String template = "(|(cn=%s)(uid=user.%s))";
String[] userInput = getUserInput();
Filter filter = Filter.format(template, userInput[0], userInput[1]);</pre><p>Finally, you can explicitly escape user input with
  <code class="literal">Filter.escapeAssertionValue()</code>.</p><pre class="codelisting prettyprint linenums lang-java">String baseDN = "ou=people,dc=example,dc=com";
String userInput = getUserInput();

// Filter.escapeAssertionValue() transforms user input of "*" to "\2A".
SearchRequest request = Requests.newSearchRequest(
        baseDN, SearchScope.WHOLE_SUBTREE,
        "(cn=" + Filter.escapeAssertionValue(userInput) + "*)", "cn", "mail");</pre></div><div class="section" id="send-search-request"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.4.&nbsp;Sending a Search Request</h2></div></div></div><a class="indexterm" name="d247e1750"></a><a class="indexterm" name="d247e1755"></a><p>As shown in the following excerpt with a synchronous connection, you
  get a <code class="literal">Connection</code> to the directory server from an
  <code class="literal">LDAPConnectionFactory</code>.</p><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host,
        port);
Connection connection = null;
try {
    connection = factory.getConnection();

    // Do something with the connection...
} catch (Exception e) {
    // Handle exceptions...
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre><p>The <code class="literal">Connection</code> gives you <code class="literal">search()</code>
  methods that either take parameters in the style of the
  <span class="command"><strong>ldapsearch</strong></span> command, or that take a
  <code class="literal">SearchRequest</code> object. If you are sure that the search only
  returns a single entry, you can read the entry with the
  <code class="literal">searchSingleEntry()</code> methods. If you have the distinguished
  name, you can use <code class="literal">readEntry()</code> directly.</p><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Search.html" target="_blank">Search.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="get-search-results"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.5.&nbsp;Getting Search Results</h2></div></div></div><a class="indexterm" name="d247e1799"></a><p>Depending on the method you use to search, you handle results in
  different ways.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You can get a <code class="literal">ConnectionEntryReader</code>, and iterate
    over the reader to access individual search results.</p><pre class="codelisting prettyprint linenums lang-java">Connection connection = ...;
ConnectionEntryReader reader = connection.search("dc=example,dc=com",
    SearchScope.WHOLE_SUBTREE, "(objectClass=person)");
try
{
  while (reader.hasNext())
  {
    if (reader.isEntry())
    {
      SearchResultEntry entry = reader.readEntry();

      // Handle entry...
    }
    else
    {
      SearchResultReference ref = reader.readReference();

      // Handle continuation reference...
    }
  }
}
catch (IOException e)
{
  // Handle exceptions...
}
finally
{
  reader.close();
}</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Search.html" target="_blank">Search.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></li><li class="listitem"><p>You can pass in a collection of <code class="literal">SearchResultEntry</code>s
    (and optionally a collection of <code class="literal">SearchResultReference</code>s)
    to which the SDK adds the results. For this to work, you need enough
    memory to hold everything the search returns.</p></li><li class="listitem"><p>You can pass in a <code class="literal">SearchResultHandler</code> to manage
    results.</p></li><li class="listitem"><p>With <code class="literal">searchSingleEntry()</code> and
    <code class="literal">readEntry()</code>, you can get a single
    <code class="literal">SearchResultEntry</code> with methods to access the entry
    content.</p></li></ul></div></div><div class="section" id="handle-entry-attributes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.6.&nbsp;Working With Entry Attributes</h2></div></div></div><a class="indexterm" name="d247e1853"></a><p>When you get an entry object, chances are you want to handle attribute
  values as objects. The OpenDJ LDAP SDK provides the
  <code class="literal">Entry.parseAttribute()</code> method and an
  <code class="literal">AttributeParser</code> with methods for a variety of attribute
  value types. You can use these methods to get attribute values as
  objects.</p><pre class="codelisting prettyprint linenums lang-java">
// Use Kirsten Vaughan's credentials and her entry.
String name = "uid=kvaughan,ou=People,dc=example,dc=com";
char[] password = "bribery".toCharArray();
connection.bind(name, password);

// Make sure we have a timestamp to play with.
updateEntry(connection, name, "description");

// Read Kirsten's entry.
final SearchResultEntry entry = connection.readEntry(name,
        "cn", "objectClass", "hasSubordinates", "numSubordinates",
        "isMemberOf", "modifyTimestamp");

// Get the entry DN and some attribute values as objects.
DN dn = entry.getName();

Set&lt;String&gt; cn = entry.parseAttribute("cn").asSetOfString("");
Set&lt;AttributeDescription&gt; objectClasses =
        entry.parseAttribute("objectClass").asSetOfAttributeDescription();
boolean hasChildren = entry.parseAttribute("hasSubordinates").asBoolean();
int numChildren = entry.parseAttribute("numSubordinates").asInteger(0);
Set&lt;DN&gt; groups = entry
        .parseAttribute("isMemberOf")
        .usingSchema(Schema.getDefaultSchema()).asSetOfDN();
Calendar timestamp = entry
        .parseAttribute("modifyTimestamp")
        .asGeneralizedTime().toCalendar();

// Do something with the objects.
// ...
</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/ParseAttributes.html" target="_blank">ParseAttributes.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p></div><div class="section" id="handle-ldap-urls"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.7.&nbsp;Working With LDAP URLs</h2></div></div></div><a class="indexterm" name="d247e1877"></a><a class="indexterm" name="d247e1882"></a><p>LDAP URLs express search requests in URL form. In the directory data
  you can find them used as <code class="literal">memberURL</code>
  attribute values for dynamic groups, for example. The following URL from the
  configuration for the administrative backend lets the directory server build
  a dynamic group of administrator entries that are children of
  <code class="literal">cn=Administrators,cn=admin data</code>.</p><pre class="literallayout">ldap:///cn=Administrators,cn=admin data??one?(objectclass=*)</pre><p>The static method <code class="literal">LDAPUrl.valueOf()</code> takes an LDAP
  URL string and returns an <code class="literal">LDAPUrl</code> object. You can then use
  the <code class="literal">LDAPUrl.asSearchRequest()</code> method to get the
  <code class="literal">SearchRequest</code> that you pass to one of the search methods
  for the connection.</p></div><div class="section" id="sort-search-results"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.8.&nbsp;Sorting Search Results</h2></div></div></div><a class="indexterm" name="d247e1912"></a><a class="indexterm" name="d247e1917"></a><p>If you want to sort search results in your client application, then
  make sure you have enough memory in the JVM to hold the results of the search,
  and use one of the search methods that lets you pass in a collection of
  <code class="literal">SearchResultEntry</code>s. After the collection is populated with
  the results, you can sort them.</p><p>If you are on good terms with your directory administrator, you can
  perhaps use a server-side sort control. The server-side sort request control
  asks the server to sort the results before returning them, and so is a
  memory intensive operation on the directory server. You set up the control
  using <code class="literal">ServerSideSortRequestControl.newControl()</code>. You get
  the control into your search by building a search request to pass to the
  search method, using <code class="literal">SearchRequest.addControl()</code> to attach
  the control before passing in the request.</p><p>If your application needs to scroll through search results a page at
  a time, work with your directory administrator to set up the virtual list
  view indexes that facilitate scrolling through results.</p></div><div class="section" id="about-comparisons"><div class="titlepage"><div><div><h2 class="title" style="clear: both">6.9.&nbsp;About Comparing</h2></div></div></div><a class="indexterm" name="d247e1938"></a><p>You use the LDAP compare operation to make an assertion about an
  attribute value on an entry. Unlike the search operation, you must know
  the distinguished name of the entry in advance to request a compare operation.
  You also specify the attribute type name and the value to compare to the
  values stored on the entry.</p><p><code class="literal">Connection</code> has a choice of compare methods,
  depending on how you set up the operation.</p><p>Check the <code class="literal">ResultCode</code> from
  <code class="literal">CompareResult.getResultCode()</code> for
  <code class="literal">ResultCode.COMPARE_TRUE</code> or
  <code class="literal">ResultCode.COMPARE_FALSE</code>.</p></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d247e1430" class="footnote"><p><a href="#d247e1430" class="para"><sup class="para">[7] </sup></a>In fact, the directory server probably
  checks an index first, and might not even accept search requests unless it
  can use indexes to match your filter rather than checking all entries in
  scope.</p></div></div></div><div lang="en" class="chapter" id="chap-getting-directory-info"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;7.&nbsp;Getting Information About the Directory Service</h1></div></div></div><p>LDAP directories expose what their capabilities through the root
 DSE. They also expose their schema definitions, which define the sort of
 entries and attributes can be stored in a directory, over protocol. OpenDJ
 SDK allows you to look up that information in your client application.</p><div class="section" id="read-root-dse"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.1.&nbsp;Reading Root DSEs</h2></div></div></div><a class="indexterm" name="d247e1970"></a><a class="indexterm" name="d247e1975"></a><p>The directory entry with distinguished name <code class="literal">""</code> (empty
  string) is called the <em class="firstterm">root DSE</em>. DSE stands for
  DSA-Specific Entry. DSA stands for Directory Server Agent, a single
  directory server.</p><p>The root DSE serves to expose information over LDAP about what the
  directory server supports in terms of LDAP controls, auth password schemes,
  SASL mechanisms, LDAP protocol versions, naming contexts, features, LDAP
  extended operations, and so forth. The root DSE holds all the information
  as values of LDAP attributes. OpenDJ defines these attributes as operational.
  In other words, OpenDJ only returns the attributes if you either request
  them specifically, or request all operational attributes.</p><p>To access the list of what an OpenDJ server supports, for example,
  get all operational attributes from the root DSE entry as in the following
  excerpt.</p><pre class="codelisting prettyprint linenums lang-java">
final LDAPConnectionFactory factory = new LDAPConnectionFactory(
  host, port);
Connection connection = null;

try
{
  connection = factory.getConnection();

  // Perform an anonymous search on the root DSE.
  final SearchResultEntry entry = connection.searchSingleEntry(
      "",                         // DN is "" for root DSE.
      SearchScope.BASE_OBJECT,    // Read only the root DSE.
      "objectclass=*",            // Every object matches this filter.
      "+");                       // Return all operational attributes.

  final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
  writer.writeComment("Root DSE for LDAP server at " + host + ":" + port);
  if (entry != null) writer.writeEntry(entry);
  writer.flush();
}</pre><p>For a complete example in context, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/GetInfo.html" target="_blank">GetInfo.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><p>Notice that by default you can access the root DSE after authenticating
  anonymously. When you look at the entry in LDIF, you see that supported
  capabilities are generally identified by object identifier (OID).</p><pre class="cmdline prettyprint"># Root DSE for LDAP server at localhost:1389
dn: 
supportedControl: 1.2.826.0.1.3344810.2.3
supportedControl: 1.2.840.113556.1.4.1413
supportedControl: 1.2.840.113556.1.4.319
supportedControl: 1.2.840.113556.1.4.473
supportedControl: 1.2.840.113556.1.4.805
supportedControl: 1.3.6.1.1.12
supportedControl: 1.3.6.1.1.13.1
supportedControl: 1.3.6.1.1.13.2
supportedControl: 1.3.6.1.4.1.26027.1.5.2
supportedControl: 1.3.6.1.4.1.42.2.27.8.5.1
supportedControl: 1.3.6.1.4.1.42.2.27.9.5.2
supportedControl: 1.3.6.1.4.1.42.2.27.9.5.8
supportedControl: 1.3.6.1.4.1.4203.1.10.1
supportedControl: 1.3.6.1.4.1.4203.1.10.2
supportedControl: 1.3.6.1.4.1.7628.5.101.1
supportedControl: 2.16.840.1.113730.3.4.12
supportedControl: 2.16.840.1.113730.3.4.16
supportedControl: 2.16.840.1.113730.3.4.17
supportedControl: 2.16.840.1.113730.3.4.18
supportedControl: 2.16.840.1.113730.3.4.19
supportedControl: 2.16.840.1.113730.3.4.2
supportedControl: 2.16.840.1.113730.3.4.3
supportedControl: 2.16.840.1.113730.3.4.4
supportedControl: 2.16.840.1.113730.3.4.5
supportedControl: 2.16.840.1.113730.3.4.9
supportedAuthPasswordSchemes: MD5
supportedAuthPasswordSchemes: SHA1
supportedAuthPasswordSchemes: SHA256
supportedAuthPasswordSchemes: SHA512
supportedAuthPasswordSchemes: SHA384
supportedSASLMechanisms: PLAIN
supportedSASLMechanisms: EXTERNAL
supportedSASLMechanisms: DIGEST-MD5
supportedSASLMechanisms: CRAM-MD5
supportedLDAPVersion: 2
supportedLDAPVersion: 3
etag: 00000000e9155ba0
pwdPolicySubentry: cn=Default Password Policy,cn=Password Policies,cn=config
supportedFeatures: 1.3.6.1.1.14
supportedFeatures: 1.3.6.1.4.1.4203.1.5.1
supportedFeatures: 1.3.6.1.4.1.4203.1.5.2
supportedFeatures: 1.3.6.1.4.1.4203.1.5.3
subschemaSubentry: cn=schema
changelog: cn=changelog
supportedTLSCiphers: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_RSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
supportedTLSCiphers: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_RSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_DHE_RSA_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_DHE_DSS_WITH_AES_128_CBC_SHA
supportedTLSCiphers: TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
supportedTLSCiphers: TLS_ECDHE_RSA_WITH_RC4_128_SHA
supportedTLSCiphers: SSL_RSA_WITH_RC4_128_SHA
supportedTLSCiphers: TLS_ECDH_ECDSA_WITH_RC4_128_SHA
supportedTLSCiphers: TLS_ECDH_RSA_WITH_RC4_128_SHA
supportedTLSCiphers: TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: SSL_RSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
supportedTLSCiphers: SSL_RSA_WITH_RC4_128_MD5
supportedTLSCiphers: TLS_EMPTY_RENEGOTIATION_INFO_SCSV
ds-private-naming-contexts: cn=admin data
ds-private-naming-contexts: cn=ads-truststore
ds-private-naming-contexts: cn=backups
ds-private-naming-contexts: cn=config
ds-private-naming-contexts: cn=monitor
ds-private-naming-contexts: cn=schema
ds-private-naming-contexts: cn=tasks
ds-private-naming-contexts: dc=replicationChanges
supportedTLSProtocols: SSLv2Hello
supportedTLSProtocols: SSLv3
supportedTLSProtocols: TLSv1
supportedTLSProtocols: TLSv1.1
supportedTLSProtocols: TLSv1.2
numSubordinates: 1
namingContexts: dc=example,dc=com
structuralObjectClass: ds-root-dse
lastExternalChangelogCookie: 
lastChangeNumber: 0
firstChangeNumber: 0
supportedExtension: 1.3.6.1.1.8
supportedExtension: 1.3.6.1.4.1.26027.1.6.1
supportedExtension: 1.3.6.1.4.1.26027.1.6.2
supportedExtension: 1.3.6.1.4.1.26027.1.6.3
supportedExtension: 1.3.6.1.4.1.4203.1.11.1
supportedExtension: 1.3.6.1.4.1.1466.20037
supportedExtension: 1.3.6.1.4.1.4203.1.11.3
vendorName: ForgeRock AS.
vendorVersion: OpenDJ 2.5.0
hasSubordinates: true
entryDN: 
entryUUID: d41d8cd9-8f00-3204-a980-0998ecf8427e
</pre><p>Three key pieces of information in the entry shown above are attribute
  values for <code class="literal">namingContexts</code> (showing the base DNs under
  which your application can look for user data),
  <code class="literal">subschemaSubentry</code> (indicating where the LDAP schema are
  stored), and <code class="literal">supportedLDAPVersion</code> (with OpenDJ seen to
  support both LDAPv2 and LDAPv3).</p></div><div class="section" id="check-ldapv3-support"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.2.&nbsp;Checking For LDAPv3 Support</h2></div></div></div><p>As shown in the previous section, you can check that the root DSE
  attribute <code class="literal">supportedLDAPVersion</code> has a value of 3.</p><p>LDAPv3 has been available since 1997. Client applications built with
  OpenDJ SDK use LDAPv3.</p></div><div class="section" id="get-schema-information"><div class="titlepage"><div><div><h2 class="title" style="clear: both">7.3.&nbsp;Getting Schema Information</h2></div></div></div><a class="indexterm" name="d247e2030"></a><p>The root DSE attribute <code class="literal">subschemaSubentry</code> shows
  the DN of the entry holding LDAP schema definitions. LDAP schema defines the
  object classes, attributes types, attribute value syntaxes, matching rules
  and so on that constrain entries held by the LDAP server.</p><p>The <code class="literal">org.forgerock.opendj.ldap.schema</code> package
  is devoted to constructing and querying LDAP schemas. The
  <code class="literal">Schema</code> class for example lets you
  <code class="literal">readSchemaForEntry()</code> to get the relevant schema from the
  subschema subentry, and then <code class="literal">validateEntry()</code> to check
  an entry your application has constructed before sending the entry to the
  server.</p></div></div><div lang="en" class="chapter" id="chap-writing"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;8.&nbsp;Updating Directory Data</h1></div></div></div><p>Modern directory servers like OpenDJ can handle a high load of write
 requests, replicating changes quickly both on the LAN and over the WAN.</p><p>For a complete example corresponding to the excerpts shown below, see
 <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/ShortLife.html" target="_blank">ShortLife.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><div class="section" id="about-writes"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.1.&nbsp;About Add, Modify, Rename, &amp; Delete</h2></div></div></div><p>The four basic CRUD operations &#8212; create, read, update, and delete
  &#8212; correspond to the LDAP operations add, search, modify (or modify DN),
  and delete.<a href="#ftn.d247e2073" class="footnote"><sup class="footnote" id="d247e2073">[8]</sup></a></p><a class="indexterm" name="d247e2076"></a><a class="indexterm" name="d247e2079"></a><a class="indexterm" name="d247e2082"></a><a class="indexterm" name="d247e2085"></a><a class="indexterm" name="d247e2088"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>An add request is used to create a new entry in an LDAP directory.
    The entry must have a unique distinguished name that belongs under a base
    DN served by the directory. The entry must have a list of attributes that
    are valid according to the directory schema.</p></li><li class="listitem"><p>Search requests are described in the chapter on <a href="../dev-guide/index.html#chap-reading" class="link"><em class="citetitle">Searching &amp;
    Comparing Directory Data</em></a>.</p></li><li class="listitem"><p>A modify request is used to add, delete, or replace attribute values
    on an entry in an LDAP directory. The resulting entry must be valid
    according to the directory schema.</p><p>A modify DN request is used to rename or move a directory entry.
    In both cases the distinguished name changes. Renaming involves changing
    the relative distinguished name, for example from
    <code class="literal">cn=Bob,ou=People,dc=example,dc=com</code> to
    <code class="literal">cn=Ted,ou=People,dc=example,dc=com</code>. Moving
    involves changing the container where the entry is found, for example from
    <code class="literal">cn=Barbara Jensen,ou=People,dc=Old Company,dc=com</code> to
    <code class="literal">cn=Barbara Jensen,ou=People,dc=New Company,dc=com</code>.</p><p>Although they are both considered modify DN operations, renaming a
    leaf entry is generally much simpler than moving a container entry that has
    child entries. Not all modify DN operations mobilize equivalent resources
    on the directory server.</p></li><li class="listitem"><p>A delete request is used to remove an entry from an LDAP
    directory.</p><p>Directory servers can restrict deletes to leaf entries, so that you
    cannot remove an entry that has other child entries. For example, you have
    to delete <code class="literal">uid=bjensen,ou=People,dc=example,dc=com</code> and
    other peer entries before you delete
    <code class="literal">ou=People,dc=example,dc=com</code> unless you send a subtree
    delete request control.</p></li></ul></div><p>As a rule, your client application must be authorized to create,
  update, and delete directory data. Therefore to prepare to change directory
  data, you first get a connection, and then bind on that connection as a
  user who is authorized to make the changes you plan to request.</p></div><div class="section" id="adding-entries"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.2.&nbsp;Adding Directory Entries</h2></div></div></div><a class="indexterm" name="d247e2137"></a><p>The <code class="literal">Connection.add()</code> methods let you provide the
  entry to add as an <code class="literal">AddRequest</code>, an <code class="literal">Entry</code>,
  or as LDIF. If the changes to make are already expressed in LDIF, then
  you can also use <code class="literal">ChangeRecordReader</code>s,
  <code class="literal">ChangeRecord</code>s, and <code class="literal">ChangeRecordWriter</code>s
  to handle the changes.</p><p>The following excerpt demonstrates how to add a simple user entry under
  <code class="literal">ou=People,dc=example,dc=com</code>.</p><pre class="codelisting prettyprint linenums lang-java">// An entry to add to the directory
Entry entry = new LinkedHashMapEntry("cn=Bob,ou=People,dc=example,dc=com")
    .addAttribute("cn", "Bob")
    .addAttribute("objectclass", "top")
    .addAttribute("objectclass", "person")
    .addAttribute("objectclass", "organizationalPerson")
    .addAttribute("objectclass", "inetOrgPerson")
    .addAttribute("mail", "subgenius@example.com")
    .addAttribute("sn", "Dobbs");

final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();
    // Bind as a user who has the right to add entries.
    connection.bind(adminDN, adminPwd);

    connection.add(entry);

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre></div><div class="section" id="modifying-attr-values"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.3.&nbsp;Modifying Directory Entry Attribute Values</h2></div></div></div><a class="indexterm" name="d247e2170"></a><p>The <code class="literal">Connection.modify()</code> methods let you add, replace,
  and delete attributes values on an entry. Either the modifications are
  expressed in LDIF, or you build a <code class="literal">ModifyRequest</code> to
  express the changes.</p><p>The following excerpt demonstrates how to replace one attribute value
  and to add another.</p><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();
    // Bind as a user who has the right to modify entries.
    connection.bind(adminDN, adminPwd);

    // Here, entry is a user entry with DN cn=Bob,ou=People,dc=example,dc=com.
    Entry old = TreeMapEntry.deepCopyOfEntry(entry);
    entry = entry.replaceAttribute("mail", "spammer@example.com")
            .addAttribute("description", "I see the fnords.");
    ModifyRequest request = Entries.diffEntries(old, entry);

    connection.modify(request);

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre></div><div class="section" id="renaming-entries"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.4.&nbsp;Renaming Directory Entries</h2></div></div></div><a class="indexterm" name="d247e2188"></a><p>The <code class="literal">Connection.modifyDN()</code> methods serve to rename
  entries and to move them around.</p><p>The following excerpt demonstrates how to rename an entry.</p><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();
    // Bind as a user who has the right to rename entries.
    connection.bind(adminDN, adminPwd);

    // Here, entryDN contains cn=Bob,ou=People,dc=example,dc=com.
    // The second argument is the new relative distinguished name.
    connection.modifyDN(entryDN, "cn=Ted");

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre><p>If you must move rather than rename entries, have a look at the methods
  for <code class="literal">ModifyDNRequest</code>. You can get a new request by using
  <code class="literal">Requests</code> static methods.</p></div><div class="section" id="deleting-entries"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.5.&nbsp;Deleting Directory Entries</h2></div></div></div><a class="indexterm" name="d247e2211"></a><p>The following excerpt demonstrates how to delete an entry with DN
  <code class="literal">cn=Ted,ou=People,dc=example,dc=com</code>.</p><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();
    // Bind as a user who has the right to delete entries.
    connection.bind(adminDN, adminPwd);

    connection.delete("cn=Ted,ou=People,dc=example,dc=com");

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre><p>If you must delete an entire branch of entries instead of a single
  leaf entry, build a <code class="literal">DeleteRequest</code> that includes the
  <code class="literal">SubtreeDeleteRequestControl</code>, as described in the
  section, <a href="../dev-guide/index.html#use-subtree-delete-control" class="link"><em class="citetitle">Subtree Delete
  Request Control</em></a>.</p></div><div class="section" id="updating-static-groups"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.6.&nbsp;Updating Static Groups</h2></div></div></div><a class="indexterm" name="d247e2236"></a><p>Static groups enumerate user entries. Static groups can grow large.
  For an example, see the group entry at the end of <a class="link" href="http://opendj.forgerock.org/big-group.ldif" target="_blank">big-group.ldif</a>:</p><pre class="codelisting prettyprint">dn: cn=Static,ou=Groups,dc=example,dc=com
objectClass: top
objectClass: groupofnames
cn: Static
member: uid=user.0,ou=People,dc=example,dc=com
member: uid=user.1,ou=People,dc=example,dc=com
member: uid=user.2,ou=People,dc=example,dc=com
...
member: uid=user.10000,ou=People,dc=example,dc=com</pre><p>To update a static group, you either add members or remove members.
  For sample code, see <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/UpdateGroup.html" target="_blank">UpdateGroup.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><p>The <code class="literal">UpdateGroup</code> example checks that the directory
  server supports the Permissive Modify control. With directory servers such
  as OpenDJ that support the LDAP Permissive Modify control, you can use the
  control to avoid having to determine whether a given member is already in the
  group before performing the operation. Instead you can simply request an
  add or a delete modification for the member.</p><div class="example" id="update-group-with-permissive-modify"><div class="example-title">Example&nbsp;8.1.&nbsp;Updating a Group With Permissive Modify</div><div class="example-contents"><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();

    Collection&lt;String&gt; controls =
            RootDSE.readRootDSE(connection).getSupportedControls();

    final String user = "cn=Directory Manager";
    final char[] password = "password".toCharArray();
    connection.bind(user, password);

    if (controls.contains(PermissiveModifyRequestControl.OID)) {

        final ModifyRequest request = Requests.newModifyRequest(groupDN)
                .addControl(PermissiveModifyRequestControl.newControl(true))
                .addModification(modType, "member", memberDN);
        connection.modify(request);

    } else {

        /* ... */

    }

    String op = (modType == ModificationType.ADD) ? "added to" : "deleted from";
    System.out.println("The entry with DN " + memberDN + " has been "
            + op + " the group with DN " + groupDN + ".");

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre></div></div><br class="example-break"><p>If the directory server does not support the Permissive Modify control,
  then the example checks whether the member is present in the group by using
  an LDAP compare operation. If a member to be added does not yet belong to the
  group, the example requests an add modification. If a member to be deleted
  does belong to the group, the example requests a delete modification.</p><div class="example" id="update-group-with-compare-and-modify"><div class="example-title">Example&nbsp;8.2.&nbsp;Updating a Group With Compare &amp; Modify</div><div class="example-contents"><pre class="codelisting prettyprint linenums lang-java">final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;
try {
    connection = factory.getConnection();

    Collection&lt;String&gt; controls =
            RootDSE.readRootDSE(connection).getSupportedControls();

    final String user = "cn=Directory Manager";
    final char[] password = "password".toCharArray();
    connection.bind(user, password);

    if (controls.contains(PermissiveModifyRequestControl.OID)) {

        /* ... */

    } else {

        System.out.println("Checking whether the entry with DN "
                + memberDN + " belongs to the group with DN " + groupDN
                + "...");
        final CompareRequest request =
                Requests.newCompareRequest(groupDN, "member", memberDN);
        CompareResult result = connection.compare(request);

        if (modType == ModificationType.ADD) {
            if (result.getResultCode() == ResultCode.COMPARE_FALSE) {
                System.out.println("Member does not yet belong to group."
                        + " Adding it...");
                final ModifyRequest addMember =
                        Requests.newModifyRequest(groupDN)
                            .addModification(modType, "member", memberDN);
                connection.modify(addMember);
            }
        }

        if (modType == ModificationType.DELETE) {
            if (result.getResultCode() == ResultCode.COMPARE_TRUE) {
                System.out.println("Member belongs to group."
                        + " Removing it...");
                final ModifyRequest delMember =
                        Requests.newModifyRequest(groupDN)
                            .addModification(modType, "member", memberDN);
                connection.modify(delMember);
            }
        }

    }

    String op = (modType == ModificationType.ADD) ? "added to" : "deleted from";
    System.out.println("The entry with DN " + memberDN + " has been "
            + op + " the group with DN " + groupDN + ".");

} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre><p>You can change multiple member values with a single modification. The
   final argument of this form of the
   <code class="literal">ModifyRequest.addModification()</code> method takes a series
   of one or more values. So if you have multiple group members to add or
   delete, you can loop over your list to perform compare individual compare
   requests, then construct a single modify request to add or delete the
   group members. In other words, if you have three members to add, you can
   list the three member DNs as arguments of
   <code class="literal">addModification</code>.</p><pre class="codelisting prettyprint linenums lang-java">String member1 = "uid=user1,ou=people,dc=example,dc=com";
String member2 = "uid=user1,ou=people,dc=example,dc=com";
String member3 = "uid=user1,ou=people,dc=example,dc=com";
final ModifyRequest addMember =
    Requests.newModifyRequest(groupDN)
        .addModification(modType, "member", member1, member2, member3);
connection.modify(addMember);</pre></div></div><br class="example-break"><p>To try the example, download and import
  <code class="filename">big-group.ldif</code> into your directory server, and then
  run the sample. For example, if OpenDJ is set up to with directory manager
  as <code class="literal">cn=Directory Manager</code>, password
  <code class="literal">password</code> listening on <code class="literal">localhost</code> port
  <code class="literal">1389</code>, and you run the example with arguments
  <code class="literal">localhost 1389 cn=Static,ou=Groups,dc=example,dc=com
  uid=user.5150,ou=People,dc=example,dc=com del</code>, the resulting output
  is <code class="literal">The entry with DN uid=user.5150,ou=People,dc=example,dc=com has
  been deleted from the group with DN
  cn=Static,ou=Groups,dc=example,dc=com.</code>.</p></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d247e2073" class="footnote"><p><a href="#d247e2073" class="para"><sup class="para">[8] </sup></a>The LDAP bind operation can potentially result in
  an update. Some directory servers can be configured to write time stamps in
  order to track successful or failed binds for password policy reasons.</p></div></div></div><div lang="en" class="chapter" id="chap-ldif"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;9.&nbsp;Working With LDIF</h1></div></div></div><p>OpenDJ LDAP SDK provides capabilities for working with <a class="link" href="http://tools.ietf.org/html/rfc2849" target="_blank">LDAP Data
 Interchange Format</a> (LDIF) content. This chapter demonstrates how to use
 those capabilities.</p><div class="section" id="about-ldif"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.1.&nbsp;About LDIF</h2></div></div></div><a class="indexterm" name="d247e2320"></a><p>LDAP Data Interchange Format provides a mechanism to represent
  directory data in text format. LDIF data is typically used to initialize
  directory databases, but also may be used to move data between different
  directories that cannot replicate directly, or even as an alternative
  backup format. When you read OpenDJ's external change log, you get changes
  expressed in LDIF.</p><p>LDIF uses base64 encoding to store values that are not safe for use in
  a text file, including values that represent binary objects like JPEG photos
  and X509 certificates, but also values that hold bits of LDIF, and values that
  end in white space. The description in the following LDIF holds, "Space at
  the end of the line " for example. Notice that continuation lines shown in
  the excerpt of the JPEG photo value start with spaces.</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
description:: U3BhY2UgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSA=
uid: bjensen
jpegPhoto:: /9j/4AAQSkZJRgABAQEASABIAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABt
 bnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tY
 AAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB
 ...
 Pxv8A8lh8J/8AXUfzr1qP/WSfWlzPlsZSi3VHqMA/WinUVB0n/9k=
facsimileTelephoneNumber: +1 408 555 1992
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: top
givenName: Barbara
cn: Barbara Jensen
cn: Babs Jensen
telephoneNumber: +1 408 555 1862
sn: Jensen
roomNumber: 0209
homeDirectory: /home/bjensen
ou: Product Development
ou: People
l: Cupertino
mail: bjensen@example.com
uidNumber: 1076
gidNumber: 1000
</pre><p>LDIF can serve to describe not only entries with their attributes but
  also changes to entries. For example, you can express adding a JPEG photo
  to Babs Jensen's entry as follows.</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=people,dc=example,dc=com
changetype: modify
add: jpegPhoto
jpegPhoto:&lt; file:///tmp/opendj-logo.jpg
</pre><p>You can also replace and delete attribute values. Notice the dash,
  <code class="literal">-</code>, used to separate changes.</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=people,dc=example,dc=com
changetype: modify
replace: roomNumber
roomNumber: 1234
-
delete: description
-
delete: jpegPhoto
</pre><p>LDIF also allows <code class="literal">changetype</code>s of
  <code class="literal">add</code> to create entries, <code class="literal">delete</code> to
  remove entries, and <code class="literal">modrdn</code> to rename entries.</p><p>For more examples, see the LDIF specification, <a class="link" href="http://tools.ietf.org/html/rfc2849" target="_blank">RFC 2849</a>.</p></div><div class="section" id="reading-ldif"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.2.&nbsp;Reading LDIF</h2></div></div></div><a class="indexterm" name="d247e2362"></a><p>OpenDJ LDAP SDK provides <code class="literal">ChangeRecordReader</code>s to
  read requests to modify directory data, and <code class="literal">EntryReader</code>s
  to read entries from a data source such as a file or other source. Both of
  these are interfaces.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <code class="literal">ConnectionEntryReader</code> class offers methods
    to iterate through entries and references returned by a search.</p></li><li class="listitem"><p>The <code class="literal">LDIFChangeRecordReader</code> and
    <code class="literal">LDIFEntryReader</code> classes offer methods to handle LDIF as
    strings or from an input stream.</p><p>Both classes give you some methods to filter content. You can also
    use the <code class="literal">LDIF</code> static methods to filter content.</p></li></ul></div><p>The following short excerpt shows a reader that takes LDIF change
  records from standard input.</p><pre class="codelisting prettyprint linenums lang-java">InputStream ldif = System.in;
final LDIFChangeRecordReader reader = new LDIFChangeRecordReader(ldif);</pre></div><div class="section" id="writing-ldif"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.3.&nbsp;Writing LDIF</h2></div></div></div><a class="indexterm" name="d247e2403"></a><p><code class="literal">ChangeRecordWriter</code>s let you write requests to modify
  directory data, whereas <code class="literal">EntryWriter</code>s let you write entries
  to a file or an output stream. Both of these are interfaces.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <code class="literal">ConnectionChangeRecordWriter</code> and
    <code class="literal">ConnectionEntryWriter</code> classes let you write directly
    to a connection to the directory.</p></li><li class="listitem"><p>The <code class="literal">LDIFChangeRecordWriter</code> and
    <code class="literal">LDIFEntryWriter</code> classes let you write to a file or other
    output stream. Both classes offer methods to filter content.</p></li></ul></div><p>The following excerpt shows a writer pushing LDIF changes to a
  directory server.</p><pre class="codelisting prettyprint linenums lang-java">final LDIFChangeRecordReader reader = new LDIFChangeRecordReader(ldif);
final LDAPConnectionFactory factory = new LDAPConnectionFactory(host, port);
Connection connection = null;

try {
    connection = factory.getConnection();
    connection.bind(userDN, password.toCharArray());

    final ConnectionChangeRecordWriter writer =
            new ConnectionChangeRecordWriter(connection);
    while (reader.hasNext()) {
        ChangeRecord changeRecord = reader.readChangeRecord();
        writer.writeChangeRecord(changeRecord);
    }
} catch (final ErrorResultException e) {
    System.err.println(e.getMessage());
    System.exit(e.getResult().getResultCode().intValue());
    return;
} catch (final IOException e) {
    System.err.println(e.getMessage());
    System.exit(ResultCode.CLIENT_SIDE_LOCAL_ERROR.intValue());
    return;
} finally {
    if (connection != null) {
        connection.close();
    }
}</pre></div></div><div lang="en" class="chapter" id="chap-controls"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;10.&nbsp;Working With Controls</h1></div></div></div><a class="indexterm" name="d247e2442"></a><a class="indexterm" name="d247e2445"></a><p>This chapter demonstrates how to use LDAP controls.</p><p>For complete examples corresponding to the excerpts shown below, see
 <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Controls.html" target="_blank">Controls.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><div class="section" id="about-ldap-controls"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.1.&nbsp;About LDAP Controls</h2></div></div></div><p>Controls provide a mechanism whereby the semantics and arguments of
  existing LDAP operations may be extended. One or more controls may be
  attached to a single LDAP message. A control only affects the semantics of
  the message it is attached to. Controls sent by clients are termed
  <span class="emphasis"><em>request controls</em></span>, and those sent by servers are termed
  <span class="emphasis"><em>response controls</em></span>.</p></div><div class="section" id="get-supported-controls"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.2.&nbsp;Determining Supported Controls</h2></div></div></div><a class="indexterm" name="d247e2474"></a><a class="indexterm" name="d247e2479"></a><p>For OpenDJ, the controls supported are listed in the
  <em class="citetitle">Administration Guide</em> appendix, <a href="../admin-guide/index.html#appendix-controls" class="link"><em class="citetitle">LDAP
  Controls</em></a>. You can access the list of OIDs for
  supported LDAP controls by reading the <code class="literal">supportedControl</code>
  attribute of the root DSE.</p><pre class="cmdline prettyprint">$ ldapsearch
 --baseDN ""
 --searchScope base
 --port 1389
 "(objectclass=*)" supportedControl
dn: 
supportedControl: 1.2.826.0.1.3344810.2.3
supportedControl: 1.2.840.113556.1.4.1413
supportedControl: 1.2.840.113556.1.4.319
supportedControl: 1.2.840.113556.1.4.473
supportedControl: 1.2.840.113556.1.4.805
supportedControl: 1.3.6.1.1.12
supportedControl: 1.3.6.1.1.13.1
supportedControl: 1.3.6.1.1.13.2
supportedControl: 1.3.6.1.4.1.26027.1.5.2
supportedControl: 1.3.6.1.4.1.42.2.27.8.5.1
supportedControl: 1.3.6.1.4.1.42.2.27.9.5.2
supportedControl: 1.3.6.1.4.1.42.2.27.9.5.8
supportedControl: 1.3.6.1.4.1.4203.1.10.1
supportedControl: 1.3.6.1.4.1.4203.1.10.2
supportedControl: 1.3.6.1.4.1.7628.5.101.1
supportedControl: 2.16.840.1.113730.3.4.12
supportedControl: 2.16.840.1.113730.3.4.16
supportedControl: 2.16.840.1.113730.3.4.17
supportedControl: 2.16.840.1.113730.3.4.18
supportedControl: 2.16.840.1.113730.3.4.19
supportedControl: 2.16.840.1.113730.3.4.2
supportedControl: 2.16.840.1.113730.3.4.3
supportedControl: 2.16.840.1.113730.3.4.4
supportedControl: 2.16.840.1.113730.3.4.5
supportedControl: 2.16.840.1.113730.3.4.9</pre><p>The following excerpt shows couple of methods to check whether the
  directory server supports a control.</p><pre class="codelisting prettyprint linenums lang-java">
/**
 * Controls supported by the LDAP server.
 */
private static Collection&lt;String&gt; controls;

/**
 * Populate the list of supported LDAP control OIDs.
 *
 * @param connection
 *            Active connection to the LDAP server.
 * @throws ErrorResultException
 *             Failed to get list of controls.
 */
static void checkSupportedControls(Connection connection)
        throws ErrorResultException {
    controls = RootDSE.readRootDSE(connection).getSupportedControls();
}

/**
 * Check whether a control is supported. Call {@code checkSupportedControls}
 * first.
 *
 * @param control
 *            Check support for this control, provided by OID.
 * @return True if the control is supported.
 */
static boolean isSupported(final String control) {
    if (controls != null &amp;&amp; !controls.isEmpty()) {
        return controls.contains(control);
    }
    return false;
}
</pre></div><div class="section" id="use-assertion-request-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.3.&nbsp;Assertion Request Control</h2></div></div></div><a class="indexterm" name="d247e2505"></a><a class="indexterm" name="d247e2510"></a><p>The <a class="link" href="http://tools.ietf.org/html/rfc4528" target="_blank">LDAP assertion control</a> lets you specify a condition
  that must be true in order for the operation you request to be processed
  normally. The following excerpt shows, for example, how you might check
  that no description exists on the entry before adding your description.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(AssertionRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";

    final ModifyRequest request =
            Requests.newModifyRequest(dn)
                .addControl(AssertionRequestControl.newControl(
                        true, Filter.valueOf("!(description=*)")))
                .addModification(ModificationType.ADD, "description",
                        "Created using LDAP assertion control");

    connection.modify(request);

    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        writer.writeEntry(connection.readEntry(dn, "description"));
        writer.close();
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports the LDAP assertion control:</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
description: Created using LDAP assertion control</pre></div><div class="section" id="use-authorization-identity-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.4.&nbsp;Authorization Identity Controls</h2></div></div></div><a class="indexterm" name="d247e2527"></a><a class="indexterm" name="d247e2532"></a><p>The <a class="link" href="http://tools.ietf.org/html/rfc3829" target="_blank">LDAP Authorization Identity Controls</a> let you get the
  authorization identity established when you bind to the directory server.
  The following excerpt shows simple use of the controls.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(AuthorizationIdentityRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";
    final char[] pwd = "hifalutin".toCharArray();

    System.out.println("Binding as " + dn);
    final BindRequest request =
            Requests.newSimpleBindRequest(dn, pwd)
                .addControl(AuthorizationIdentityRequestControl.newControl(true));

    final BindResult result = connection.bind(request);
    try {
        final AuthorizationIdentityResponseControl control =
                result.getControl(AuthorizationIdentityResponseControl.DECODER,
                        new DecodeOptions());
        System.out.println("Authorization ID returned: "
                        + control.getAuthorizationID());
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    }
}
</pre><p>OpenDJ directory server supports the LDAP Authorization Identity
  Controls:</p><pre class="codelisting prettyprint">Binding as uid=bjensen,ou=People,dc=example,dc=com
Authorization ID returned: dn:uid=bjensen,ou=People,dc=example,dc=com</pre></div><div class="section" id="use-entry-change-notification-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.5.&nbsp;Entry Change Notification Response Controls</h2></div></div></div><a class="indexterm" name="d247e2549"></a><a class="indexterm" name="d247e2554"></a><a class="indexterm" name="d247e2559"></a><p>When performing a persistent search, your application can retrieve
  information using this response control about why the directory server
  returned the entry. See the Internet-Draft on <a class="link" href="http://tools.ietf.org/html/draft-ietf-ldapext-psearch" target="_blank">persistent
  searches</a> for background information.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PersistentSearchRequestControl.OID)) {
    final SearchRequest request =
            Requests.newSearchRequest(
                    "dc=example,dc=com", SearchScope.WHOLE_SUBTREE,
                    "(objectclass=inetOrgPerson)", "cn")
                    .addControl(PersistentSearchRequestControl.newControl(
                            true, true, true, // critical,changesOnly,returnECs
                            PersistentSearchChangeType.ADD,
                            PersistentSearchChangeType.DELETE,
                            PersistentSearchChangeType.MODIFY,
                            PersistentSearchChangeType.MODIFY_DN));

    final ConnectionEntryReader reader = connection.search(request);

    try {
        while (reader.hasNext()) {
            if (!reader.isReference()) {
                final SearchResultEntry entry = reader.readEntry();
                System.out.println("Entry changed: "
                        + entry.getName().toString());

                EntryChangeNotificationResponseControl control =
                        entry.getControl(
                                EntryChangeNotificationResponseControl.DECODER,
                                new DecodeOptions());

                PersistentSearchChangeType type = control.getChangeType();
                System.out.println("Change type: " + type.toString());
                if (type.equals(PersistentSearchChangeType.MODIFY_DN)) {
                    System.out.println("Previous DN: "
                            + control.getPreviousName().toString());
                }
                System.out.println("Change number: "
                        + control.getChangeNumber());
                System.out.println(); // Add a blank line.
           }
        }
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    } catch (final ErrorResultIOException e) {
        // Request failed due to an IO problem.
    } catch (final SearchResultReferenceIOException e) {
        // Read a reference, rather than an entry.
    }
}
</pre><p>OpenDJ directory server supports persistent searches and the entry
  change notification response control. When another application renames
  Anne-Louise Barnes's entry, the sample code picks up information from the
  entry change notification response control:</p><pre class="codelisting prettyprint">Entry changed: uid=bdobbs,ou=People,dc=example,dc=com
Change type: modifyDN
Previous DN: uid=abarnes,ou=People,dc=example,dc=com
Change number: -1</pre><p>In this case, <code class="literal">Change number: -1</code> because the server
  did not set a change number value. OpenDJ directory server does not set the
  change number value in the response control. If you need to track the order
  of changes with OpenDJ directory server, read the external change log instead
  of using the entry change notification response control.</p></div><div class="section" id="use-get-effective-rights-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.6.&nbsp;GetEffectiveRights Request Control</h2></div></div></div><a class="indexterm" name="d247e2581"></a><a class="indexterm" name="d247e2586"></a><p>Your application can attach the GetEffectiveRights request control to
  retrieve information about what the directory server permits a user to do.
  Use this control during a search to see permissions on the entries returned.
  See the Internet-Draft on the <a class="link" href="http://tools.ietf.org/html/draft-ietf-ldapext-acl-model" target="_blank">Access
  Control Model for LDAP</a> for background.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(GetEffectiveRightsRequestControl.OID)) {
    final String authDN = "uid=kvaughan,ou=People,dc=example,dc=com";

    final SearchRequest request =
            Requests.newSearchRequest(
                    "dc=example,dc=com", SearchScope.WHOLE_SUBTREE,
                    "(uid=bjensen)", "cn", "aclRights", "aclRightsInfo")
                    .addControl(GetEffectiveRightsRequestControl.newControl(
                            true, authDN, "cn"));

    final ConnectionEntryReader reader = connection.search(request);
    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        while (reader.hasNext()) {
            if (!reader.isReference()) {
                final SearchResultEntry entry = reader.readEntry();
                writer.writeEntry(entry);
            }
        }
        writer.close();
    } catch (final ErrorResultIOException e) {
        // Request failed due to an IO problem.
    } catch (final SearchResultReferenceIOException e) {
        // Read a reference, rather than an entry.
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ SDK currently implements the request control, but not the
  response control. The results are shown as values of the
  <code class="literal">aclRights</code> and more verbose <code class="literal">aclRightsInfo</code>
  attributes.</p><pre class="codelisting prettyprint">
dn: uid=bjensen,ou=People,dc=example,dc=com
aclRightsInfo;logs;attributeLevel;selfwrite_delete;cn: acl_summary(main)
 : access allowed(write) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com
 , distinguishedName) to (uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: allow all Admin group)
aclRightsInfo;logs;entryLevel;read: acl_summary(main): access allowed(read
 ) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, objectClass) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied) ( reason
 : evaluated allow , deciding_aci: Anonymous read-search access)
aclRightsInfo;logs;attributeLevel;proxy;cn: acl_summary(main)
 : access not allowed(proxy) on entry/attr(uid=bjensen,ou=People,dc=example,
 dc=com, cn) to (uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) (reason: no acis matched the subject )
aclRights;attributeLevel;cn: search:1,read:1,compare:1,write:1,selfwrite_add:1,
 selfwrite_delete:1,proxy:0
aclRightsInfo;logs;attributeLevel;write;cn: acl_summary(main): access allowed
 (write) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, cn) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: allow all Admin group)
aclRights;entryLevel: add:1,delete:1,read:1,write:1,proxy:0
aclRightsInfo;logs;attributeLevel;search;cn: acl_summary(main): access allowed(
 search) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, cn) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: Anonymous read-search access)
aclRightsInfo;logs;entryLevel;write: acl_summary(main): access allowed(write
 ) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, NULL) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: allow all Admin group)
aclRightsInfo;logs;attributeLevel;selfwrite_add;cn: acl_summary(main
 ): access allowed(write) on entry/attr(uid=bjensen,ou=People,dc=example,
 dc=com, distinguishedName) to (uid=kvaughan,ou=People,dc=example,dc=com) (
 not proxied) ( reason: evaluated allow , deciding_aci: allow all Admin group)
aclRightsInfo;logs;entryLevel;add: acl_summary(main): access allowed(add
 ) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, NULL) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: allow all Admin group)
aclRightsInfo;logs;attributeLevel;read;cn: acl_summary(main): access allowed(
 read) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, cn) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: Anonymous read-search access)
cn: Barbara Jensen
cn: Babs Jensen
aclRightsInfo;logs;entryLevel;proxy: acl_summary(main): access not allowed(
 proxy) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, NULL) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: no acis matched the subject )
aclRightsInfo;logs;attributeLevel;compare;cn: acl_summary(main): access allowed
 (compare) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, cn) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: Anonymous read-search access)
aclRightsInfo;logs;entryLevel;delete: acl_summary(main): access allowed(
 delete) on entry/attr(uid=bjensen,ou=People,dc=example,dc=com, NULL) to (
 uid=kvaughan,ou=People,dc=example,dc=com) (not proxied
 ) ( reason: evaluated allow , deciding_aci: allow all Admin group)
</pre></div><div class="section" id="use-managedsait-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.7.&nbsp;ManageDsaIT Request Control</h2></div></div></div><a class="indexterm" name="d247e2609"></a><a class="indexterm" name="d247e2614"></a><p>The ManageDsaIT control, described in <a class="link" href="http://tools.ietf.org/html/rfc3296" target="_blank">RFC 3296, <em class="citetitle">Named
  Subordinate References in LDAP Directories</em></a>, lets your
  application handle references and other special entries as normal entries.
  Use it when you want to read from or write to reference or special
  entry.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(ManageDsaITRequestControl.OID)) {
    final String dn = "dc=ref,dc=com";

    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        System.out.println("Referral without the ManageDsaIT control.");
        SearchRequest request = Requests.newSearchRequest(dn,
                SearchScope.SUBORDINATES, "(objectclass=*)", "");
        final ConnectionEntryReader reader = connection.search(request);
        while (reader.hasNext()) {
            if (reader.isReference()) {
                final SearchResultReference ref = reader.readReference();
                System.out.println("Reference: " + ref.getURIs().toString());
            }
        }

        System.out.println("Referral with the ManageDsaIT control.");
        request.addControl(ManageDsaITRequestControl.newControl(true));
        final SearchResultEntry entry = connection.searchSingleEntry(request);
        writer.writeEntry(entry);
        writer.close();
    } catch (final ErrorResultIOException e) {
        // Request failed due to an IO problem.
    } catch (final SearchResultReferenceIOException e) {
        // Read a reference, rather than an entry.
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports the ManageDsaIT Request Control. To use
  the example entry create a new base DN, <code class="literal">dc=ref,dc=com</code>
  before you import the data:</p><pre class="codelisting prettyprint">Referral without the ManageDsaIT control.
Reference: [ldap:///dc=example,dc=com??sub?]
Referral with the ManageDsaIT control.
dn: dc=references,dc=ref,dc=com</pre></div><div class="section" id="use-matched-values-request-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.8.&nbsp;Matched Values Request Control</h2></div></div></div><a class="indexterm" name="d247e2636"></a><a class="indexterm" name="d247e2641"></a><p>RFC 3876, <a class="link" href="http://tools.ietf.org/html/rfc3876" target="_blank"><em class="citetitle">Returning Matched Values with the
  LDAPv3</em></a>, describes a control that lets your application
  pass a filter in a search request getting a multivalued attribute such that
  the directory server only returns attribute values that match the
  filter.</p><p>Barbara Jensen's entry contains two common name values,
  <code class="literal">Barbara Jensen</code> and <code class="literal">Babs Jensen</code>. The
  following excerpt retrieves only the latter.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(MatchedValuesRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";
    final SearchRequest request =
            Requests.newSearchRequest(dn, SearchScope.BASE_OBJECT,
                    "(objectclass=*)", "cn")
                    .addControl(MatchedValuesRequestControl.newControl(
                            true, "(cn=Babs Jensen)"));

    final SearchResultEntry entry = connection.searchSingleEntry(request);
    System.out.println("Reading entry with matched values request.");
    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        writer.writeEntry(entry);
        writer.close();
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports the matched values request
  control.</p><pre class="codelisting prettyprint">Reading entry with matched values request.
dn: uid=bjensen,ou=People,dc=example,dc=com
cn: Babs Jensen
</pre></div><div class="section" id="use-password-expired-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.9.&nbsp;Password Expired Response Control</h2></div></div></div><a class="indexterm" name="d247e2667"></a><a class="indexterm" name="d247e2672"></a><p>A directory server can return the Password Expired Response Control,
  described in the Internet-Draft <a class="link" href="http://tools.ietf.org/html/draft-vchu-ldap-pwd-policy" target="_blank"><em class="citetitle">Password Policy for LDAP Directories</em></a>, when a bind fails
  because the password has expired. In order to see this, you must configure
  the directory to expire Barbara Jensen's password.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PasswordExpiredResponseControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";
    final char[] pwd = "hifalutin".toCharArray();

    try {
        connection.bind(dn, pwd);
    } catch (final ErrorResultException e) {
        final Result result = e.getResult();
        try {
            final PasswordExpiredResponseControl control =
                    result.getControl(PasswordExpiredResponseControl.DECODER,
                            new DecodeOptions());
            if (!(control == null) &amp;&amp; control.hasValue()) {
                System.out.println("Password expired for " + dn);
            }
        } catch (final DecodeException de) {
            // Failed to decode the response control.
        }
    }
}
</pre><p>OpenDJ directory server supports the Password Expired Response Control.
  To obtain the following output from the excerpt, you can change the default
  password policy configuration to set a short maximum password age, change
  Barbara Jensen's password, and wait for it to expire. See the OpenDJ
  <em class="citetitle">Administration Guide</em> procedure explaining how
  <a href="../admin-guide/index.html#default-pwp" class="link"><em class="citetitle">To Adjust the Default Password Policy</em></a> for an example
  of how to adjust the maximum password age.</p><pre class="codelisting prettyprint">Password expired for uid=bjensen,ou=People,dc=example,dc=com</pre></div><div class="section" id="use-password-expiring-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.10.&nbsp;Password Expiring Response Control</h2></div></div></div><a class="indexterm" name="d247e2699"></a><a class="indexterm" name="d247e2704"></a><p>The Password Expiring Response Control, described in the Internet-Draft
  <a class="link" href="http://tools.ietf.org/html/draft-vchu-ldap-pwd-policy" target="_blank"><em class="citetitle">Password Policy for LDAP
  Directories</em></a>, warns your application during a bind
  that the password used will soon expire.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PasswordExpiringResponseControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";
    final char[] pwd = "hifalutin".toCharArray();

    final BindResult result = connection.bind(dn, pwd);
    try {
        final PasswordExpiringResponseControl control =
                result.getControl(PasswordExpiringResponseControl.DECODER,
                        new DecodeOptions());
        if (!(control == null) &amp;&amp; control.hasValue()) {
            System.out.println("Password for " + dn + " expires in "
                    + control.getSecondsUntilExpiration() + " seconds.");
        }
    } catch (final DecodeException de) {
        // Failed to decode the response control.
    }
}
</pre><p>OpenDJ directory server supports the Password Expiring Response Control.
  To obtain the following output from the excerpt, you can change the default
  password policy configuration to set a maximum password age and a warning
  interval, change Barbara Jensen's password, and wait until you enter the
  warning interval before password expiration. See the OpenDJ
  <em class="citetitle">Administration Guide</em> procedure explaining how
  <a href="../admin-guide/index.html#default-pwp" class="link"><em class="citetitle">To Adjust the Default Password Policy</em></a> for an example
  of how to adjust the maximum password age. Also set a short
  <code class="literal">password-expiration-warning-interval</code> value.</p><pre class="codelisting prettyprint">Password for uid=bjensen,ou=People,dc=example,dc=com
 expires in 237 seconds.</pre></div><div class="section" id="use-password-policy-controls"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.11.&nbsp;Password Policy Controls</h2></div></div></div><a class="indexterm" name="d247e2734"></a><a class="indexterm" name="d247e2739"></a><p>The Behera Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-behera-ldap-password-policy" target="_blank"><em class="citetitle">Password Policy for LDAP Directories</em></a>, describes
  Password Policy Request and Response Controls. You send the request control
  with a request to let the directory server know that your application can
  handle the response control. The directory server sends the response control
  on applicable operations to communicate warnings and errors.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PasswordPolicyRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";
    final char[] pwd = "hifalutin".toCharArray();

    try {
        final BindRequest request = Requests.newSimpleBindRequest(dn, pwd)
                .addControl(PasswordPolicyRequestControl.newControl(true));

        final BindResult result = connection.bind(request);

        final PasswordPolicyResponseControl control =
                result.getControl(PasswordPolicyResponseControl.DECODER,
                        new DecodeOptions());
        if (!(control == null) &amp;&amp; !(control.getWarningType() == null)) {
            System.out.println("Password policy warning "
                    + control.getWarningType().toString() + ", value "
                    + control.getWarningValue() + " for " + dn);
        }
    } catch (final ErrorResultException e) {
        final Result result = e.getResult();
        try {
            final PasswordPolicyResponseControl control =
                    result.getControl(PasswordPolicyResponseControl.DECODER,
                            new DecodeOptions());
            if (!(control == null)) {
                System.out.println("Password policy error "
                        + control.getErrorType().toString() + " for " + dn);
            }
        } catch (final DecodeException de) {
            // Failed to decode the response control.
        }
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    }
}
</pre><p>OpenDJ directory server supports the Password Policy Controls. To obtain
  the output from the excerpt, you can change the default password policy
  configuration to set a maximum password age and a warning interval, change
  Barbara Jensen's password, and then run the example during the warning
  interval and after the password has expired. See the OpenDJ
  <em class="citetitle">Administration Guide</em> procedure explaining how
  <a href="../admin-guide/index.html#default-pwp" class="link"><em class="citetitle">To Adjust the Default Password Policy</em></a> for an example
  of how to adjust the maximum password age. Also set a short
  <code class="literal">password-expiration-warning-interval</code> value.</p><p>For a warning:</p><pre class="codelisting prettyprint">Password policy warning timeBeforeExpiration, value 237 for
 uid=bjensen,ou=People,dc=example,dc=com</pre><p>For an error:</p><pre class="codelisting prettyprint">Password policy error passwordExpired for
 uid=bjensen,ou=People,dc=example,dc=com</pre></div><div class="section" id="use-permissive-modify-request-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.12.&nbsp;Permissive Modify Request Control</h2></div></div></div><a class="indexterm" name="d247e2775"></a><a class="indexterm" name="d247e2780"></a><p>Microsoft defined a Permissive Modify Request Control that relaxes
  some constraints when your application performs a modify operation and
  tries to <code class="literal">add</code> an attribute that already exists, or to
  <code class="literal">delete</code> an attribute that does not exist.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PermissiveModifyRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";

    final ModifyRequest request =
            Requests.newModifyRequest(dn)
                .addControl(PermissiveModifyRequestControl.newControl(true))
                .addModification(ModificationType.ADD, "uid", "bjensen");

    connection.modify(request);
    System.out.println("Permissive modify did not complain about "
            + "attempt to add uid: bjensen to " + dn + ".");
}
</pre><p>OpenDJ directory server supports the Permissive Modify Request
  Control:</p><pre class="codelisting prettyprint">Permissive modify did not complain about attempt to add
 uid: bjensen to uid=bjensen,ou=People,dc=example,dc=com.</pre></div><div class="section" id="use-persistent-search-request-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.13.&nbsp;Persistent Search Request Control</h2></div></div></div><a class="indexterm" name="d247e2802"></a><a class="indexterm" name="d247e2807"></a><a class="indexterm" name="d247e2812"></a><p>See <a class="xref" href="#use-entry-change-notification-control" title="10.5.&nbsp;Entry Change Notification Response Controls">Section&nbsp;10.5, &#8220;Entry Change Notification Response Controls&#8221;</a>.</p></div><div class="section" id="use-post-read-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.14.&nbsp;Post-Read Controls</h2></div></div></div><a class="indexterm" name="d247e2822"></a><a class="indexterm" name="d247e2827"></a><p>RFC 4527, <a class="link" href="http://tools.ietf.org/html/rfc4527" target="_blank"><em class="citetitle">LDAP Read Entry Controls</em></a>,
  describes the post-read controls that let your application get the content
  of an entry immediately after modifications are applied.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PostReadRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";

    final ModifyRequest request =
            Requests.newModifyRequest(dn)
            .addControl(PostReadRequestControl.newControl(true, "description"))
            .addModification(ModificationType.REPLACE,
                    "description", "Using the PostReadRequestControl");

    final Result result = connection.modify(request);
    try {
        final PostReadResponseControl control =
                result.getControl(PostReadResponseControl.DECODER,
                        new DecodeOptions());
        final Entry entry = control.getEntry();

        final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
        writer.writeEntry(entry);
        writer.close();
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports these controls:</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
description: Using the PostReadRequestControl</pre></div><div class="section" id="use-pre-read-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.15.&nbsp;Pre-Read Controls</h2></div></div></div><a class="indexterm" name="d247e2847"></a><a class="indexterm" name="d247e2852"></a><p>RFC 4527, <a class="link" href="http://tools.ietf.org/html/rfc4527" target="_blank"><em class="citetitle">LDAP Read Entry Controls</em></a>,
  describes the pre-read controls that let your application get the content
  of an entry immediately before modifications are applied.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PreReadRequestControl.OID)) {
    final String dn = "uid=bjensen,ou=People,dc=example,dc=com";

    final ModifyRequest request =
            Requests.newModifyRequest(dn)
            .addControl(PreReadRequestControl.newControl(true, "mail"))
            .addModification(
                    ModificationType.REPLACE, "mail", "modified@example.com");

    final Result result = connection.modify(request);
    try {
        final PreReadResponseControl control =
                result.getControl(PreReadResponseControl.DECODER,
                        new DecodeOptions());
        final Entry entry = control.getEntry();

        final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
        writer.writeEntry(entry);
        writer.close();
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports these controls:</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
mail: bjensen@example.com</pre></div><div class="section" id="use-proxy-authz-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.16.&nbsp;Proxied Authorization Request Controls</h2></div></div></div><a class="indexterm" name="d247e2870"></a><a class="indexterm" name="d247e2875"></a><p>Proxied authorization provides a standard control as defined in
  <a class="link" href="http://tools.ietf.org/html/rfc4370" target="_blank">RFC
  4370</a> (and an earlier Internet-Draft) for binding with the user
  credentials of a proxy, who carries out LDAP operations on behalf of other
  users. You might use proxied authorization, for example, to have your
  application bind with its credentials, and then carry out operations as the
  users who login to the application.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(ProxiedAuthV2RequestControl.OID)) {
    final String bindDN = "cn=My App,ou=Apps,dc=example,dc=com";
    final String targetDn = "uid=bjensen,ou=People,dc=example,dc=com";
    final String authzId = "dn:uid=kvaughan,ou=People,dc=example,dc=com";

    final ModifyRequest request =
            Requests.newModifyRequest(targetDn)
            .addControl(ProxiedAuthV2RequestControl.newControl(authzId))
            .addModification(ModificationType.REPLACE, "description",
                    "Done with proxied authz");

    connection.bind(bindDN, "password".toCharArray());
    connection.modify(request);
    final Entry entry = connection.readEntry(targetDn, "description");

    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        writer.writeEntry(entry);
        writer.close();
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}</pre><p>OpenDJ supports proxied authorization, and the example works with the
  sample data:</p><pre class="codelisting prettyprint">dn: uid=bjensen,ou=People,dc=example,dc=com
description: Done with proxied authz</pre></div><div class="section" id="use-server-side-sort-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.17.&nbsp;Server-Side Sort Controls</h2></div></div></div><a class="indexterm" name="d247e2892"></a><a class="indexterm" name="d247e2897"></a><a class="indexterm" name="d247e2902"></a><a class="indexterm" name="d247e2905"></a><p>The server-side sort controls are described in RFC 2891, <a class="link" href="http://tools.ietf.org/html/rfc2891" target="_blank"><em class="citetitle">LDAP Control Extension for Server Side Sorting of Search
  Results</em></a>. If possible, sort on the client side instead to
  reduce load on the server. If not, then you can request a server-side
  sort.</p><pre class="codelisting prettyprint linenums lang-java">
static void useServerSideSortRequestControl(Connection connection)
        throws ErrorResultException {
    if (isSupported(ServerSideSortRequestControl.OID)) {
        final SearchRequest request =
                Requests.newSearchRequest("ou=People,dc=example,dc=com",
                        SearchScope.WHOLE_SUBTREE, "(sn=Jensen)", "cn")
                        .addControl(ServerSideSortRequestControl.newControl(
                                        true, new SortKey("cn")));

        final SearchResultHandler resultHandler = new MySearchResultHandler();
        final Result result = connection.search(request, resultHandler);

        try {
            final ServerSideSortResponseControl control =
                    result.getControl(ServerSideSortResponseControl.DECODER,
                            new DecodeOptions());
            if (control != null &amp;&amp; control.getResult() == ResultCode.SUCCESS) {
                System.out.println("# Entries are sorted.");
            } else {
                System.out.println("# Entries not necessarily sorted");
            }
        } catch (final DecodeException e) {
            // Failed to decode the response control.
        }
    } else {
        System.out.println("ServerSideSortRequestControl not supported");
    }
}

private static class MySearchResultHandler implements SearchResultHandler {

    @Override
    public void handleErrorResult(ErrorResultException error) {
        // Ignore.
    }

    @Override
    public void handleResult(Result result) {
        // Ignore.
    }

    @Override
    public boolean handleEntry(SearchResultEntry entry) {
        final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
        try {
            writer.writeEntry(entry);
            writer.flush();
        } catch (final IOException e) {
            // The writer could not write to System.out.
        }
        return true;
    }

    @Override
    public boolean handleReference(SearchResultReference reference) {
        System.out.println("Got a reference: " + reference.toString());
        return false;
    }
}
</pre><p>OpenDJ directory server supports server-side sorting:</p><pre class="codelisting prettyprint">dn: uid=ajensen,ou=People,dc=example,dc=com
cn: Allison Jensen

dn: uid=bjensen,ou=People,dc=example,dc=com
cn: Barbara Jensen
cn: Babs Jensen

dn: uid=bjense2,ou=People,dc=example,dc=com
cn: Bjorn Jensen

dn: uid=gjensen,ou=People,dc=example,dc=com
cn: Gern Jensen

dn: uid=jjensen,ou=People,dc=example,dc=com
cn: Jody Jensen

dn: uid=kjensen,ou=People,dc=example,dc=com
cn: Kurt Jensen

dn: uid=rjense2,ou=People,dc=example,dc=com
cn: Randy Jensen

dn: uid=rjensen,ou=People,dc=example,dc=com
cn: Richard Jensen

dn: uid=tjensen,ou=People,dc=example,dc=com
cn: Ted Jensen

# Entries are sorted.</pre></div><div class="section" id="use-simple-paged-results-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.18.&nbsp;Simple Paged Results Control</h2></div></div></div><a class="indexterm" name="d247e2923"></a><a class="indexterm" name="d247e2928"></a><a class="indexterm" name="d247e2933"></a><p>RFC 2696, <a class="link" href="http://tools.ietf.org/html/rfc2696" target="_blank"><em class="citetitle">LDAP Control Extension for Simple Paged Results
  Manipulation</em></a>, defines a control for simple paging of
  search results that works with a cookie mechanism.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(SimplePagedResultsControl.OID)) {
    ByteString cookie = ByteString.empty();
    SearchRequest request;
    final SearchResultHandler resultHandler = new MySearchResultHandler();
    Result result;

    int page = 1;
    do {
        System.out.println("# Simple paged results: Page " + page);

        request =
                Requests.newSearchRequest("dc=example,dc=com",
                        SearchScope.WHOLE_SUBTREE, "(sn=Jensen)", "cn")
                        .addControl(SimplePagedResultsControl.newControl(
                                true, 3, cookie));

        result = connection.search(request, resultHandler);
        try {
            SimplePagedResultsControl control =
                    result.getControl(SimplePagedResultsControl.DECODER,
                            new DecodeOptions());
            cookie = control.getCookie();
        } catch (final DecodeException e) {
            // Failed to decode the response control.
        }

        ++page;
    } while (cookie.length() != 0);
}
</pre><p>OpenDJ directory server supports getting simple paged results:</p><pre class="codelisting prettyprint"># Simple paged results: Page 1
dn: uid=ajensen,ou=People,dc=example,dc=com
cn: Allison Jensen

dn: uid=bjense2,ou=People,dc=example,dc=com
cn: Bjorn Jensen

dn: uid=bjensen,ou=People,dc=example,dc=com
cn: Barbara Jensen
cn: Babs Jensen

# Simple paged results: Page 2
dn: uid=gjensen,ou=People,dc=example,dc=com
cn: Gern Jensen

dn: uid=jjensen,ou=People,dc=example,dc=com
cn: Jody Jensen

dn: uid=kjensen,ou=People,dc=example,dc=com
cn: Kurt Jensen

# Simple paged results: Page 3
dn: uid=rjense2,ou=People,dc=example,dc=com
cn: Randy Jensen

dn: uid=rjensen,ou=People,dc=example,dc=com
cn: Richard Jensen

dn: uid=tjensen,ou=People,dc=example,dc=com
cn: Ted Jensen
</pre></div><div class="section" id="use-subentry-request-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.19.&nbsp;Subentries Request Control</h2></div></div></div><a class="indexterm" name="d247e2951"></a><a class="indexterm" name="d247e2956"></a><p>RFC 3672, <a class="link" href="http://tools.ietf.org/html/rfc3672" target="_blank"><em class="citetitle">Subentries in LDAP</em></a>, describes
  subentries and also the subentries request control. When you perform a search
  without the control and visibility set to <code class="literal">TRUE</code>, subentries
  are only visible in searches with
  <code class="literal">SearchScope.BASE_OBJECT</code>.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(SubentriesRequestControl.OID)) {
    final SearchRequest request =
            Requests.newSearchRequest("dc=example,dc=com",
                        SearchScope.WHOLE_SUBTREE,
                        "cn=*Class of Service", "cn", "subtreeSpecification")
                    .addControl(SubentriesRequestControl.newControl(
                        true, true));

    final ConnectionEntryReader reader = connection.search(request);
    final LDIFEntryWriter writer = new LDIFEntryWriter(System.out);
    try {
        while (reader.hasNext()) {
            if (reader.isEntry()) {
                final SearchResultEntry entry = reader.readEntry();
                writer.writeEntry(entry);
            }
        }
        writer.close();
    } catch (final ErrorResultIOException e) {
        // Request failed due to an IO problem.
    } catch (final SearchResultReferenceIOException e) {
        // Read a reference, rather than an entry.
    } catch (final IOException e) {
        // The writer could not write to System.out.
    }
}
</pre><p>OpenDJ directory server supports the control.</p><pre class="codelisting prettyprint">dn: cn=Bronze Class of Service,dc=example,dc=com
cn: Bronze Class of Service
subtreeSpecification: { base "ou=People", specificationFilter "(classOfService=
 bronze)" }

dn: cn=Silver Class of Service,dc=example,dc=com
cn: Silver Class of Service
subtreeSpecification: { base "ou=People", specificationFilter "(classOfService=
 silver)" }

dn: cn=Gold Class of Service,dc=example,dc=com
cn: Gold Class of Service
subtreeSpecification: { base "ou=People", specificationFilter "(classOfService=
 gold)" }
</pre></div><div class="section" id="use-subtree-delete-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.20.&nbsp;Subtree Delete Request Control</h2></div></div></div><a class="indexterm" name="d247e2982"></a><a class="indexterm" name="d247e2987"></a><p>The subtree delete request control, described in the Internet-Draft
  <a class="link" href="http://tools.ietf.org/html/draft-armijo-ldap-treedelete" target="_blank"><em class="citetitle">Tree Delete Control</em></a>, lets
  your application delete an entire branch of entries starting with the entry
  you target for deletion.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(SubtreeDeleteRequestControl.OID)) {

    final String dn = "ou=Apps,dc=example,dc=com";
    final DeleteRequest request =
            Requests.newDeleteRequest(dn)
                    .addControl(SubtreeDeleteRequestControl.newControl(true));

    final Result result = connection.delete(request);
    if (result.isSuccess()) {
        System.out.println("Successfully deleted " + dn
                + " and all entries below.");
    } else {
        System.out.println("Result: " + result.getDiagnosticMessage());
    }
}
</pre><p>OpenDJ directory server supports the subtree delete control:</p><pre class="codelisting prettyprint">Successfully deleted ou=Apps,dc=example,dc=com and all entries below.</pre></div><div class="section" id="use-vlv-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.21.&nbsp;Virtual List View Controls</h2></div></div></div><a class="indexterm" name="d247e3007"></a><a class="indexterm" name="d247e3012"></a><a class="indexterm" name="d247e3017"></a><a class="indexterm" name="d247e3020"></a><p>The virtual list view controls are intended to be used by applications
  that let users browse lists of directory entries. The Internet-Draft <a class="link" href="http://tools.ietf.org/html/draft-ietf-ldapext-ldapv3-vlv" target="_blank"><em class="citetitle">LDAP Extensions for Scrolling View Browsing of
  Search Results</em></a> describes the controls. The virtual list
  view request control is used in conjunction with the server-side sort
  control such that the subset of entries the directory server returns from
  a search are a window into the full sorted list.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(VirtualListViewRequestControl.OID)) {
    ByteString contextID = ByteString.empty();

    // Add a window of 2 entries on either side of the first sn=Jensen entry.
    final SearchRequest request =
            Requests.newSearchRequest("ou=People,dc=example,dc=com",
                    SearchScope.WHOLE_SUBTREE, "(sn=*)", "sn", "givenName")
                    .addControl(ServerSideSortRequestControl.newControl(
                            true, new SortKey("sn")))
                    .addControl(
                            VirtualListViewRequestControl.newAssertionControl(
                                    true,
                                    ByteString.valueOf("Jensen"),
                                    2, 2, contextID));

    final SearchResultHandler resultHandler = new MySearchResultHandler();
    final Result result = connection.search(request, resultHandler);

    try {
        final ServerSideSortResponseControl sssControl =
                result.getControl(ServerSideSortResponseControl.DECODER,
                        new DecodeOptions());
        if (sssControl != null &amp;&amp; sssControl.getResult() == ResultCode.SUCCESS){
            System.out.println("# Entries are sorted.");
        } else {
            System.out.println("# Entries not necessarily sorted");
        }

        final VirtualListViewResponseControl vlvControl =
                result.getControl(VirtualListViewResponseControl.DECODER,
                        new DecodeOptions());
        System.out.println("# Position in list: "
                + vlvControl.getTargetPosition() + "/"
                + vlvControl.getContentCount());
    } catch (final DecodeException e) {
        // Failed to decode the response control.
    }
}
</pre><p>OpenDJ directory server supports the virtual list view controls.
  In order to set up OpenDJ directory server to produce the following output
  with the example code, use OpenDJ Control Panel &gt; Manage Indexes &gt; New
  VLV Index... to set up a virtual list view index for people by last name,
  using the filter <code class="literal">(|(givenName=*)(sn=*))</code>, and sorting first
  by surname, <code class="literal">sn</code>, in ascending order, then by given name
  also in ascending order.</p><pre class="codelisting prettyprint">dn: uid=skellehe,ou=People,dc=example,dc=com
givenName: Sue
sn: Kelleher

dn: uid=ejohnson,ou=People,dc=example,dc=com
givenName: Emanuel
sn: Johnson

dn: uid=ajensen,ou=People,dc=example,dc=com
givenName: Allison
sn: Jensen

dn: uid=bjense2,ou=People,dc=example,dc=com
givenName: Bjorn
sn: Jensen

dn: uid=bjensen,ou=People,dc=example,dc=com
givenName: Barbara
sn: Jensen

# Entries are sorted.
# Position in list: 92/150</pre></div><div class="section" id="use-generic-control"><div class="titlepage"><div><div><h2 class="title" style="clear: both">10.22.&nbsp;Using a Generic Control</h2></div></div></div><a class="indexterm" name="d247e3044"></a><p>OpenDJ LDAP SDK supports many controls, but you might still need to
  work with additional controls. If so, then in some cases you can use the
  <code class="literal">GenericControl</code> class when adding the control to your
  request.</p><p>For example, the Microsoft <a class="link" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa366983(v=vs.85).aspx" target="_blank">LDAP Server Notification Control</a> with OID
  <code class="literal">1.2.840.113556.1.4.528</code> can be used to register a change
  notification request for a search on Microsoft Active Directory. You can use
  a <code class="literal">GenericControl.newControl()</code> static method to add the
  request control to your search.</p><code class="filename">org.forgerock.opendj.examples.GetADChangeNotifications.java</code><p>When you run the search against Active Directory and then create,
  update, and delete a new user, in this example
  <code class="literal">CN=New User,CN=Users,DC=ad,DC=example,DC=com</code>, Active
  Directory notifies you of changes to directory data.</p><pre class="codelisting prettyprint"># Search result entry: CN=RID Set,CN=WIN2008R2641,OU=Domain Controllers,
 DC=ad,DC=example,DC=com
dn: CN=RID Set,CN=WIN2008R2641,OU=Domain Controllers,DC=ad,DC=example,DC=com
objectClass: top
objectClass: rIDSet
objectGUID:: 178zQQic3EOoBOB1j2QVgQ==
uSNChanged: 12446

# Search result entry: CN=New User,CN=Users,DC=ad,DC=example,DC=com
dn: CN=New User,CN=Users,DC=ad,DC=example,DC=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: user
objectGUID:: 7XE/OoJdFEqAegwAi2eNlA==
uSNChanged: 12753

# Search result entry: CN=New User,CN=Users,DC=ad,DC=example,DC=com
dn: CN=New User,CN=Users,DC=ad,DC=example,DC=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: user
objectGUID:: 7XE/OoJdFEqAegwAi2eNlA==
uSNChanged: 12755

# Search result entry: CN=New User,CN=Users,DC=ad,DC=example,DC=com
dn: CN=New User,CN=Users,DC=ad,DC=example,DC=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: user
objectGUID:: 7XE/OoJdFEqAegwAi2eNlA==
uSNChanged: 12757

# Search result entry: CN=New User,CN=Users,DC=ad,DC=example,DC=com
dn: CN=New User,CN=Users,DC=ad,DC=example,DC=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: user
objectGUID:: 7XE/OoJdFEqAegwAi2eNlA==
uSNChanged: 12758

# Search result entry: CN=New User\0ADEL:3a3f71ed-5d82-4a14-807a-0c008b678d94,
# CN=Deleted Objects,DC=ad,DC=example,DC=com
dn: CN=New User\0ADEL:3a3f71ed-5d82-4a14-807a-0c008b678d94,CN=Deleted Objects,
 DC=ad,DC=example,DC=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: user
objectGUID:: 7XE/OoJdFEqAegwAi2eNlA==
isDeleted: TRUE
uSNChanged: 12759
</pre><p>The <code class="literal">GenericControl</code> class is useful with controls that
  do not require you to encode complex request values, or decode complex
  response values. If the control you want to you requires complex encoding
  or decoding, you might have to implement
  <code class="literal">org.forgerock.opendj.ldap.controls.Control</code>.</p></div></div><div lang="en" class="chapter" id="chap-extended-ops"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;11.&nbsp;Working With Extended Operations</h1></div></div></div><a class="indexterm" name="d247e3086"></a><a class="indexterm" name="d247e3089"></a><p>This chapter demonstrates how to use LDAP extended operations.</p><p>For complete examples corresponding to the excerpts shown below, see
 <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/ExtendedOperations.html" target="_blank">ExtendedOperations.java</a>, one of the <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/" target="_blank">OpenDJ LDAP SDK examples</a>.</p><div class="section" id="about-ldap-extended-operations"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.1.&nbsp;About LDAP Extended Operations</h2></div></div></div><p>Extended operations allow additional operations to be defined for
  services not already available in the protocol</p></div><div class="section" id="get-supported-extended-operations"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.2.&nbsp;Determining Supported Extended Operations</h2></div></div></div><a class="indexterm" name="d247e3112"></a><a class="indexterm" name="d247e3117"></a><p>For OpenDJ, the extended operations supported are listed in the
  <em class="citetitle">Administration Guide</em> appendix, <a href="../admin-guide/index.html#appendix-extended-ops" class="link"><em class="citetitle">LDAP Extended
  Operations</em></a>. You can access the list of OIDs for
  supported LDAP controls by reading the <code class="literal">supportedExtension</code>
  attribute of the root DSE.</p><pre class="cmdline prettyprint">$ ldapsearch
 --baseDN ""
 --searchScope base
 --port 1389
 "(objectclass=*)" supportedExtension
dn: 
supportedExtension: 1.3.6.1.1.8
supportedExtension: 1.3.6.1.4.1.26027.1.6.1
supportedExtension: 1.3.6.1.4.1.26027.1.6.2
supportedExtension: 1.3.6.1.4.1.26027.1.6.3
supportedExtension: 1.3.6.1.4.1.4203.1.11.1
supportedExtension: 1.3.6.1.4.1.4203.1.11.3
supportedExtension: 1.3.6.1.4.1.1466.20037</pre><p>The following excerpt shows code to check for supported extended
  operations.</p><pre class="codelisting prettyprint linenums lang-java">
/**
 * Controls supported by the LDAP server.
 */
private static Collection&lt;String&gt; extendedOperations;

/**
 * Populate the list of supported LDAP extended operation OIDs.
 * 
 * @param connection
 *            Active connection to the LDAP server.
 * @throws ErrorResultException
 *             Failed to get list of extended operations.
 */
static void checkSupportedExtendedOperations(Connection connection)
        throws ErrorResultException {
    extendedOperations = RootDSE.readRootDSE(connection)
            .getSupportedExtendedOperations();
}

/**
 * Check whether an extended operation is supported. Call
 * {@code checkSupportedExtendedOperations} first.
 * 
 * @param extendedOperation
 *            Check support for this extended operation, provided by OID.
 * @return True if the control is supported.
 */
static boolean isSupported(final String extendedOperation) {
    if (extendedOperations != null &amp;&amp; !extendedOperations.isEmpty()) {
        return extendedOperations.contains(extendedOperation);
    }
    return false;
}
</pre></div><div class="section" id="use-cancel-extended-operation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.3.&nbsp;Cancel Extended Operation</h2></div></div></div><a class="indexterm" name="d247e3143"></a><a class="indexterm" name="d247e3148"></a><p>RFC 3909, <a class="link" href="http://tools.ietf.org/html/rfc3909" target="_blank"><em class="citetitle">LDAP Cancel Operation</em></a>, defines
  an extended operation that lets you cancel an operation in progress and get
  an indication of the outcome.</p><p>The Cancel extended request uses the request ID of operation you
  want to cancel, and so therefore works with asynchronous searches and
  updates. Depending on the delay between your application sending the Cancel
  request and the directory server receiving the request, the server might have
  already finished processing the original request before it receives your
  Cancel request.</p><p>You can add a Cancel extended request for example to stop handling
  entries returned from a search if the directory server returns more entries
  than you want.</p><pre class="codelisting prettyprint linenums lang-java">
private static final CountDownLatch COMPLETION_LATCH = new CountDownLatch(1);
private static final CountDownLatch CANCEL_LATCH = new CountDownLatch(1);
private static final LDIFEntryWriter WRITER = new LDIFEntryWriter(System.out);

static int requestID;
static int entryCount = 0;

// The requestID is obtained from the future result of the asynchronous search.
// For more context see the example, SearchAsync.java.

private static final class SearchResultHandlerImpl
        implements SearchResultHandler {

    @Override
    public synchronized boolean handleEntry(final SearchResultEntry entry) {
        try {
            // Cancel the search if it returns too many results.
            if (entryCount &lt; 10) {
                WRITER.writeComment("Search result entry: "
                        + entry.getName().toString());
                WRITER.writeEntry(entry);
                ++entryCount;
            } else {
                CancelExtendedRequest request =
                        Requests.newCancelExtendedRequest(requestID);
                connection.extendedRequestAsync(
                        request, null, new CancelResultHandlerImpl());
                return false;
            }
        } catch (final IOException e) {
            System.err.println(e.getMessage());
            resultCode = ResultCode.CLIENT_SIDE_LOCAL_ERROR.intValue();
            COMPLETION_LATCH.countDown();
            return false;
        }
        return true;
    }
    ...
}

private static final class CancelResultHandlerImpl
        implements ResultHandler&lt;ExtendedResult&gt; {

    @Override
    public void handleErrorResult(final ErrorResultException error) {
        System.err.println("Cancel request failed with result code: "
                + error.getResult().getResultCode().intValue());
        CANCEL_LATCH.countDown();
    }

    @Override
    public void handleResult(final ExtendedResult result) {
        System.err.println("Cancel request succeeded");
        CANCEL_LATCH.countDown();
    }

}
</pre><p>OpenDJ directory server supports the cancel operation. If OpenDJ
  directory server manages to return all entries in
  <code class="filename">Example.ldif</code> before it receives the Cancel extended
  request, you can see the Cancel request fail because the request ID refers
  to the search, which is no longer in progress. Try adding a new base DN using
  OpenDJ control panel and adding the default 2000 generated entries to ensure
  more search results. For example if <code class="literal">dc=example,dc=org</code>
  contains 2000 generated entries, and the <code class="literal">SearchAsync</code>
  example is run with the arguments <code class="literal">sub objectclass=* cn</code>
  for scope, filter, and attributes respectively, then the example produces
  something like the following output:</p><pre class="codelisting prettyprint">
Canceled: Processing on this operation was terminated as a result of receiving
 a cancel request (message ID 3)
# Search result entry: dc=example,dc=org
dn: dc=example,dc=org

# Search result entry: ou=People,dc=example,dc=org
dn: ou=People,dc=example,dc=org

# Search result entry: uid=user.0,ou=People,dc=example,dc=org
dn: uid=user.0,ou=People,dc=example,dc=org
cn: Aaccf Amar

...

Cancel request succeeded</pre></div><div class="section" id="use-password-modify-extended-operation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.4.&nbsp;Password Modify Extended Operation</h2></div></div></div><a class="indexterm" name="d247e3184"></a><a class="indexterm" name="d247e3189"></a><p>RFC 3062, <a class="link" href="http://tools.ietf.org/html/rfc3062" target="_blank"><em class="citetitle">LDAP Password Modify Extended
  Operation</em></a>, defines an extended operation for modifying
  user passwords that does not depend on the authentication identity, nor on
  the way passwords are stored.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(PasswordModifyExtendedRequest.OID)) {
    final String userIdentity = "u:scarter";
    final char[] oldPassword = "sprain".toCharArray();
    final char[] newPassword = "secret12".toCharArray();

    final PasswordModifyExtendedRequest request =
            Requests.newPasswordModifyExtendedRequest()
                .setUserIdentity(userIdentity)
                .setOldPassword(oldPassword)
                .setNewPassword(newPassword);

    final PasswordModifyExtendedResult result =
            connection.extendedRequest(request);
    if (result.isSuccess()) {
        System.out.println("Changed password for " + userIdentity);
    } else {
        System.err.println(result.getDiagnosticMessage());
    }
}
</pre><p>OpenDJ directory server supports the password modify operation.</p><pre class="codelisting prettyprint">Changed password for u:scarter</pre></div><div class="section" id="use-starttls-extended-operation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.5.&nbsp;Start TLS Extended Operation</h2></div></div></div><p>Use Start TLS when setting up your connection to protect what your
  application sends to and receives from the directory server. For an example,
  read the section on <a href="../dev-guide/index.html#simple-auth-with-starttls-or-ssl" class="link"><em class="citetitle">Start TLS &amp;
  SSL Authentication</em></a>.</p></div><div class="section" id="use-who-am-i-extended-operation"><div class="titlepage"><div><div><h2 class="title" style="clear: both">11.6.&nbsp;Who am I? Extended Operation</h2></div></div></div><a class="indexterm" name="d247e3218"></a><a class="indexterm" name="d247e3223"></a><p>RFC 4532, <a class="link" href="http://tools.ietf.org/html/rfc4532" target="_blank"><em class="citetitle">LDAP "Who am I?" Operation</em></a>,
  defines an extended operation that lets your application determine the
  current authorization ID.</p><pre class="codelisting prettyprint linenums lang-java">
if (isSupported(WhoAmIExtendedRequest.OID)) {

    final String name = "uid=bjensen,ou=People,dc=example,dc=com";
    final char[] password = "hifalutin".toCharArray();

    final Result result = connection.bind(name, password);
    if (result.isSuccess()) {

        final WhoAmIExtendedRequest request =
                Requests.newWhoAmIExtendedRequest();
        final WhoAmIExtendedResult extResult =
                connection.extendedRequest(request);

        if (extResult.isSuccess()) {
            System.out.println("Authz ID: "  + extResult.getAuthorizationID());
        }
    }
}
</pre><p>OpenDJ directory server supports the "Who am I?" operation.</p><pre class="codelisting prettyprint">Authz ID: dn:uid=bjensen,ou=People,dc=example,dc=com</pre></div></div><div lang="en" class="chapter" id="chap-i18n"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;12.&nbsp;Internationalizing Applications</h1></div></div></div><a class="indexterm" name="d247e3242"></a><p>When you internationalize your application &#8212; adapting your
 application for use in different languages and regions &#8212; how much you
 do depends on what you must later localize. Directory servers often support
 localized user data. OpenDJ directory server supports use of the locales
 provided by your Java installation, and also supports many language subtypes,
 for example.</p><p>Therefore if your application is not end user facing and the
 administrators managing your application all use the same language as you do,
 you might be content to use language subtypes in LDAP filters, as described
 in the section on <a href="../dev-guide/index.html#about-filters" class="link"><em class="citetitle">Working With
 Search Filters</em></a>.</p><p>For end user facing applications where you must return localized
 messages, and for applications where administrators need localized log
 messages, you can use the <a class="link" href="http://commons.forgerock.org/i18n-framework/" target="_blank">ForgeRock I18N
 Framework</a>.</p></div><div lang="en" class="chapter" id="chap-simple-proxy"><div class="titlepage"><div><div><h1 class="title">Chapter&nbsp;13.&nbsp;Writing a Simple LDAP Proxy</h1></div></div></div><a class="indexterm" name="d247e3262"></a><p>The OpenDJ LDAP SDK <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/Proxy.html" target="_blank">example Proxy</a> demonstrates a simple LDAP proxy that forwards requests
 to one or more remote directory servers. Although the implementation is
 intended as an example, it does demonstrate use of the asynchronous API,
 load balancing, and connection pooling.</p><a class="indexterm" name="d247e3272"></a><p>The Proxy example sets up connections pools with load balancing to the
 directory servers. It passes the connection factories to a
 <code class="literal">ProxyBackend</code> that handles the requests passed back
 to the directory servers. It also sets up an LDAP listener to receive incoming
 connections from clients of the Proxy.</p><p>The <code class="literal">ProxyBackend</code> uses separate connection factories,
 one for bind operations, the other for other operations. It uses the proxied
 authorization control to ensure operations are performed using the bind
 identity for the operation.</p><p>The <code class="literal">ProxyBackend</code>'s function is to handle each client
 request, encapsulating the result handlers that allow it to deal with each
 basic operation. It authenticates to the directory server to check incoming
 credentials, and adds the proxied authorization control to requests other than
 binds. The <code class="literal">ProxyBackend</code> handles all operations using
 asynchronous connections and methods.</p><div class="section" id="connection-pooling"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.1.&nbsp;Connection Pooling</h2></div></div></div><a class="indexterm" name="d247e3298"></a><p>As shown in the Proxy example, the
  <code class="literal">Connections.newFixedConnectionPool()</code> returns a connection
  pool of the maximum size you specify.</p><pre class="codelisting prettyprint linenums lang-java">final List&lt;ConnectionFactory&gt; factories = new LinkedList&lt;~&gt;();

factories.add(Connections.newFixedConnectionPool(Connections
        .newAuthenticatedConnectionFactory(Connections
                .newHeartBeatConnectionFactory(new LDAPConnectionFactory(
                        remoteAddress, remotePort)),
                        Requests.newSimpleBindRequest(proxyDN,
                                proxyPassword.toCharArray())),
                                Integer.MAX_VALUE));</pre><p>Connections are returned to the pool when you <code class="literal">close()</code>
  them. Notice that <code class="literal">Connections</code> also provides methods to
  return <code class="literal">ConnectionFactory</code>s with a heart beat check on
  connections provided by the factory, and connection factories that
  authenticate connections before returning them.</p><p>Connections in the pool are intended for reuse. The Proxy gets an
  authenticated connection, which is a connection where the OpenDJ LDAP
  SDK passes a bind request immediately when getting the connection. The Proxy
  then uses proxied authorization to handle the identity from the client
  requesting the operation. As a rule, either handle binds separately and use
  proxied authorization as in the Proxy example, or else make sure that the
  first operation on a connection retrieved from the pool is a bind that
  correctly authenticates the user currently served by the connection.</p><p>When you <code class="literal">close()</code> a connection from the pool, the
  OpenDJ LDAP SDK does not perform an <code class="literal">unbind()</code>. This is why
  you must be careful about how you manage authentication on connections from a
  pool.</p></div><div class="section" id="load-balancing-and-failover"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.2.&nbsp;Load Balancing &amp; Failover</h2></div></div></div><a class="indexterm" name="d247e3334"></a><p>The <code class="literal">Connections.newLoadBalancer()</code> method returns a
  load balancer based on the algorithm you choose. Algorithms include both
  round robin for equitably sharing load across local directory servers, and
  also failover usually used for switching automatically from an unresponsive
  server group to an alternative server group. The algorithms take collections
  of connection factories, such as those that you set up for connection
  pooling.</p><p>The following excerpt shows how to set up round robin load balancing
  across directory servers.</p><pre class="codelisting prettyprint linenums lang-java">final List&lt;ConnectionFactory&gt; factories = new LinkedList&lt;ConnectionFactory&gt;();

// Set up a ConnectionFactory for each directory server in the pool as shown in
// the previous example, and then set up a load balancer.

final RoundRobinLoadBalancingAlgorithm algorithm =
        new RoundRobinLoadBalancingAlgorithm(factories);

final ConnectionFactory factory = Connections.newLoadBalancer(algorithm);</pre><p>With multiple pools of directory servers, for example in a deployment
  across multiple data centers, also use fail over load balancing. Fail over
  load balancing directs all requests to the first (preferred) pool of servers
  until problems are encountered with the connections to that pool. Then it
  fails over to the next pool in the list. Therefore in each data center you
  can set up round robin load balancing, and then set up fail over load
  balancing across data centers.</p><pre class="codelisting prettyprint linenums lang-java">// localFactory:  ConnectionFactory to servers in the local data center
// remoteFactory: ConnectionFactory for servers in a remote data center
// localFactory and remoteFactory use round robin load balancing "internally".

final List&lt;ConnectionFactory&gt; factories =
        Arrays.asList(localFactory, remoteFactory);

final FailoverLoadBalancingAlgorithm algorithm =
        new FailoverLoadBalancingAlgorithm(factories);

final ConnectionFactory factory = Connections.newLoadBalancer(algorithm);</pre><p>The algorithms also include constructors that let you adjust timeouts
  and so forth.</p></div><div class="section" id="handling-client-connections"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.3.&nbsp;Listening For &amp; Handling Client Connections</h2></div></div></div><a class="indexterm" name="d247e3357"></a><p>You create an <code class="literal">LDAPListener</code> to handle incoming client
  connections. The <code class="literal">LDAPListener</code> takes a connection handler
  that deals with the connections, in this case connections back to the
  directory servers handling client requests.</p><pre class="codelisting prettyprint linenums lang-java">
final LDAPListenerOptions options = new LDAPListenerOptions().setBacklog(4096);
LDAPListener listener = null;
try {
    listener = new LDAPListener(localAddress, localPort, connectionHandler,
            options);
    System.out.println("Press any key to stop the server...");
    System.in.read();
} catch (final IOException e) {
    System.out.println("Error listening on " + localAddress + ":" + localPort);
    e.printStackTrace();
} finally {
    if (listener != null) {
        listener.close();
    }
}
</pre><p>You get a <code class="literal">ServerConnectionFactory</code> to handle requests
  coming from clients. The <code class="literal">ServerConnectionFactory</code> takes a
  request handler that deals with the incoming client requests. The request
  handler implements handlers for all supported operations. The Proxy example
  implements a <code class="literal">ProxyBackend</code> to handle requests. The
  <code class="literal">ProxyBackend</code> sends the requests on to the backend
  directory servers and routes the results returned back to client
  applications.</p><pre class="codelisting prettyprint linenums lang-java">
final ProxyBackend backend = new ProxyBackend(factory, bindFactory);
final ServerConnectionFactory&lt;LDAPClientContext, Integer&gt; connectionHandler =
        Connections.newServerConnectionFactory(backend);
</pre><p>See the Proxy example code for details about the
  <code class="literal">ProxyBackend</code> implementation.</p></div><div class="section" id="dn-attr-rewriting"><div class="titlepage"><div><div><h2 class="title" style="clear: both">13.4.&nbsp;DN &amp; Attribute Rewriting</h2></div></div></div><a class="indexterm" name="d247e3396"></a><p>Suppose you have a client application that expects a different
  attribute name, such as <code class="literal">fullname</code> for a standard attribute
  like <code class="literal">cn</code> (common name), and that expects a distinguished
  name (DN) suffix different from what is stored in the directory. If you
  cannot change the application, one possible alternative is a proxy layer
  that does DN and attribute rewriting.<a href="#ftn.d247e3409" class="footnote"><sup class="footnote" id="d247e3409">[9]</sup></a></p><pre class="cmdline prettyprint"># A search accessing the directory server
$ ldapsearch -b dc=example,dc=com -p 1389 "(cn=Babs Jensen)" cn
dn: uid=bjensen,ou=People,dc=example,dc=com
cn: Barbara Jensen
cn: Babs Jensen

# The same search search accessing a proxy that rewrites requests and responses
$ ldapsearch -b o=example -p 8389 "(fullname=Babs Jensen)" fullname
dn: uid=bjensen,ou=People,o=example
fullname: Barbara Jensen
fullname: Babs Jensen
</pre><p>The OpenDJ LDAP SDK <a class="link" href="http://opendj.forgerock.org/opendj-ldap-sdk-examples/xref/org/forgerock/opendj/examples/RewriterProxy.html" target="_blank">RewriterProxy</a> example builds on the Proxy example, rewriting requests
  and search result entries. When you read the example, look for the
  <code class="literal">rewrite()</code> methods.</p><p>In the above output, the rewriter proxy listens on port 8389,
  connecting to a directory server listening on 1389. The directory server
  contains data from <a class="link" href="http://opendj.forgerock.org/Example.ldif" target="_blank"><code class="filename">Example.ldif</code></a>.</p></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d247e3409" class="footnote"><p><a href="#d247e3409" class="para"><sup class="para">[9] </sup></a>Some servers, such as
  OpenDJ directory server, can do attribute rewriting without a proxy layer.
  See your directory server's documentation for details.</p></div></div></div><div class="reference" id="dev-tools-ref"><div class="titlepage"><div><div><h1 class="title">Tools Reference</h1></div></div><hr></div><div class="partintro" id="d247e3431"><div></div><p>You can find the tools under the <code class="filename">bin/</code> or
   <code class="filename">bat\</code> folder where you installed OpenDJ LDAP SDK
   toolkit as described in the procedure explaining how <a href="../dev-guide/index.html#install-latest-sdk" class="link"><em class="citetitle">To Install the
   Latest SDK &amp; Tools</em></a>. For example,
   <code class="filename">/path/to/opendj-ldap-toolkit-/bin</code>.</p></div><div lang="en" class="refentry" id="authrate-1"><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>authrate &#8212; measure bind throughput and response time</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e3469"><code class="command">authrate</code>  {options} [filter format string] [attributes...]</p></div></div><div class="refsect1" id="d247e3478"><h2>Description</h2><p>This utility can be used to measure bind throughput and response time
  of a directory service using user-defined bind or search-then-bind
  operations.</p><p>Format strings may be used in the bind DN option as well as the authid
  and authzid SASL bind options. A search operation may be used to retrieve the
  bind DN by specifying the base DN and a filter. The retrieved entry DN will
  be appended as the last argument in the argument list when evaluating format
  strings.</p></div><div class="refsect1" id="d247e3485"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --dereferencePolicy {dereferencePolicy}</code></span></dt><dd><p>Alias dereference policy ('never', 'always', 'search', or 'find')</p><p>Default value: never</p></dd><dt><span class="term"><code class="option">-b, --baseDN {baseDN}</code></span></dt><dd><p>Base DN format string</p></dd><dt><span class="term"><code class="option">-c, --numConnections {numConnections}</code></span></dt><dd><p>Number of connections</p><p>Default value: 1</p></dd><dt><span class="term"><code class="option">-e, --percentile {percentile}</code></span></dt><dd><p>Calculate max response time for a percentile of operations</p></dd><dt><span class="term"><code class="option">-f, --keepConnectionsOpen</code></span></dt><dd><p>Keep connections open</p></dd><dt><span class="term"><code class="option">-g, --argument {generator function or static string}</code></span></dt><dd><p>Argument used to evaluate the Java style format strings in program
     parameters (Base DN, Search Filter). The set of all arguments provided
     form the the argument list in order. Besides static string arguments, they
     can be generated per iteration with the following functions:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">"inc({filename})"</span></dt><dd><p>Consecutive, incremental line from file</p></dd><dt><span class="term">"inc({min},{max})"</span></dt><dd><p>Consecutive, incremental number</p></dd><dt><span class="term">"rand({filename})"</span></dt><dd><p>Random line from file</p></dd><dt><span class="term">"rand({min},{max})"</span></dt><dd><p>Random number</p></dd><dt><span class="term">"randstr({length},<em class="replaceable"><code>charSet</code></em>)"</span></dt><dd><p>Random string of specified length and optionally from
      characters in the charSet string. A range of character can be specified
      with [start-end] charSet notation. If no charSet is specified,
      the default charSet of [A-Z][a-z][0-9] will be used.</p></dd></dl></div></dd><dt><span class="term"><code class="option">-i, --statInterval {statInterval}</code></span></dt><dd><p>Display results each specified number of seconds</p><p>Default value: 5</p></dd><dt><span class="term"><code class="option">-I, --invalidPassword {invalidPassword}</code></span></dt><dd><p>Percent of bind operations with simulated invalid password</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-m, --maxIterations {maxIterations}</code></span></dt><dd><p>Max iterations, 0 for unlimited</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-M, --targetThroughput {targetThroughput}</code></span></dt><dd><p>Target average throughput to achieve</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-s, --searchScope {searchScope}</code></span></dt><dd><p>Search scope ('base', 'one', 'sub', or 'subordinate')</p><p>Default value: sub</p></dd><dt><span class="term"><code class="option">-S, --scriptFriendly</code></span></dt><dd><p>Use script-friendly mode</p></dd></dl></div><div class="refsect2" id="d247e3623"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e3759"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e3784"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e3802"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e3818"><h2>Examples</h2><p>The following example demonstrates measuring simple bind
  performance.</p><pre class="cmdline prettyprint">$ authrate -p 1389 -g "rand(names.txt)"
 -D "uid=%s,ou=people,dc=example,dc=com" -w password -c 10 -f
-----------------------------------------------------------------
     Throughput                            Response Time         
   (ops/second)                           (milliseconds)         
recent  average  recent  average  99.9%  99.99%  99.999%  err/sec
-----------------------------------------------------------------
9796.9   9816.6   1.029    1.029  12.413  161.451  161.835      0.0
14201.1  12028.1   0.704    0.835  9.508  161.456  167.573      0.0
14450.0  12835.9   0.692    0.782  8.989  161.835  174.518      0.0
12934.3  12860.6   0.773    0.779  9.253  161.339  174.426      0.0
14154.5  13121.0   0.706    0.764  9.025  161.451  177.101      0.0
^C</pre><p>The <code class="filename">names.txt</code> contains all the user IDs for the
  sample suffix, and all user password values have been set to
  <code class="literal">password</code> for this example.</p></div></div><div lang="en" class="refentry" id="ldapcompare-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldapcompare &#8212; perform LDAP compare operations</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e3855"><code class="command">ldapcompare</code>  {options} [[attribute] |  [:] |  [value]] [DN...]</p></div></div><div class="refsect1" id="d247e3869"><h2>Description</h2><p>This utility can be used to perform LDAP compare operations in the
  directory.</p></div><div class="refsect1" id="d247e3874"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--assertionFilter {filter}</code></span></dt><dd><p>Use the LDAP assertion control with the provided filter</p></dd><dt><span class="term"><code class="option">-c, --continueOnError</code></span></dt><dd><p>Continue processing even if there are errors</p></dd><dt><span class="term"><code class="option">-f, --filename {file}</code></span></dt><dd><p>LDIF file containing one DN per line of entries to compare</p></dd><dt><span class="term"><code class="option">-J, --control {controloid[:criticality[:value|::b64value|:&lt;filePath]]}</code></span></dt><dd><p>Use a request control with the provided information</p></dd><dt><span class="term"><code class="option">-n, --dry-run</code></span></dt><dd><p>Show what would be done but do not perform any operation</p></dd><dt><span class="term"><code class="option">-Y, --proxyAs {authzID}</code></span></dt><dd><p>Use the proxied authorization control with the given authorization
     ID</p></dd></dl></div><div class="refsect2" id="d247e3922"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-V, --ldapVersion {version}</code></span></dt><dd><p>LDAP protocol version number</p><p>Default value: 3</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e4067"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-i, --encoding {encoding}</code></span></dt><dd><p>Use the specified character set for command-line input</p></dd><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e4099"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e4117"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term"><em class="replaceable"><code>ldap-error</code></em></span></dt><dd><p>An LDAP error occurred while processing the operation.</p><p>LDAP result codes are described in <a class="link" href="http://tools.ietf.org/html/rfc4511#appendix-A" target="_top">RFC
      4511</a>. Also see the additional information for details.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e4145"><h2>Files</h2><p>You can use <code class="filename">~/.opendj/tools.properties</code> to set
  the defaults for bind DN, host name, and port number as in the following
  example.</p><pre class="codelisting prettyprint">hostname=directory.example.com
port=1389
bindDN=uid=kvaughan,ou=People,dc=example,dc=com

ldapcompare.port=1389
ldapdelete.port=1389
ldapmodify.port=1389
ldappasswordmodify.port=1389
ldapsearch.port=1389</pre></div><div class="refsect1" id="d247e4155"><h2>Examples</h2><p>The following examples demonstrate comparing Babs Jensen's UID.</p><p>The following example uses a matching UID value.</p><pre class="cmdline prettyprint">$ ldapcompare -p 1389 uid:bjensen uid=bjensen,ou=people,dc=example,dc=com
Comparing type uid with value bjensen in entry
uid=bjensen,ou=people,dc=example,dc=com
Compare operation returned true for entry
uid=bjensen,ou=people,dc=example,dc=com</pre><p>The following example uses a UID value that does not match.</p><pre class="cmdline prettyprint">$ ldapcompare -p 1389 uid:beavis uid=bjensen,ou=people,dc=example,dc=com
Comparing type uid with value beavis in entry
uid=bjensen,ou=people,dc=example,dc=com
Compare operation returned false for entry
uid=bjensen,ou=people,dc=example,dc=com</pre></div></div><div lang="en" class="refentry" id="ldapmodify-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldapmodify &#8212; perform LDAP modify, add, delete, mod DN operations</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e4190"><code class="command">ldapmodify</code>  {options}</p></div></div><div class="refsect1" id="d247e4195"><h2>Description</h2><p>This utility can be used to perform LDAP modify, add, delete, and
  modify DN operations in the directory.</p><p>When not using a file to specify modifications, end your input with
  EOF (Ctrl+D on UNIX, Ctrl+Z on Windows).</p></div><div class="refsect1" id="d247e4202"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --defaultAdd</code></span></dt><dd><p>Treat records with no changetype as add operations</p></dd><dt><span class="term"><code class="option">--assertionFilter {filter}</code></span></dt><dd><p>Use the LDAP assertion control with the provided filter</p></dd><dt><span class="term"><code class="option">-c, --continueOnError</code></span></dt><dd><p>Continue processing even if there are errors</p></dd><dt><span class="term"><code class="option">-f, --filename {file}</code></span></dt><dd><p>LDIF file containing the changes to apply</p></dd><dt><span class="term"><code class="option">-J, --control {controloid[:criticality[:value|::b64value|:&lt;filePath]]}</code></span></dt><dd><p>Use a request control with the provided information</p></dd><dt><span class="term"><code class="option">-n, --dry-run</code></span></dt><dd><p>Show what would be done but do not perform any operation</p></dd><dt><span class="term"><code class="option">--postReadAttributes {attrList}</code></span></dt><dd><p>Use the LDAP ReadEntry post-read control</p></dd><dt><span class="term"><code class="option">--preReadAttributes {attrList}</code></span></dt><dd><p>Use the LDAP ReadEntry pre-read control</p></dd><dt><span class="term"><code class="option">-Y, --proxyAs {authzID}</code></span></dt><dd><p>Use the proxied authorization control with the given authorization
     ID</p></dd></dl></div><div class="refsect2" id="d247e4271"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-V, --ldapVersion {version}</code></span></dt><dd><p>LDAP protocol version number</p><p>Default value: 3</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e4416"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-i, --encoding {encoding}</code></span></dt><dd><p>Use the specified character set for command-line input</p></dd><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e4448"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e4466"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term"><em class="replaceable"><code>ldap-error</code></em></span></dt><dd><p>An LDAP error occurred while processing the operation.</p><p>LDAP result codes are described in <a class="link" href="http://tools.ietf.org/html/rfc4511#appendix-A" target="_top">RFC
      4511</a>. Also see the additional information for details.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e4494"><h2>Files</h2><p>You can use <code class="filename">~/.opendj/tools.properties</code> to set
  the defaults for bind DN, host name, and port number as in the following
  example.</p><pre class="codelisting prettyprint">hostname=directory.example.com
port=1389
bindDN=uid=kvaughan,ou=People,dc=example,dc=com

ldapcompare.port=1389
ldapdelete.port=1389
ldapmodify.port=1389
ldappasswordmodify.port=1389
ldapsearch.port=1389</pre></div><div class="refsect1" id="d247e4504"><h2>Examples</h2><p>The following example demonstrates use of the command to add an entry
  to the directory.</p><pre class="cmdline prettyprint">$ cat newuser.ldif 
dn: uid=newuser,ou=People,dc=example,dc=com
uid: newuser
facsimileTelephoneNumber: +1 408 555 1213
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: top
givenName: New
cn: New User
cn: Real Name
telephoneNumber: +1 408 555 1212
sn: Jensen
roomNumber: 1234
homeDirectory: /home/newuser
uidNumber: 10389
mail: newuser@example.com
l: South Pole
ou: Product Development
ou: People
gidNumber: 10636

$ ldapmodify -p 1389 -a -f newuser.ldif
 -D uid=kvaughan,ou=people,dc=example,dc=com -w bribery
Processing ADD request for uid=newuser,ou=People,dc=example,dc=com
ADD operation successful for DN uid=newuser,ou=People,dc=example,dc=com</pre><p>The following example demonstrates adding a Description attribute
 to the new user's entry.</p><pre class="cmdline prettyprint">$ cat newdesc.ldif 
dn: uid=newuser,ou=People,dc=example,dc=com
changetype: modify
add: description
description: A new user's entry

$ ldapmodify -p 1389 -f newdesc.ldif
 -D uid=kvaughan,ou=people,dc=example,dc=com -w bribery
Processing MODIFY request for uid=newuser,ou=People,dc=example,dc=com
MODIFY operation successful for DN uid=newuser,ou=People,dc=example,dc=com</pre><p>The following example demonstrates changing the Description attribute
 for the new user's entry.</p><pre class="cmdline prettyprint">$ cat moddesc.ldif 
dn: uid=newuser,ou=People,dc=example,dc=com
changetype: modify
replace: description
description: Another description

$ ldapmodify -p 1389 -f moddesc.ldif
 -D uid=kvaughan,ou=people,dc=example,dc=com -w bribery
Processing MODIFY request for uid=newuser,ou=People,dc=example,dc=com
MODIFY operation successful for DN uid=newuser,ou=People,dc=example,dc=com</pre><p>The following example demonstrates deleting the new user's entry.</p><pre class="cmdline prettyprint">$ cat deluser.ldif 
dn: uid=newuser,ou=People,dc=example,dc=com
changetype: delete

$ ldapmodify -p 1389 -f deluser.ldif
 -D uid=kvaughan,ou=people,dc=example,dc=com -w bribery
Processing DELETE request for uid=newuser,ou=People,dc=example,dc=com
DELETE operation successful for DN uid=newuser,ou=People,dc=example,dc=com</pre></div></div><div lang="en" class="refentry" id="ldappasswordmodify-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldappasswordmodify &#8212; perform LDAP password modifications</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e4545"><code class="command">ldappasswordmodify</code>  {options}</p></div></div><div class="refsect1" id="d247e4550"><h2>Description</h2><p>This utility can be used to perform LDAP password modify operations in
  the directory.</p></div><div class="refsect1" id="d247e4555"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --authzID {authzID}</code></span></dt><dd><p>Authorization ID for the user entry whose password should be changed</p><p>The authorization ID is a string having either the prefix
     <code class="literal">dn:</code> followed by the user's distinguished name, or
     the prefix <code class="literal">u:</code> followed by a user identifier that
     depends on the identity mapping used to match the user identifier to
     an entry in the directory. Examples include
     <code class="literal">dn:uid=bjensen,ou=People,dc=example,dc=com</code>, and, if
     we assume that <code class="literal">bjensen</code> is mapped to Barbara Jensen's
     entry, <code class="literal">u:bjensen</code>.</p></dd><dt><span class="term"><code class="option">-A, --provideDNForAuthzID</code></span></dt><dd><p>Use the bind DN as the authorization ID for the password modify
     operation</p></dd><dt><span class="term"><code class="option">-c, --currentPassword {currentPassword}</code></span></dt><dd><p>Current password for the target user</p></dd><dt><span class="term"><code class="option">-C, --currentPasswordFile {file}</code></span></dt><dd><p>Path to a file containing the current password for the target user</p></dd><dt><span class="term"><code class="option">-F, --newPasswordFile {file}</code></span></dt><dd><p>Path to a file containing the new password to provide for the
     target user</p></dd><dt><span class="term"><code class="option">-J, --control {controloid[:criticality[:value|::b64value|:&lt;filePath]]}</code></span></dt><dd><p>Use a request control with the provided information</p></dd><dt><span class="term"><code class="option">-n, --newPassword {newPassword}</code></span></dt><dd><p>New password to provide for the target user</p></dd></dl></div><div class="refsect2" id="d247e4627"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-V, --ldapVersion {version}</code></span></dt><dd><p>LDAP protocol version number</p><p>Default value: 3</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e4772"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e4804"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e4822"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term"><em class="replaceable"><code>ldap-error</code></em></span></dt><dd><p>An LDAP error occurred while processing the operation.</p><p>LDAP result codes are described in <a class="link" href="http://tools.ietf.org/html/rfc4511#appendix-A" target="_top">RFC
      4511</a>. Also see the additional information for details.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e4850"><h2>Files</h2><p>You can use <code class="filename">~/.opendj/tools.properties</code> to set
  the defaults for bind DN, host name, and port number as in the following
  example.</p><pre class="codelisting prettyprint">hostname=directory.example.com
port=1389
bindDN=uid=kvaughan,ou=People,dc=example,dc=com

ldapcompare.port=1389
ldapdelete.port=1389
ldapmodify.port=1389
ldappasswordmodify.port=1389
ldapsearch.port=1389</pre></div><div class="refsect1" id="d247e4860"><h2>Examples</h2><p>The following example demonstrates a user changing the password
  for her entry.</p><pre class="cmdline prettyprint">$ cat /tmp/currpwd.txt /tmp/newpwd.txt
bribery
secret12
$ ldappasswordmodify -p 1389 -C /tmp/currpwd.txt -N /tmp/newpwd.txt
-A -D uid=kvaughan,ou=people,dc=example,dc=com -w bribery
The LDAP password modify operation was successful</pre></div></div><div lang="en" class="refentry" id="ldapsearch-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldapsearch &#8212; perform LDAP search operations</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e4889"><code class="command">ldapsearch</code>  {options} [filter] [attributes...]</p></div></div><div class="refsect1" id="d247e4898"><h2>Description</h2><p>This utility can be used to perform LDAP search operations in the
  directory.</p></div><div class="refsect1" id="d247e4903"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --dereferencePolicy {dereferencePolicy}</code></span></dt><dd><p>Alias dereference policy ('never', 'always', 'search', or 'find')</p><p>Default value: never</p></dd><dt><span class="term"><code class="option">-A, --typesOnly</code></span></dt><dd><p>Only retrieve attribute names but not their values</p></dd><dt><span class="term"><code class="option">--assertionFilter {filter}</code></span></dt><dd><p>Use the LDAP assertion control with the provided filter</p></dd><dt><span class="term"><code class="option">-b, --baseDN {baseDN}</code></span></dt><dd><p>Base DN format string</p></dd><dt><span class="term"><code class="option">-c, --continueOnError</code></span></dt><dd><p>Continue processing even if there are errors</p></dd><dt><span class="term"><code class="option">-C, --persistentSearch ps[:changetype[:changesonly[:entrychgcontrols]]]</code></span></dt><dd><p>Use the persistent search control</p></dd><dt><span class="term"><code class="option">--countEntries</code></span></dt><dd><p>Count the number of entries returned by the server</p></dd><dt><span class="term"><code class="option">-e, --getEffectiveRightsAttribute {attribute}</code></span></dt><dd><p>Specifies geteffectiverights control specific attribute list</p></dd><dt><span class="term"><code class="option">-f, --filename {file}</code></span></dt><dd><p>LDIF file containing the changes to apply</p></dd><dt><span class="term"><code class="option">-g, --getEffectiveRightsAuthzid {authzID}</code></span></dt><dd><p>Use geteffectiverights control with the provided authzid</p></dd><dt><span class="term"><code class="option">-G, --virtualListView {before:after:index:count | before:after:value}</code></span></dt><dd><p>Use the virtual list view control to retrieve the specified results page</p></dd><dt><span class="term"><code class="option">-J, --control {controloid[:criticality[:value|::b64value|:&lt;filePath]]}</code></span></dt><dd><p>Use a request control with the provided information</p></dd><dt><span class="term"><code class="option">-l, --timeLimit {timeLimit}</code></span></dt><dd><p>Maximum length of time in seconds to allow for the search</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">--matchedValuesFilter {filter}</code></span></dt><dd><p>Use the LDAP matched values control with the provided filter</p></dd><dt><span class="term"><code class="option">-n, --dry-run</code></span></dt><dd><p>Show what would be done but do not perform any operation</p></dd><dt><span class="term"><code class="option">-s, --searchScope {searchScope}</code></span></dt><dd><p>Search scope ('base', 'one', 'sub', or 'subordinate')</p><p>Default value: sub</p><p><code class="literal">subordinate</code> is an LDAP extension that might
     not work with all LDAP servers.</p></dd><dt><span class="term"><code class="option">-S, --sortOrder {sortOrder}</code></span></dt><dd><p>Sort the results using the provided sort order</p></dd><dt><span class="term"><code class="option">--simplePageSize {numEntries}</code></span></dt><dd><p>Use the simple paged results control with the given page size</p><p>Default value: 1000</p></dd><dt><span class="term"><code class="option">-Y, --proxyAs {authzID}</code></span></dt><dd><p>Use the proxied authorization control with the given authorization
     ID</p></dd><dt><span class="term"><code class="option">-z, --sizeLimit {sizeLimit}</code></span></dt><dd><p>Maximum number of entries to return from the search</p><p>Default value: 0</p></dd></dl></div><div class="refsect2" id="d247e5063"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-V, --ldapVersion {version}</code></span></dt><dd><p>LDAP protocol version number</p><p>Default value: 3</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e5208"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-i, --encoding {encoding}</code></span></dt><dd><p>Use the specified character set for command-line input</p></dd><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-t, --dontWrap</code></span></dt><dd><p>Do not wrap long lines</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e5247"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e5265"><h2>Filter</h2><p>The filter argument is a string representation of an LDAP search filter
  as in <code class="literal">(cn=Babs Jensen)</code>, <code class="literal">(&amp;(objectClass=Person)(|(sn=Jensen)(cn=Babs J*)))</code>, or
  <code class="literal">(cn:caseExactMatch:=Fred Flintstone)</code>.</p></div><div class="refsect1" id="d247e5279"><h2>Attribute</h2><p>The optional attribute list specifies the attributes to return in the
  entries found by the search. In addition to identifying attributes by name
  such as <code class="literal">cn sn mail</code> and so forth, you can use the following
  notations, too.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">*</code></span></dt><dd><p>Return all user attributes such as <code class="literal">cn</code>,
     <code class="literal">sn</code>, and <code class="literal">mail</code>.</p></dd><dt><span class="term"><code class="literal">+</code></span></dt><dd><p>Return all operational attributes such as <code class="literal">etag</code>
     and <code class="literal">pwdPolicySubentry</code>.</p></dd><dt><span class="term"><code class="literal">@<em class="replaceable"><code>objectclass</code></em></code></span></dt><dd><p>Return all attributes of the specified object class, where
     <em class="replaceable"><code>objectclass</code></em> is one of the object classes
     on the entries returned by the search.</p></dd></dl></div></div><div class="refsect1" id="d247e5329"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term"><em class="replaceable"><code>ldap-error</code></em></span></dt><dd><p>An LDAP error occurred while processing the operation.</p><p>LDAP result codes are described in <a class="link" href="http://tools.ietf.org/html/rfc4511#appendix-A" target="_top">RFC
      4511</a>. Also see the additional information for details.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e5357"><h2>Files</h2><p>You can use <code class="filename">~/.opendj/tools.properties</code> to set
  the defaults for bind DN, host name, and port number as in the following
  example.</p><pre class="codelisting prettyprint">hostname=directory.example.com
port=1389
bindDN=uid=kvaughan,ou=People,dc=example,dc=com

ldapcompare.port=1389
ldapdelete.port=1389
ldapmodify.port=1389
ldappasswordmodify.port=1389
ldapsearch.port=1389</pre></div><div class="refsect1" id="d247e5367"><h2>Examples</h2><p>The following example searches for entries with UID containing
  <code class="literal">jensen</code>, returning only DNs and uid values.</p><pre class="cmdline prettyprint">$ ldapsearch -p 1389 -b dc=example,dc=com "(uid=*jensen*)" uid
dn: uid=ajensen,ou=People,dc=example,dc=com
uid: ajensen

dn: uid=bjensen,ou=People,dc=example,dc=com
uid: bjensen

dn: uid=gjensen,ou=People,dc=example,dc=com
uid: gjensen

dn: uid=jjensen,ou=People,dc=example,dc=com
uid: jjensen

dn: uid=kjensen,ou=People,dc=example,dc=com
uid: kjensen

dn: uid=rjensen,ou=People,dc=example,dc=com
uid: rjensen

dn: uid=tjensen,ou=People,dc=example,dc=com
uid: tjensen


Result Code:  0 (Success)</pre><p>You can also use <code class="literal">@<em class="replaceable"><code>objectclass</code></em></code> notation in the attribute list to return
  the attributes of a particular object class. The following example shows
  how to return attributes of the <code class="literal">inetOrgPerson</code> object
  class.</p><pre class="cmdline prettyprint">$ ldapsearch -p 1389 -b dc=example,dc=com "(uid=bjensen)" @inetorgperson
dn: uid=bjensen,ou=People,dc=example,dc=com
givenName: Barbara
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: top
uid: bjensen
cn: Barbara Jensen
cn: Babs Jensen
telephoneNumber: +1 408 555 1862
sn: Jensen
roomNumber: 0209
mail: bjensen@example.com
l: Cupertino
ou: Product Development
ou: People
facsimileTelephoneNumber: +1 408 555 1992</pre><p>You can use <code class="literal">+</code> in the attribute list to return
  all operational attributes, as in the following example.</p><pre class="cmdline prettyprint">$ ldapsearch -p 1389 -b dc=example,dc=com "(uid=bjensen)" +
dn: uid=bjensen,ou=People,dc=example,dc=com
numSubordinates: 0
structuralObjectClass: inetOrgPerson
etag: 0000000073c29972
pwdPolicySubentry: cn=Default Password Policy,cn=Password Policies,cn=config
subschemaSubentry: cn=schema
hasSubordinates: false
entryDN: uid=bjensen,ou=people,dc=example,dc=com
entryUUID: fc252fd9-b982-3ed6-b42a-c76d2546312c</pre></div></div><div lang="en" class="refentry" id="ldifdiff-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldifdiff &#8212; compare small LDIF files</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e5418"><code class="command">ldifdiff</code>  [options]  <em class="replaceable"><code>source</code></em>.ldif   <em class="replaceable"><code>target</code></em>.ldif </p></div></div><div class="refsect1" id="d247e5431"><h2>Description</h2><p>This utility can be used to compare two LDIF files and report the
  differences in LDIF format.</p></div><div class="refsect1" id="d247e5436"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --ignoreAttrs {file}</code></span></dt><dd><p>File containing a list of attributes to ignore when computing the
     difference.</p></dd><dt><span class="term"><code class="option">--checkSchema</code></span></dt><dd><p>Takes into account the syntax of the attributes as defined in the
     schema to make the value comparison. The provided LDIF files must conform
     to the server schema.</p></dd><dt><span class="term"><code class="option">-e, --ignoreEntries {file}</code></span></dt><dd><p>File containing a list of entries (DN) to ignore when computing the
     difference.</p></dd><dt><span class="term"><code class="option">-S, --singleValueChanges</code></span></dt><dd><p>Each attribute-level change should be written as a separate
     modification per attribute value rather than one modification per
     entry.</p></dd><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information.</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information.</p></dd></dl></div></div><div class="refsect1" id="d247e5484"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">&gt; 0</span></dt><dd><p>An error occurred.</p></dd></dl></div></div><div class="refsect1" id="d247e5500"><h2>Examples</h2><p>The following example demonstrates use of the command with two
  small LDIF files.</p><pre class="cmdline prettyprint">$ cat /path/to/newuser.ldif
dn: uid=newuser,ou=People,dc=example,dc=com
uid: newuser
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: top
cn: New User
sn: User
ou: People
mail: newuser@example.com
userPassword: changeme

$ cat /path/to/neweruser.ldif
dn: uid=newuser,ou=People,dc=example,dc=com
uid: newuser
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: top
cn: New User
sn: User
ou: People
mail: newuser@example.com
userPassword: secret12
description: A new description.

$ ldifdiff /path/to/newuser.ldif /path/to/neweruser.ldif
dn: uid=newuser,ou=People,dc=example,dc=com
changetype: modify
add: userPassword
userPassword: secret12
-
delete: userPassword
userPassword: changeme
-
add: description
description: A new description.
</pre></div></div><div lang="en" class="refentry" id="ldifmodify-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldifmodify &#8212; apply LDIF changes to LDIF</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e5529"><code class="command">ldifmodify</code>  {options}  source  [changes]</p></div></div><div class="refsect1" id="d247e5538"><h2>Description</h2><p>This utility can be used to apply a set of modify, add, and delete
  operations against data in an LDIF file.</p></div><div class="refsect1" id="d247e5543"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c, --continueOnError</code></span></dt><dd><p>Continue processing even if there are errors</p></dd><dt><span class="term"><code class="option">-o, --outputLDIF {file}</code></span></dt><dd><p>Write updated entries to {file} instead of stdout</p><p>Default value: stdout</p></dd><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information.</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information.</p></dd></dl></div></div><div class="refsect1" id="d247e5579"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">&gt; 0</span></dt><dd><p>An error occurred.</p></dd></dl></div></div><div class="refsect1" id="d247e5595"><h2>Examples</h2><p>The following example demonstrates use of the command.</p><pre class="cmdline prettyprint">$ cat /path/to/newuser.ldif
dn: uid=newuser,ou=People,dc=example,dc=com
uid: newuser
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: top
cn: New User
sn: User
ou: People
mail: newuser@example.com
userPassword: changeme

$ cat /path/to/newdiff.ldif
dn: uid=newuser,ou=People,dc=example,dc=com
changetype: modify
add: userPassword
userPassword: secret12
-
delete: userPassword
userPassword: changeme
-
add: description
description: A new description.

$ ldifmodify -o neweruser.ldif /path/to/newuser.ldif /path/to/newdiff.ldif
$ cat neweruser.ldif 
dn: uid=newuser,ou=People,dc=example,dc=com
uid: newuser
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: top
cn: New User
sn: User
ou: People
mail: newuser@example.com
userPassword: secret12
description: A new description.
</pre></div></div><div lang="en" class="refentry" id="ldifsearch-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldifsearch &#8212; search LDIF with LDAP filters</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e5624"><code class="command">ldifsearch</code>  {options}  source  [filter] [attribute...]</p></div></div><div class="refsect1" id="d247e5635"><h2>Description</h2><p>This utility can be used to perform search operations against data in
  an LDIF file.</p></div><div class="refsect1" id="d247e5640"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-A, --typesOnly</code></span></dt><dd><p>Only retrieve attribute names but not their values</p></dd><dt><span class="term"><code class="option">-b, --baseDN {baseDN}</code></span></dt><dd><p>Search base DN</p></dd><dt><span class="term"><code class="option">-f, --filterFile {filterFile}</code></span></dt><dd><p>File containing a list of search filter strings</p></dd><dt><span class="term"><code class="option">-l, --timeLimit {timeLimit}</code></span></dt><dd><p>Maximum length of time in seconds to allow for the search</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-o, --outputFile {File}</code></span></dt><dd><p>Write search results to {file} instead of stdout</p><p>Default: stdout</p></dd><dt><span class="term"><code class="option">-s, --searchScope {scope}</code></span></dt><dd><p>Search scope ('base', 'one', 'sub', or 'subordinate')</p><p>Default value: sub</p></dd><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information.</p></dd><dt><span class="term"><code class="option">-z, --sizeLimit {sizeLimit}</code></span></dt><dd><p>Maximum number of matching entries to return from the search</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information.</p></dd></dl></div></div><div class="refsect1" id="d247e5717"><h2>Filter</h2><p>The filter argument is a string representation of an LDAP search filter
  as in <code class="literal">(cn=Babs Jensen)</code>, <code class="literal">(&amp;(objectClass=Person)(|(sn=Jensen)(cn=Babs J*)))</code>, or
  <code class="literal">(cn:caseExactMatch:=Fred Flintstone)</code>.</p></div><div class="refsect1" id="d247e5731"><h2>Attribute</h2><p>The optional attribute list specifies the attributes to return in the
  entries found by the search. In addition to identifying attributes by name
  such as <code class="literal">cn sn mail</code> and so forth, you can use the following
  notations, too.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">*</code></span></dt><dd><p>Return all user attributes such as <code class="literal">cn</code>,
     <code class="literal">sn</code>, and <code class="literal">mail</code>.</p></dd><dt><span class="term"><code class="literal">+</code></span></dt><dd><p>Return all operational attributes such as <code class="literal">etag</code>
     and <code class="literal">pwdPolicySubentry</code>.</p></dd><dt><span class="term"><code class="literal">@<em class="replaceable"><code>objectclass</code></em></code></span></dt><dd><p>Return all attributes of the specified object class, where
     <em class="replaceable"><code>objectclass</code></em> is one of the object classes
     on the entries returned by the search.</p></dd></dl></div></div><div class="refsect1" id="d247e5781"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">&gt; 0</span></dt><dd><p>An error occurred.</p></dd></dl></div></div><div class="refsect1" id="d247e5797"><h2>Examples</h2><p>The following example demonstrates use of the command.</p><pre class="cmdline prettyprint">$ ldifsearch -b dc=example,dc=com /path/to/Example.ldif uid=bjensen
dn: uid=bjensen,ou=People,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: top
uid: bjensen
userpassword: hifalutin
facsimiletelephonenumber: +1 408 555 1992
givenname: Barbara
cn: Barbara Jensen
cn: Babs Jensen
telephonenumber: +1 408 555 1862
sn: Jensen
roomnumber: 0209
homeDirectory: /home/bjensen
mail: bjensen@example.com
l: Cupertino
ou: Product Development
ou: People
uidNumber: 1076
gidNumber: 1000
</pre><p>You can also use <code class="literal">@<em class="replaceable"><code>objectclass</code></em></code> notation in the attribute list to return
  the attributes of a particular object class. The following example shows
  how to return attributes of the <code class="literal">posixAccount</code> object
  class.</p><pre class="cmdline prettyprint">$ ldifsearch --ldifFile /path/to/Example.ldif
 --baseDN dc=example,dc=com "(uid=bjensen)" @posixaccount
dn: uid=bjensen,ou=People,dc=example,dc=com
objectClass: person
objectClass: organizationalPerson
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: top
uid: bjensen
userpassword: hifalutin
cn: Barbara Jensen
cn: Babs Jensen
homeDirectory: /home/bjensen
uidNumber: 1076
gidNumber: 1000</pre></div></div><div lang="en" class="refentry" id="modrate-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>modrate &#8212; measure modification throughput and response time</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e5838"><code class="command">modrate</code>  {options} [[attribute] |  [:] |  [value format string]...]</p></div></div><div class="refsect1" id="d247e5850"><h2>Description</h2><p>This utility can be used to measure modify throughput and response time
  of a directory service using user-defined modifications.</p></div><div class="refsect1" id="d247e5855"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-A, --asynchronous</code></span></dt><dd><p>Use asynchronous mode and don't wait for results before sending the
     next request</p></dd><dt><span class="term"><code class="option">-b, --baseDN {baseDN}</code></span></dt><dd><p>Base DN format string</p></dd><dt><span class="term"><code class="option">-c, --numConnections {numConnections}</code></span></dt><dd><p>Number of connections</p><p>Default value: 1</p></dd><dt><span class="term"><code class="option">-e, --percentile {percentile}</code></span></dt><dd><p>Calculate max response time for a percentile of operations</p></dd><dt><span class="term"><code class="option">-f, --keepConnectionsOpen</code></span></dt><dd><p>Keep connections open</p></dd><dt><span class="term"><code class="option">-F, --noRebind</code></span></dt><dd><p>Keep connections open and don't rebind</p></dd><dt><span class="term"><code class="option">-g, --argument {generator function or static string}</code></span></dt><dd><p>Argument used to evaluate the Java style format strings in program
     parameters (Base DN, Search Filter). The set of all arguments provided
     form the the argument list in order. Besides static string arguments, they
     can be generated per iteration with the following functions:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">"inc({filename})"</span></dt><dd><p>Consecutive, incremental line from file</p></dd><dt><span class="term">"inc({min},{max})"</span></dt><dd><p>Consecutive, incremental number</p></dd><dt><span class="term">"rand({filename})"</span></dt><dd><p>Random line from file</p></dd><dt><span class="term">"rand({min},{max})"</span></dt><dd><p>Random number</p></dd><dt><span class="term">"randstr({length},<em class="replaceable"><code>charSet</code></em>)"</span></dt><dd><p>Random string of specified length and optionally from
      characters in the charSet string. A range of character can be specified
      with [start-end] charSet notation. If no charSet is specified,
      the default charSet of [A-Z][a-z][0-9] will be used.</p></dd></dl></div></dd><dt><span class="term"><code class="option">-i, --statInterval {statInterval}</code></span></dt><dd><p>Display results each specified number of seconds</p><p>Default value: 5</p></dd><dt><span class="term"><code class="option">-m, --maxIterations {maxIterations}</code></span></dt><dd><p>Max iterations, 0 for unlimited</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-M, --targetThroughput {targetThroughput}</code></span></dt><dd><p>Target average throughput to achieve</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-S, --scriptFriendly</code></span></dt><dd><p>Use script-friendly mode</p></dd><dt><span class="term"><code class="option">-t, --numConcurrentTasks {numConcurrentTasks}</code></span></dt><dd><p>Number of concurrent tasks per connection</p><p>Default value: 1</p></dd></dl></div><div class="refsect2" id="d247e5989"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e6125"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e6150"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e6168"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e6184"><h2>Examples</h2><p>The following example demonstrates testing directory performance by
  using the modrate command to write random 16-character description values
  to all entries in a sample file.</p><pre class="cmdline prettyprint">$ grep ^uid: /path/to/Example.ldif | sed -e "s/uid: //" &gt; names.txt
$ modrate -p 1389 -D "cn=Directory Manager" -w password  -A -F -c 4 -t 4
 -b "uid=%s,ou=people,dc=example,dc=com" -g "rand(names.txt)"
 -g "randstr(16)" 'description:%2$s'
--------------------------------------------------------------------------
     Throughput                            Response Time                  
   (ops/second)                           (milliseconds)                  
recent  average  recent  average  99.9%  99.99%  99.999%  err/sec  req/res
--------------------------------------------------------------------------
1085.9   1088.5  993.849  993.849  2135.220  2510.361  2510.361  0.0  2.3
2086.7   1648.8  1963.980  1683.038  3015.025  3078.628  3215.050  0.0  1.0
3097.3   2092.6  1332.930  1524.278  2940.131  3024.811  3215.050  0.0  1.0
3848.3   2501.4  1045.000  1352.583  2902.235  3015.863  3215.050  0.0  1.0
3641.2   2717.4  1106.157  1290.003  2901.379  3015.597  3215.050  0.0  1.0
3759.4   2883.0  1065.732  1243.534  2900.400  3015.501  3215.050  0.0  1.0
^C</pre></div></div><div lang="en" class="refentry" id="searchrate-1"><div class="refentry.separator"><hr></div><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>searchrate &#8212; measure search throughput and response time</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p id="d247e6213"><code class="command">searchrate</code>  {options} [filter format string] [attributes...]</p></div></div><div class="refsect1" id="d247e6222"><h2>Description</h2><p>This utility can be used to measure search throughput and response time
  of a directory service using user-defined searches.</p></div><div class="refsect1" id="d247e6227"><h2>Options</h2><p>The following options are supported.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-a, --dereferencePolicy {dereferencePolicy}</code></span></dt><dd><p>Alias dereference policy ('never', 'always', 'search', or 'find')</p><p>Default value: never</p></dd><dt><span class="term"><code class="option">-A, --asynchronous</code></span></dt><dd><p>Use asynchronous mode and don't wait for results before sending the
     next request</p></dd><dt><span class="term"><code class="option">-b, --baseDN {baseDN}</code></span></dt><dd><p>Base DN format string</p></dd><dt><span class="term"><code class="option">-c, --numConnections {numConnections}</code></span></dt><dd><p>Number of connections</p><p>Default value: 1</p></dd><dt><span class="term"><code class="option">-e, --percentile {percentile}</code></span></dt><dd><p>Calculate max response time for a percentile of operations</p></dd><dt><span class="term"><code class="option">-f, --keepConnectionsOpen</code></span></dt><dd><p>Keep connections open</p></dd><dt><span class="term"><code class="option">-F, --noRebind</code></span></dt><dd><p>Keep connections open and don't rebind</p></dd><dt><span class="term"><code class="option">-g, --argument {generator function or static string}</code></span></dt><dd><p>Argument used to evaluate the Java style format strings in program
     parameters (Base DN, Search Filter). The set of all arguments provided
     form the the argument list in order. Besides static string arguments, they
     can be generated per iteration with the following functions:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">"inc({filename})"</span></dt><dd><p>Consecutive, incremental line from file</p></dd><dt><span class="term">"inc({min},{max})"</span></dt><dd><p>Consecutive, incremental number</p></dd><dt><span class="term">"rand({filename})"</span></dt><dd><p>Random line from file</p></dd><dt><span class="term">"rand({min},{max})"</span></dt><dd><p>Random number</p></dd><dt><span class="term">"randstr({length},<em class="replaceable"><code>charSet</code></em>)"</span></dt><dd><p>Random string of specified length and optionally from
      characters in the charSet string. A range of character can be specified
      with [start-end] charSet notation. If no charSet is specified,
      the default charSet of [A-Z][a-z][0-9] will be used.</p></dd></dl></div></dd><dt><span class="term"><code class="option">-i, --statInterval {statInterval}</code></span></dt><dd><p>Display results each specified number of seconds</p><p>Default value: 5</p></dd><dt><span class="term"><code class="option">-m, --maxIterations {maxIterations}</code></span></dt><dd><p>Max iterations, 0 for unlimited</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-M, --targetThroughput {targetThroughput}</code></span></dt><dd><p>Target average throughput to achieve</p><p>Default value: 0</p></dd><dt><span class="term"><code class="option">-s, --searchScope {searchScope}</code></span></dt><dd><p>Search scope ('base', 'one', 'sub', or 'subordinate')</p><p>Default value: sub</p></dd><dt><span class="term"><code class="option">-S, --scriptFriendly</code></span></dt><dd><p>Use script-friendly mode</p></dd><dt><span class="term"><code class="option">-t, --numConcurrentTasks {numConcurrentTasks}</code></span></dt><dd><p>Number of concurrent tasks per connection</p><p>Default value: 1</p></dd></dl></div><div class="refsect2" id="d247e6379"><h3>LDAP Connection Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-D, --bindDN {bindDN}</code></span></dt><dd><p>DN to use to bind to the server</p><p>Default value: cn=Directory Manager</p></dd><dt><span class="term"><code class="option">-E, --reportAuthzID</code></span></dt><dd><p>Use the authorization identity control</p></dd><dt><span class="term"><code class="option">-h, --hostname {host}</code></span></dt><dd><p>Directory server hostname or IP address</p><p>Default value: localhost.localdomain</p></dd><dt><span class="term"><code class="option">-j, --bindPasswordFile {bindPasswordFile}</code></span></dt><dd><p>Bind password file</p></dd><dt><span class="term"><code class="option">-K, --keyStorePath {keyStorePath}</code></span></dt><dd><p> Certificate key store path</p></dd><dt><span class="term"><code class="option">-N, --certNickname {nickname}</code></span></dt><dd><p>Nickname of certificate for SSL client authentication</p></dd><dt><span class="term"><code class="option">-o, --saslOption {name=value}</code></span></dt><dd><p>SASL bind options</p></dd><dt><span class="term"><code class="option">-p, --port {port}</code></span></dt><dd><p>Directory server port number</p><p>Default value: 389</p></dd><dt><span class="term"><code class="option">-P, --trustStorePath {trustStorePath}</code></span></dt><dd><p>Certificate trust store path</p></dd><dt><span class="term"><code class="option">-q, --useStartTLS</code></span></dt><dd><p>Use StartTLS to secure communication with the server</p></dd><dt><span class="term"><code class="option">-T, --trustStorePassword {trustStorePassword}</code></span></dt><dd><p>Certificate trust store PIN</p></dd><dt><span class="term"><code class="option">-u, --keyStorePasswordFile {keyStorePasswordFile}</code></span></dt><dd><p>Certificate key store PIN file</p></dd><dt><span class="term"><code class="option">-U, --trustStorePasswordFile {path}</code></span></dt><dd><p>Certificate trust store PIN file</p></dd><dt><span class="term"><code class="option">--usePasswordPolicyControl</code></span></dt><dd><p>Use the password policy request control</p></dd><dt><span class="term"><code class="option">-w, --bindPassword {bindPassword}</code></span></dt><dd><p>Password to use to bind to the server</p></dd><dt><span class="term"><code class="option">-W, --keyStorePassword {keyStorePassword}</code></span></dt><dd><p>Certificate key store PIN</p></dd><dt><span class="term"><code class="option">-X, --trustAll</code></span></dt><dd><p>Trust all server SSL certificates</p></dd><dt><span class="term"><code class="option">-Z, --useSSL</code></span></dt><dd><p>Use SSL for secure communication with the server</p></dd></dl></div></div><div class="refsect2" id="d247e6515"><h3>Utility Input/Output Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">--noPropertiesFile</code></span></dt><dd><p>No properties file will be used to get default command line
      argument values</p></dd><dt><span class="term"><code class="option">--propertiesFilePath {propertiesFilePath}</code></span></dt><dd><p>Path to the file containing default property values used for
      command line arguments</p></dd><dt><span class="term"><code class="option">-v, --verbose</code></span></dt><dd><p>Use verbose mode</p></dd></dl></div></div><div class="refsect2" id="d247e6540"><h3>General Options</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-V, --version</code></span></dt><dd><p>Display version information</p></dd><dt><span class="term"><code class="option">-?, -H, --help</code></span></dt><dd><p>Display usage information</p></dd></dl></div></div></div><div class="refsect1" id="d247e6558"><h2>Exit Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd><p>The command completed successfully.</p></dd><dt><span class="term">89</span></dt><dd><p>An error occurred while parsing the command-line arguments.</p></dd></dl></div></div><div class="refsect1" id="d247e6574"><h2>Examples</h2><p>The following example demonstrates measuring search performance.</p><pre class="cmdline prettyprint">$ grep ^uid: /path/to/Example.ldif | sed -e "s/uid: //" &gt; names.txt
$ searchrate -p 1389 -b dc=example,dc=com -A -F -c 4 -t 4
 -g "rand(names.txt)" "(uid=%s)"
-------------------------------------------------------------------------------
     Throughput                            Response Time                       
   (ops/second)                           (milliseconds)                       
recent  average  recent  average  99.9%  99.99%  99.999%  err/sec  Entries/Srch
-------------------------------------------------------------------------------
1475.9   1475.9   0.423    0.423  6.938  126.236 126.236      0.0           1.0
2596.5   2038.4   0.254    0.315  6.866  12.980  126.236      0.0           1.0
3210.7   2428.2   0.205    0.267  5.733  11.710  126.236      0.0           1.0
3080.5   2591.0   0.215    0.252  5.733  10.541  126.236      0.0           1.0
3236.9   2720.1   0.203    0.240  5.258  10.514  126.236      0.0           1.0
3181.1   2796.8   0.207    0.234  5.258  10.384  126.236      0.0           1.0
3202.5   2854.8   0.206    0.229  4.825  10.384  126.236      0.0           1.0
^C</pre></div></div></div><div lang="en" class="glossary" id="glossary"><div class="titlepage"><div><div><h1 class="title">OpenDJ Glossary</h1></div></div></div><dl><dt><span class="glossterm">Abandon operation</span></dt><dd class="glossdef"><p>LDAP operation to stop processing of a request in progress, after
   which the directory server drops the connection without a reply to the
   client application.</p></dd><dt><span class="glossterm">Access control</span></dt><dd class="glossdef"><p>Control to grant or to deny access to a resource.</p></dd><dt id="access-control-instruction"><span class="glossterm">Access control instruction (ACI)</span></dt><dd class="glossdef"><p>Instruction added as a directory entry attribute for fine-grained
   control over what a given user or group member is authorized to do in terms
   of LDAP operations and access to user data.</p><p>ACIs are implemented independently from privileges, which apply to
   administrative operations.</p><p>See Also <a class="glossseealso" href="#privilege">Privilege</a>.</p></dd><dt><span class="glossterm">Access control list (ACL)</span></dt><dd class="glossdef"><p>An access control list connects a user or group of users to one or
   more security entitlements. For example, users in group "sales" are granted
   the entitlement "read-only" to some financial data.</p></dd><dt><span class="glossterm"><code class="filename">access</code> log</span></dt><dd class="glossdef"><p>Directory server log tracing the operations the server processes
   including timestamps, connection information, and information about the
   operation itself.</p></dd><dt><span class="glossterm">Account lockout</span></dt><dd class="glossdef"><p>The act of making an account temporarily or permanently inactive
   after successive authentication failures.</p></dd><dt><span class="glossterm">Active user</span></dt><dd class="glossdef"><p>A user that has the ability to authenticate and use the services,
   having valid credentials.</p></dd><dt><span class="glossterm">Add operation</span></dt><dd class="glossdef"><p>LDAP operation to add a new entry or entries to the directory.</p></dd><dt><span class="glossterm">Anonymous</span></dt><dd class="glossdef"><p>A user that does not need to authenticate, and is unknown to the
   system.</p></dd><dt><span class="glossterm">Anonymous bind</span></dt><dd class="glossdef"><p>A bind operation using simple authentication with an empty DN and an
   empty password, allowing "anonymous" access such as reading public
   information.</p></dd><dt id="approximate-index"><span class="glossterm">Approximate index</span></dt><dd class="glossdef"><p>Index is used to match values that "sound like" those provided in the
   filter.</p></dd><dt><span class="glossterm">Attribute</span></dt><dd class="glossdef"><p>Properties of a directory entry, stored as one or more key-value pairs.
   Typical examples include the common name (<code class="literal">cn</code>) to store
   the user's full name and variations of the name, user ID
   (<code class="literal">uid</code>) to store a unique identifier for the entry, and
   <code class="literal">mail</code> to store email addresses.</p></dd><dt><span class="glossterm"><code class="filename">audit</code> log</span></dt><dd class="glossdef"><p>Type of access log that dumps changes in LDIF.</p></dd><dt><span class="glossterm">Authentication</span></dt><dd class="glossdef"><p>The process of verifying who is requesting access to a resource; the
   act of confirming the identity of a principal.</p></dd><dt><span class="glossterm">Authorization</span></dt><dd class="glossdef"><p>The process of determining whether access should be granted to an
   individual based on information about that individual; the act of
   determining whether to grant or to deny a principal access to a
   resource.</p></dd><dt><span class="glossterm">Backend</span></dt><dd class="glossdef"><p>Repository that a directory server can access to store data. Different
   implementations with different capabilities exist.</p></dd><dt><span class="glossterm">Binary copy</span></dt><dd class="glossdef"><p>Binary backup archive of one directory server that can be restored on
   another directory server.</p></dd><dt><span class="glossterm">Bind operation</span></dt><dd class="glossdef"><p>LDAP authentication operation to determine the client's identity in
   LDAP terms, the identity which is later used by the server to authorize (or
   not) access to directory data that the client wants to lookup or
   change.</p></dd><dt><span class="glossterm">Collective attribute</span></dt><dd class="glossdef"><p>A standard mechanism for defining attributes that appear on all the
   entries in a particular subtree.</p></dd><dt><span class="glossterm">Compare operation</span></dt><dd class="glossdef"><p>LDAP operation to compare a specified attribute value with the value
   stored on an entry in the directory.</p></dd><dt><span class="glossterm">Control</span></dt><dd class="glossdef"><p>Information added to an LDAP message to further specify how an LDAP
   operation should be processed. OpenDJ supports many LDAP controls.</p></dd><dt><span class="glossterm">Database cache</span></dt><dd class="glossdef"><p>Memory space set aside to hold database content.</p></dd><dt><span class="glossterm"><code class="filename">debug</code> log</span></dt><dd class="glossdef"><p>Directory server log tracing details needed to troubleshoot a problem
   in the server.</p></dd><dt><span class="glossterm">Delete operation</span></dt><dd class="glossdef"><p>LDAP operation to remove an existing entry or entries from the
   directory.</p></dd><dt id="directory"><span class="glossterm">Directory</span></dt><dd class="glossdef"><p>A directory is a network service which lists participants in the
   network such as users, computers, printers, and groups. The directory
   provides a convenient, centralized, and robust mechanism for publishing and
   consuming information about network participants.</p></dd><dt><span class="glossterm">Directory hierarchy</span></dt><dd class="glossdef"><p>A directory can be organized into a hierarchy in order to make it
   easier to browse or manage. Directory hierarchies normally represent
   something in the physical world, such as organizational hierarchies or
   physical locations. For example, the top level of a directory may represent
   a company, the next level down divisions, the next level down departments,
   and so on. Alternately, the top level may represent the world, the next
   level down countries, next states or provinces, next cities, and so
   on.</p></dd><dt id="directory-manager"><span class="glossterm">Directory manager</span></dt><dd class="glossdef"><p>Default Root DN who has privileges to do full administration of the
   OpenDJ server, including bypassing access control evaluation, changing
   access controls, and changing administrative privileges.</p><p>See Also <a class="glossseealso" href="#root-dn">Root DN</a>.</p></dd><dt><span class="glossterm">Directory object</span></dt><dd class="glossdef"><p>A directory object is an item in a directory. Example objects include
   users, user groups, computers and more. Objects may be organized into a
   hierarchy and contain identifying attributes.</p><p>See Also <a class="glossseealso" href="#entry">Entry</a>.</p></dd><dt><span class="glossterm">Directory server</span></dt><dd class="glossdef"><p>Server application for centralizing information about network participants.
   A highly available directory service consists of multiple directory servers
   configured to replicate directory data.</p><p>See Also <a class="glossseealso" href="#directory">Directory</a>, <a class="glossseealso" href="#replication">Replication</a>.</p></dd><dt><span class="glossterm">Directory Services Markup Language (DSML)</span></dt><dd class="glossdef"><p>Standard language to access directory services using XML. DMSL v1
   defined an XML mapping of LDAP objects, while DSMLv2 maps the LDAP Protocol
   and data model to XML.</p></dd><dt><span class="glossterm">Distinguished name (DN)</span></dt><dd class="glossdef"><p>Fully qualified name for a directory entry, such as
   <code class="literal">uid=bjensen,ou=People,dc=example,dc=com</code>, built by
   concatenating the entry RDN (<code class="literal">uid=bjensen</code>) with the DN of
   the parent entry (<code class="literal">ou=People,dc=example,dc=com</code>).</p></dd><dt><span class="glossterm">Dynamic group</span></dt><dd class="glossdef"><p>Group that specifies members using LDAP URLs.</p></dd><dt id="entry"><span class="glossterm">Entry</span></dt><dd class="glossdef"><p>As generic and hierarchical data stores, directories always contain
   different kinds of entries, either nodes (or containers) or leaf entries. An
   entry is an object in the directory, defined by one of more object classes
   and their related attributes. At startup, OpenDJ reports the number of entries
   contained in each suffix.</p></dd><dt><span class="glossterm">Entry cache</span></dt><dd class="glossdef"><p>Memory space set aside to hold frequently-accessed, large entries,
   such as static groups.</p></dd><dt id="equality-index"><span class="glossterm">Equality index</span></dt><dd class="glossdef"><p>Index used to match values that correspond exactly (though generally
   without case sensitivity) to the value provided in the search filter.</p></dd><dt><span class="glossterm"><code class="filename">errors</code> log</span></dt><dd class="glossdef"><p>Directory server log tracing server events, error conditions, and
   warnings, categorized and identified by severity.</p></dd><dt><span class="glossterm">Export</span></dt><dd class="glossdef"><p>Save directory data in an LDIF file.</p></dd><dt><span class="glossterm">Extended operation</span></dt><dd class="glossdef"><p>Additional LDAP operation not included in the original standards.
   OpenDJ supports several standard LDAP extended operations.</p></dd><dt id="extensible-match-index"><span class="glossterm">Extensible match index</span></dt><dd class="glossdef"><p>Index for a matching rule other than approximate, equality, ordering,
   presence, substring or VLV, such as an index for generalized time.</p></dd><dt><span class="glossterm">External user</span></dt><dd class="glossdef"><p>An individual that accesses company resources or services but is not
   working for the company. Typically a customer or partner.</p></dd><dt id="filter"><span class="glossterm">Filter</span></dt><dd class="glossdef"><p>An LDAP search filter is an expression that the server uses to find
   entries that match a search request, such as
   <code class="literal">(mail=*@example.com)</code> to match all entries having an
   email address in the example.com domain.</p></dd><dt><span class="glossterm">Group</span></dt><dd class="glossdef"><p>Entry identifying a set of members whose entries are also in the
   directory.</p></dd><dt><span class="glossterm">Idle time limit</span></dt><dd class="glossdef"><p>Defines how long OpenDJ allows idle connections to remain open.</p></dd><dt><span class="glossterm">Import</span></dt><dd class="glossdef"><p>Read in and index directory data from an LDIF file.</p></dd><dt><span class="glossterm">Inactive user</span></dt><dd class="glossdef"><p>An entry in the directory that once represented a user but which is
   now no longer able to be authenticated.</p></dd><dt><span class="glossterm">Index</span></dt><dd class="glossdef"><p>Directory server backend feature to allow quick lookup of entries
   based on their attribute values.</p><p>See Also <a class="glossseealso" href="#approximate-index">Approximate index</a>, <a class="glossseealso" href="#equality-index">Equality index</a>, <a class="glossseealso" href="#extensible-match-index">Extensible match index</a>, <a class="glossseealso" href="#ordering-index">Ordering index</a>, <a class="glossseealso" href="#presence-index">Presence index</a>, <a class="glossseealso" href="#substring-index">Substring index</a>, <a class="glossseealso" href="#vlv-index">Virtual list view (VLV) index</a>, <a class="glossseealso" href="#index-entry-limit">Index entry limit</a>.</p></dd><dt id="index-entry-limit"><span class="glossterm">Index entry limit</span></dt><dd class="glossdef"><p>When the number of entries that an index key points to exceeds the
   index entry limit, OpenDJ stops maintaining the list of entries for that
   index key.</p></dd><dt><span class="glossterm">Internal user</span></dt><dd class="glossdef"><p>An individual who works within the company either as an employee or as
   a contractor.</p></dd><dt><span class="glossterm">LDAP Data Interchange Format (LDIF)</span></dt><dd class="glossdef"><p>Standard, portable, text-based representation of directory content.
   See <a class="link" href="http://tools.ietf.org/html/rfc2849" target="_blank">RFC 2849</a>.</p></dd><dt><span class="glossterm">LDAP URL</span></dt><dd class="glossdef"><p>LDAP Uniform Resource Locator such as <code class="literal">ldap://directory.example.com:389/dc=example,dc=com??sub?(uid=bjensen)</code>.
   See <a class="link" href="http://tools.ietf.org/html/rfc2255" target="_blank">RFC 2255</a>.</p></dd><dt><span class="glossterm">LDAPS</span></dt><dd class="glossdef"><p>LDAP over SSL.</p></dd><dt><span class="glossterm">Lightweight Directory Access Protocol (LDAP)</span></dt><dd class="glossdef"><p>A simple and standardized network protocol used by applications to
   connect to a directory, search for objects and add, edit or remove
   objects. See <a class="link" href="http://tools.ietf.org/html/rfc4510" target="_blank">RFC 4510</a>.</p></dd><dt><span class="glossterm">Lookthrough limit</span></dt><dd class="glossdef"><p>Defines the maximum number of candidate entries OpenDJ considers when
   processing a search.</p></dd><dt><span class="glossterm">Matching rule</span></dt><dd class="glossdef"><p>Defines rules for performing matching operations against assertion
   values. Matching rules are frequently associated with an attribute syntax
   and are used to compare values according to that syntax. For example, the
   <code class="literal">distinguishedNameEqualityMatch</code> matching rule can be used
   to determine whether two DNs are equal and can ignore unnecessary spaces
   around commas and equal signs, differences in capitalization in attribute
   names, and so on.</p></dd><dt><span class="glossterm">Modify DN operation</span></dt><dd class="glossdef"><p>LDAP modification operation to request that the server change the
   distinguished name of an entry.</p></dd><dt><span class="glossterm">Modify operation</span></dt><dd class="glossdef"><p>LDAP modification operation to request that the server change one or
   more attributes of an entry.</p></dd><dt><span class="glossterm">Naming context</span></dt><dd class="glossdef"><p>Base DN under which client applications can look for user data.</p></dd><dt><span class="glossterm">Object class</span></dt><dd class="glossdef"><p>Identifies entries that share certain characteristics. Most commonly,
   an entry's object classes define the attributes that must and may be present
   on the entry. Object classes are stored on entries as values of the
   <code class="literal">objectClass</code> attribute. Object classes are defined in the
   directory schema, and can be abstract (defining characteristics for other
   object classes to inherit), structural (defining the basic structure of an
   entry, one structural inheritance per entry), or auxiliary (for decorating
   entries already having a structural object class with other required and
   optional attributes).</p></dd><dt><span class="glossterm">Object identifier (OID)</span></dt><dd class="glossdef"><p>String that uniquely identifies an object, such as
   <code class="literal">0.9.2342.19200300.100.1.1</code> for the user ID attribute or
   <code class="literal">1.3.6.1.4.1.1466.115.121.1.15</code> for
   <code class="literal">DirectoryString</code> syntax. </p></dd><dt><span class="glossterm">Operational attribute</span></dt><dd class="glossdef"><p>An attribute that has a special (operational) meaning for the
   directory server, such as <code class="literal">pwdPolicySubentry</code> or
   <code class="literal">modifyTimestamp</code>.</p></dd><dt id="ordering-index"><span class="glossterm">Ordering index</span></dt><dd class="glossdef"><p>Index used to match values for a filter that specifies a range.</p></dd><dt><span class="glossterm">Password policy</span></dt><dd class="glossdef"><p>A set of rules regarding what sequence of characters constitutes an 
   acceptable password. Acceptable passwords are generally those that would be
   too difficult for another user or an automated program to guess and thereby
   defeat the password mechanism. Password policies may require a minimum
   length, a mixture of different types of characters (lowercase, uppercase,
   digits, punctuation marks, and so forth), avoiding dictionary words or
   passwords based on the user's name, and so forth. Password policies may
   also require that users not reuse old passwords and that users change their
   passwords regularly.</p></dd><dt><span class="glossterm">Password reset</span></dt><dd class="glossdef"><p>Password change performed by a user other than the user who owns the
   entry.</p></dd><dt><span class="glossterm">Password storage scheme</span></dt><dd class="glossdef"><p>Mechanism for encoding user passwords stored on directory entries.
   OpenDJ implements a number of password storage schemes.</p></dd><dt><span class="glossterm">Password validator</span></dt><dd class="glossdef"><p>Mechanism for determining whether a proposed password is acceptable
   for use. OpenDJ implements a number of password validators.</p></dd><dt id="presence-index"><span class="glossterm">Presence index</span></dt><dd class="glossdef"><p>Index used to match the fact that an attribute is present on the entry,
   regardless of the value.</p></dd><dt><span class="glossterm">Principal</span></dt><dd class="glossdef"><p>Entity that can be authenticated, such as a user, a device, or an
   application.</p></dd><dt id="privilege"><span class="glossterm">Privilege</span></dt><dd class="glossdef"><p>Server configuration settings controlling access to administrative
   operations such as exporting and importing data, restarting the server,
   performing password reset, and changing the server configuration.</p><p>Privileges are implemented independently from access control
   instructions (ACI), which apply to LDAP operations and user data.</p><p>See Also <a class="glossseealso" href="#access-control-instruction">Access control instruction (ACI)</a>.</p></dd><dt><span class="glossterm">Referential integrity</span></dt><dd class="glossdef"><p>Ensuring that group membership remains consistent following changes
   to member entries.</p></dd><dt><span class="glossterm"><code class="filename">referint</code> log</span></dt><dd class="glossdef"><p>Directory server log tracing referential integrity events, with
   entries similar to the errors log.</p></dd><dt><span class="glossterm">Referral</span></dt><dd class="glossdef"><p>Reference to another directory location, which can be another
   directory server running elsewhere or another container on the same server,
   where the current operation can be processed.</p></dd><dt><span class="glossterm">Relative distinguished name (RDN)</span></dt><dd class="glossdef"><p>Initial portion of a DN that distinguishes the entry from all other
   entries at the same level, such as <code class="literal">uid=bjensen</code> in
   <code class="literal">uid=bjensen,ou=People,dc=example,dc=com</code>.</p></dd><dt id="replication"><span class="glossterm">Replication</span></dt><dd class="glossdef"><p>Data synchronization that ensures all directory servers participating
   eventually share a consistent set of directory data.</p></dd><dt><span class="glossterm"><code class="filename">replication</code> log</span></dt><dd class="glossdef"><p>Directory server log tracing replication events, with entries similar
   to the errors log.</p></dd><dt id="root-dn"><span class="glossterm">Root DN</span></dt><dd class="glossdef"><p>A directory superuser, whose account is specific to a directory server
   under <code class="literal">cn=Root DNs,cn=config</code>.</p><p>The default Root DN is Directory Manager. You can create additional
   Root DN accounts, each with different administrative privileges.</p><p>See Also <a class="glossseealso" href="#directory-manager">Directory manager</a>, <a class="glossseealso" href="#privilege">Privilege</a>.</p></dd><dt><span class="glossterm">Root DSE</span></dt><dd class="glossdef"><p>The directory entry with distinguished name "" (empty string), where
   DSE stands for DSA-Specific Entry. DSA stands for Directory Server Agent,
   a single directory server. The root DSE serves to expose information over
   LDAP about what the directory server supports in terms of LDAP controls,
   auth password schemes, SASL mechanisms, LDAP protocol versions, naming
   contexts, features, LDAP extended operations, and so forth.</p></dd><dt><span class="glossterm">Schema</span></dt><dd class="glossdef"><p>LDAP schema defines the object classes, attributes types, attribute
   value syntaxes, matching rules and so on that constrain entries held by the
   directory server.</p></dd><dt><span class="glossterm">Search filter</span></dt><dd class="glossdef"><p>See <a class="xref" href="#filter" title="Filter">Filter</a>.</p></dd><dt><span class="glossterm">Search operation</span></dt><dd class="glossdef"><p>LDAP lookup operation where a client requests that the server return
   entries based on an LDAP filter and a base DN under which to search.</p></dd><dt><span class="glossterm">Simple authentication</span></dt><dd class="glossdef"><p>Bind operation performed with a user's entry DN and user's password.
   Use simple authentication only if the network connection is secure.</p></dd><dt><span class="glossterm">Size limit</span></dt><dd class="glossdef"><p>Sets the maximum number of entries returned for a search.</p></dd><dt><span class="glossterm">Static group</span></dt><dd class="glossdef"><p>Group that enumerates member entries.</p></dd><dt><span class="glossterm">Subentry</span></dt><dd class="glossdef"><p>An entry, such as a password policy entry, that resides with the user
   data but holds operational data, and is not visible in search results unless
   explicitly requested.</p></dd><dt id="substring-index"><span class="glossterm">Substring index</span></dt><dd class="glossdef"><p>Index used to match values specified with wildcards in the filter.</p></dd><dt><span class="glossterm">Task</span></dt><dd class="glossdef"><p>Mechanism to provide remote access to directory server administrative
   functions. OpenDJ supports tasks to backup and restore backends, to import
   and export LDIF files, and to stop and restart the server. </p></dd><dt><span class="glossterm">Time limit</span></dt><dd class="glossdef"><p>Defines the maximum processing time OpenDJ devotes to a search
   operation.</p></dd><dt><span class="glossterm">Unbind operation</span></dt><dd class="glossdef"><p>LDAP operation to release resources at the end of a session.</p></dd><dt><span class="glossterm">Unindexed search</span></dt><dd class="glossdef"><p>Search operation for which no matching index is available. If no
   indexes are applicable, then the directory server potentially has to go
   through all entries to look for candidate matches. For this reason, the
   <code class="literal">unindexed-search</code> privilege, allowing users to request
   searches for which no applicable index exists, is reserved for the directory
   manager by default.</p></dd><dt><span class="glossterm">User</span></dt><dd class="glossdef"><p>An entry that represents an individual that can be authenticated
   through credentials contained or referenced by its attributes. A user may
   represent an internal user or an external user, and may be an active user
   or an inactive user.</p></dd><dt><span class="glossterm">User attribute</span></dt><dd class="glossdef"><p>An attribute for storing user data on a directory entry such as
   <code class="literal">mail</code> or <code class="literal">givenname</code>.</p></dd><dt><span class="glossterm">Virtual attribute</span></dt><dd class="glossdef"><p>An attribute with dynamically generated values that appear in entries
   but are not persistently stored in the backend.</p></dd><dt><span class="glossterm">Virtual directory</span></dt><dd class="glossdef"><p>An application that exposes a consolidated view of multiple physical
   directories over an LDAP interface. Consumers of the directory information
   connect to the virtual directory's LDAP service. Behind the scenes, requests
   for information and updates to the directory are sent to one or more physical
   directories where the actual information resides. Virtual directories enable
   organizations to create a consolidated view of information that for legal or
   technical reasons cannot be consolidated into a single physical copy.</p></dd><dt id="vlv-index"><span class="glossterm">Virtual list view (VLV) index</span></dt><dd class="glossdef"><p>Browsing index designed to help the directory server respond to client
   applications that need for example to browse through a long list of results
   a page at a time in a GUI.</p></dd><dt><span class="glossterm">Virtual static group</span></dt><dd class="glossdef"><p>OpenDJ group that lets applications see dynamic groups as what appear
   to be static groups.</p></dd><dt><span class="glossterm">X.500</span></dt><dd class="glossdef"><p>A family of standardized protocols for accessing, browsing and
   maintaining a directory. X.500 is functionally similar to LDAP, but is
   generally considered to be more complex, and has consequently not been
   widely adopted.</p></dd></dl></div><div class="index" id="d247e7263"><div class="titlepage"><div><div><h1 class="title">Index</h1></div></div></div><div xmlns:xlink="http://www.w3.org/1999/xlink" class="index"><div class="indexdiv"><h3>A</h3><dl><dt id="ientry-d247e386">Adds, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#about-writes">About Add, Modify, Rename, &amp; Delete</a>, <a class="indexterm" href="#adding-entries">Adding Directory Entries</a></dt><dt id="ientry-d247e595">Assertions, <a class="indexterm" href="#trust-result-codes">Trust Result Codes</a>, <a class="indexterm" href="#use-assertion-request-control">Assertion Request Control</a>, <a class="indexterm" href="#use-pre-read-control">Pre-Read Controls</a></dt><dt id="ientry-d247e276">Attributes, <a class="indexterm" href="#directory-data">Data In LDAP Directories</a>, <a class="indexterm" href="#storing-large-attributes">Store Large Attribute Values By Reference</a>, <a class="indexterm" href="#handle-entry-attributes">Working With Entry Attributes</a></dt><dd><dl><dt>Rewriting, <a class="indexterm" href="#dn-attr-rewriting">DN &amp; Attribute Rewriting</a></dt></dl></dd><dt id="ientry-d247e374">Authentications, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#authenticate-correctly">Authenticate Correctly</a></dt><dd><dl><dt>SASL, <a class="indexterm" href="#sasl-auth">SASL Authentication</a></dt><dt>Simple, <a class="indexterm" href="#simple-auth">Simple Authentication</a></dt><dt>StartTLS, SSL, <a class="indexterm" href="#simple-auth-with-starttls-or-ssl">Start TLS &amp; SSL Authentication</a></dt></dl></dd><dt id="ientry-d247e482">Authorizations, <a class="indexterm" href="#authenticate-correctly">Authenticate Correctly</a>, <a class="indexterm" href="#about-writes">About Add, Modify, Rename, &amp; Delete</a>, <a class="indexterm" href="#use-authorization-identity-control">Authorization Identity Controls</a>, <a class="indexterm" href="#use-get-effective-rights-control">GetEffectiveRights Request Control</a>, <a class="indexterm" href="#use-proxy-authz-control">Proxied Authorization Request Controls</a>, <a class="indexterm" href="#use-who-am-i-extended-operation">Who am I? Extended Operation</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt id="ientry-d247e2902">Browsing, <a class="indexterm" href="#use-server-side-sort-control">Server-Side Sort Controls</a>, <a class="indexterm" href="#use-simple-paged-results-control">Simple Paged Results Control</a>, <a class="indexterm" href="#use-vlv-control">Virtual List View Controls</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt id="ientry-d247e2559">Change notification, <a class="indexterm" href="#use-entry-change-notification-control">Entry Change Notification Response Controls</a>, <a class="indexterm" href="#use-persistent-search-request-control">Persistent Search Request Control</a></dt><dt id="ientry-d247e380">Comparisons, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#about-comparisons">About Comparing</a></dt><dt id="ientry-d247e499">Connections</dt><dd><dl><dt>Asynchronous, <a class="indexterm" href="#sync-vs-async">Synchronous &amp; Asynchronous Operations</a>, <a class="indexterm" href="#chap-simple-proxy">Writing a Simple LDAP Proxy</a></dt><dt>Health check, <a class="indexterm" href="#health-check-connections">Health Check Connections</a></dt><dt>Listening for, <a class="indexterm" href="#handling-client-connections">Listening For &amp; Handling Client Connections</a></dt><dt>Load balancing, <a class="indexterm" href="#load-balancing-and-failover">Load Balancing &amp; Failover</a></dt><dt>Pooling, <a class="indexterm" href="#reuse-connections">Reuse Connections</a>, <a class="indexterm" href="#connection-pooling">Connection Pooling</a></dt><dt>Synchronous, <a class="indexterm" href="#sync-vs-async">Synchronous &amp; Asynchronous Operations</a>, <a class="indexterm" href="#send-search-request">Sending a Search Request</a></dt></dl></dd><dt id="ientry-d247e454">Controls, <a class="indexterm" href="#chap-controls">Working With Controls</a></dt><dd><dl><dt>About, <a class="indexterm" href="#standard-ldapv3-extensions">Standard LDAPv3 &amp; Extensions</a></dt><dt>Assertion, <a class="indexterm" href="#use-assertion-request-control">Assertion Request Control</a></dt><dt>Authorization ID, <a class="indexterm" href="#use-authorization-identity-control">Authorization Identity Controls</a></dt><dt>Entry change notification, <a class="indexterm" href="#use-entry-change-notification-control">Entry Change Notification Response Controls</a></dt><dt>Generic, <a class="indexterm" href="#use-generic-control">Using a Generic Control</a></dt><dt>GetEffectiveRights, <a class="indexterm" href="#use-get-effective-rights-control">GetEffectiveRights Request Control</a></dt><dt>ManageDsaIT, <a class="indexterm" href="#use-managedsait-control">ManageDsaIT Request Control</a></dt><dt>Matched values, <a class="indexterm" href="#use-matched-values-request-control">Matched Values Request Control</a></dt><dt>Password expired, <a class="indexterm" href="#use-password-expired-control">Password Expired Response Control</a></dt><dt>Password expiring, <a class="indexterm" href="#use-password-expiring-control">Password Expiring Response Control</a></dt><dt>Password policy, <a class="indexterm" href="#use-password-policy-controls">Password Policy Controls</a></dt><dt>Permissive modify, <a class="indexterm" href="#use-permissive-modify-request-control">Permissive Modify Request Control</a></dt><dt>Persistent search, <a class="indexterm" href="#careful-with-persistent-search-and-server-side-sorting">Take Care With Persistent Search &amp; Server-Side Sorting</a>, <a class="indexterm" href="#use-persistent-search-request-control">Persistent Search Request Control</a></dt><dt>Post-read, <a class="indexterm" href="#use-post-read-control">Post-Read Controls</a></dt><dt>Pre-read, <a class="indexterm" href="#use-pre-read-control">Pre-Read Controls</a></dt><dt>Proxied authorization, <a class="indexterm" href="#use-proxy-authz-control">Proxied Authorization Request Controls</a></dt><dt>Server-side sort, <a class="indexterm" href="#use-server-side-sort-control">Server-Side Sort Controls</a></dt><dt>Simple paged results, <a class="indexterm" href="#use-simple-paged-results-control">Simple Paged Results Control</a></dt><dt>Subentries, <a class="indexterm" href="#use-subentry-request-control">Subentries Request Control</a></dt><dt>Subtree delete, <a class="indexterm" href="#use-subtree-delete-control">Subtree Delete Request Control</a></dt><dt>Supported, <a class="indexterm" href="#get-supported-controls">Determining Supported Controls</a></dt><dt>Virtual list view, <a class="indexterm" href="#use-vlv-control">Virtual List View Controls</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>D</h3><dl><dt id="ientry-d247e389">Deletes, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#about-writes">About Add, Modify, Rename, &amp; Delete</a>, <a class="indexterm" href="#deleting-entries">Deleting Directory Entries</a></dt><dd><dl><dt>Subtree delete, <a class="indexterm" href="#use-subtree-delete-control">Subtree Delete Request Control</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>E</h3><dl><dt id="ientry-d247e580">Errors, <a class="indexterm" href="#error-handling">Managing Errors</a></dt><dd><dl><dt>Result codes, <a class="indexterm" href="#trust-result-codes">Trust Result Codes</a>, <a class="indexterm" href="#check-result-codes">Troubleshooting: Check Result Codes</a></dt></dl></dd><dt id="ientry-d247e798">Examples</dt><dd><dl><dt>Data, <a class="indexterm" href="#prepare-ldap-server">Preparing an LDAP Server</a></dt><dt>Java, <a class="indexterm" href="#opendj-ldap-sdk-examples">Accessing Example Java Code</a></dt></dl></dd><dt id="ientry-d247e461">Extended operations, <a class="indexterm" href="#chap-extended-ops">Working With Extended Operations</a></dt><dd><dl><dt>About, <a class="indexterm" href="#standard-ldapv3-extensions">Standard LDAPv3 &amp; Extensions</a></dt><dt>Cancel, <a class="indexterm" href="#use-cancel-extended-operation">Cancel Extended Operation</a></dt><dt>Password modify, <a class="indexterm" href="#use-password-modify-extended-operation">Password Modify Extended Operation</a></dt><dt>StartTLS, <a class="indexterm" href="#simple-auth-with-starttls-or-ssl">Start TLS &amp; SSL Authentication</a></dt><dt>Supported, <a class="indexterm" href="#get-supported-extended-operations">Determining Supported Extended Operations</a></dt><dt>Who am I?, <a class="indexterm" href="#use-who-am-i-extended-operation">Who am I? Extended Operation</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt id="ientry-d247e545">Filters, <a class="indexterm" href="#use-specific-filters">Use Specific LDAP Filters</a>, <a class="indexterm" href="#about-filters">Working With Search Filters</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt id="ientry-d247e606">Groups, <a class="indexterm" href="#ismemberof-for-membership">Check Group Membership on the Account, Not the Group</a>, <a class="indexterm" href="#use-matched-values-request-control">Matched Values Request Control</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt id="ientry-d247e825">Installing</dt><dd><dl><dt>Build your own, <a class="indexterm" href="#getting-the-ldap-sdk">Getting the LDAP SDK</a></dt><dt>From download, <a class="indexterm" href="#getting-the-ldap-sdk">Getting the LDAP SDK</a></dt><dt>With Maven, <a class="indexterm" href="#getting-the-ldap-sdk">Getting the LDAP SDK</a></dt></dl></dd><dt id="ientry-d247e3242">Internationalization, <a class="indexterm" href="#chap-i18n">Internationalizing Applications</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt id="ientry-d247e244">LDAP</dt><dd><dl><dt>About, <a class="indexterm" href="#chap-understanding-ldap">Understanding LDAP</a>, <a class="indexterm" href="#about-opendj-ldap-sdk">About OpenDJ LDAP SDK</a></dt><dt>Checking supported features, <a class="indexterm" href="#ask-directory-what-it-supports">Ask the Directory Server What It Supports</a>, <a class="indexterm" href="#read-root-dse">Reading Root DSEs</a>, <a class="indexterm" href="#get-supported-controls">Determining Supported Controls</a>, <a class="indexterm" href="#get-supported-extended-operations">Determining Supported Extended Operations</a></dt><dt>Connected protocol, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a></dt><dt>Controls, <a class="indexterm" href="#chap-controls">Working With Controls</a></dt><dt>Data, <a class="indexterm" href="#directory-data">Data In LDAP Directories</a>, <a class="indexterm" href="#prepare-ldap-server">Preparing an LDAP Server</a></dt><dt>Extended operations, <a class="indexterm" href="#chap-extended-ops">Working With Extended Operations</a></dt><dt>Password policy, <a class="indexterm" href="#use-password-expired-control">Password Expired Response Control</a>, <a class="indexterm" href="#use-password-expiring-control">Password Expiring Response Control</a>, <a class="indexterm" href="#use-password-policy-controls">Password Policy Controls</a></dt><dt>Proxy, <a class="indexterm" href="#chap-simple-proxy">Writing a Simple LDAP Proxy</a></dt><dt>Root DSE, <a class="indexterm" href="#read-root-dse">Reading Root DSEs</a></dt><dt>Schema, <a class="indexterm" href="#reuse-schemas">Reuse Schemas Where Possible</a>, <a class="indexterm" href="#get-schema-information">Getting Schema Information</a></dt><dt>Subentries, <a class="indexterm" href="#use-subentry-request-control">Subentries Request Control</a></dt><dt>URLs, <a class="indexterm" href="#handle-ldap-urls">Working With LDAP URLs</a></dt></dl></dd><dt id="ientry-d247e2320">LDIF, <a class="indexterm" href="#about-ldif">About LDIF</a></dt><dd><dl><dt>Reading, <a class="indexterm" href="#reading-ldif">Reading LDIF</a></dt><dt>Writing, <a class="indexterm" href="#writing-ldif">Writing LDIF</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>M</h3><dl><dt id="ientry-d247e383">Modifications, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#make-modifications-specific">Make Modifications Specific</a>, <a class="indexterm" href="#about-writes">About Add, Modify, Rename, &amp; Delete</a>, <a class="indexterm" href="#modifying-attr-values">Modifying Directory Entry Attribute Values</a></dt><dd><dl><dt>Password modify, <a class="indexterm" href="#use-password-modify-extended-operation">Password Modify Extended Operation</a></dt><dt>Permissive modify, <a class="indexterm" href="#use-permissive-modify-request-control">Permissive Modify Request Control</a></dt><dt>Static groups, <a class="indexterm" href="#updating-static-groups">Updating Static Groups</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt id="ientry-d247e702">Referrals, <a class="indexterm" href="#handle-referrals">Handle Referrals</a>, <a class="indexterm" href="#handle-ldap-urls">Working With LDAP URLs</a>, <a class="indexterm" href="#use-managedsait-control">ManageDsaIT Request Control</a></dt><dt id="ientry-d247e392">Renames, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#about-writes">About Add, Modify, Rename, &amp; Delete</a>, <a class="indexterm" href="#renaming-entries">Renaming Directory Entries</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt id="ientry-d247e377">Searches, <a class="indexterm" href="#ldap-client-server-communication">LDAP Client &amp; Server Communication</a>, <a class="indexterm" href="#about-searching">About Searching</a>, <a class="indexterm" href="#send-search-request">Sending a Search Request</a></dt><dd><dl><dt>Base, <a class="indexterm" href="#basedn-and-scope">Setting Search Base &amp; Scope</a></dt><dt>Cancel, <a class="indexterm" href="#use-cancel-extended-operation">Cancel Extended Operation</a></dt><dt>Entry change notification, <a class="indexterm" href="#use-entry-change-notification-control">Entry Change Notification Response Controls</a></dt><dt>Filters, <a class="indexterm" href="#about-filters">Working With Search Filters</a></dt><dt>Handling results, <a class="indexterm" href="#handle-referrals">Handle Referrals</a>, <a class="indexterm" href="#get-search-results">Getting Search Results</a>, <a class="indexterm" href="#sort-search-results">Sorting Search Results</a>, <a class="indexterm" href="#use-post-read-control">Post-Read Controls</a></dt><dt>Persistent search, <a class="indexterm" href="#use-persistent-search-request-control">Persistent Search Request Control</a></dt><dt>Scope, <a class="indexterm" href="#basedn-and-scope">Setting Search Base &amp; Scope</a></dt><dt>Server-side sort, <a class="indexterm" href="#use-server-side-sort-control">Server-Side Sort Controls</a></dt><dt>Simple paged results, <a class="indexterm" href="#use-simple-paged-results-control">Simple Paged Results Control</a></dt><dt>Sorting, <a class="indexterm" href="#careful-with-persistent-search-and-server-side-sorting">Take Care With Persistent Search &amp; Server-Side Sorting</a></dt><dt>Virtual list view, <a class="indexterm" href="#use-vlv-control">Virtual List View Controls</a></dt></dl></dd><dt id="ientry-d247e1917">Sorting, <a class="indexterm" href="#sort-search-results">Sorting Search Results</a>, <a class="indexterm" href="#use-server-side-sort-control">Server-Side Sort Controls</a>, <a class="indexterm" href="#use-vlv-control">Virtual List View Controls</a></dt></dl></div></div></div></div><a href="#" class="back-to-top hidden-xs"><button type="button" class="btn btn-primary btn-default"><span class="glyphicon glyphicon-chevron-up"></span></button></a></div></div><div class="footer"><div class="container-fluid"><div class="footer-left"><span class="footer-item">Copyright &copy;
              2011-2014&nbsp;
              ForgeRock AS;&nbsp;
              &nbsp;
              &nbsp;
          </span></div><div class="footer-right"><a target="_blank" class="footer-item snap-left" href="legalnotice.html"><i class="glyphicon glyphicon-briefcase"></i> Legal Notice</a><a target="_blank" class="footer-item snap-left" href="https://github.com/OpenIdentityPlatform/OpenAM/issues"><i class="glyphicon glyphicon-ok-sign"></i> Feedback</a><a target="_blank" class="footer-item snap-left" href="#" data-toggle="modal" data-target="#myModal"><i class="glyphicon glyphicon-info-sign"></i> About</a></div></div></div></body></html>