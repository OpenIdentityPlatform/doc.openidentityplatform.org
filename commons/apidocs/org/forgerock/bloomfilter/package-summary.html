<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_422) on Fri Sep 06 09:04:07 MSK 2024 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>org.forgerock.bloomfilter (org.openidentityplatform.commons.parent 2.1.7-SNAPSHOT Documentation)</title>
<meta name="date" content="2024-09-06">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.forgerock.bloomfilter (org.openidentityplatform.commons.parent 2.1.7-SNAPSHOT Documentation)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>org.openidentityplatform.commons.parent 2.1.7-SNAPSHOT Documentation</b></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/forgerock/authz/modules/oauth2/crest/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../org/forgerock/bloomfilter/monitoring/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/forgerock/bloomfilter/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.forgerock.bloomfilter</h1>
<div class="docSummary">
<div class="block">ForgeRock Bloom Filters</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilter.html" title="interface in org.forgerock.bloomfilter">BloomFilter</a>&lt;E&gt;</td>
<td class="colLast">
<div class="block">General interface contract for implementations of <a href="http://en.wikipedia.org/wiki/Bloom_filter">Bloom
 Filters</a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/ExpiryStrategy.html" title="interface in org.forgerock.bloomfilter">ExpiryStrategy</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Strategy pattern for determining when elements added to a <a href="../../../org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.html" title="class in org.forgerock.bloomfilter"><code>ConcurrentRollingBloomFilter</code></a> should expire.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilters.html" title="class in org.forgerock.bloomfilter">BloomFilters</a></td>
<td class="colLast">
<div class="block">Factory methods for creating bloom filters with various requirements.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html" title="class in org.forgerock.bloomfilter">BloomFilters.BloomFilterBuilder</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Builder for constructing and configuring Bloom Filter implementations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilters.RollingBloomFilterBuilder.html" title="class in org.forgerock.bloomfilter">BloomFilters.RollingBloomFilterBuilder</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Builder pattern for Rolling Bloom Filters, which are Scalable Bloom Filters whose elements can expire allowing
 space to be reclaimed over time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilters.ScalableBloomFilterBuilder.html" title="class in org.forgerock.bloomfilter">BloomFilters.ScalableBloomFilterBuilder</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Builder pattern for Scalable Bloom Filters.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/BloomFilterStatistics.html" title="class in org.forgerock.bloomfilter">BloomFilterStatistics</a></td>
<td class="colLast">
<div class="block">Provides a snapshot of the current statistics and configuration of a Bloom Filter implementation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.html" title="class in org.forgerock.bloomfilter">ConcurrentRollingBloomFilter</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">A thread-safe implementation of a Bloom Filter that can expand over time to accommodate arbitrary numbers of
 elements, while also allowing old elements to be deleted after they have expired.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/forgerock/bloomfilter/ConcurrencyStrategy.html" title="enum in org.forgerock.bloomfilter">ConcurrencyStrategy</a></td>
<td class="colLast">
<div class="block">Strategy that determines how thread-safety of bloom filters should be managed.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.forgerock.bloomfilter Description">Package org.forgerock.bloomfilter Description</h2>
<div class="block"><h1>ForgeRock Bloom Filters</h1>
 Implementations of thread-safe, scalable and rolling Bloom Filters. These are Set-like data structures that can
 scale to very large numbers of entries while only using a small amount of memory (a few bits) per element. The
 trade-off is that the set membership operation may report false positives (i.e., it may claim that an item is a
 member of the set when it isn't). The probability of false positives can be tuned by increasing the amount of
 memory used.
 <p/>
 The <a href="../../../org/forgerock/bloomfilter/BloomFilter.html" title="interface in org.forgerock.bloomfilter"><code>BloomFilter</code></a> interface describes the general contract of bloom filters in
 more detail, and the <a href="../../../org/forgerock/bloomfilter/BloomFilters.html" title="class in org.forgerock.bloomfilter"><code>BloomFilters</code></a> utility class provides static factory and
 builder methods for constructing bloom filters for various requirements.

 <h2>Example</h2>
 <pre><code>
     BloomFilter&lt;CharSequence&gt; blacklistedSessions = BloomFilters.create(Funnels.stringFunnel(UTF8))
              .withInitialCapacity(10000)         // Initial size
              .withCapacityGrowthFactor(2.0)      // Double size when full
              .withFalsePositiveProbability(0.01) // 1% probability of false positives
              .withWriteBatchSize(1000)           // Batch writes
              .build();

     blacklistedSessions.add("Some session token");

     if (blacklistedSessions.mightContain("Some other session")) {
         // Take steps to confirm if token is actually black listed or not.
     }
 </code></pre>

 <h2>Scalable and Rolling Bloom Filters</h2>
 Beyond fixed-capacity Bloom Filters, whose probability of false positives rapidly increases once they have reached
 capacity, this package also provides <em>scalable</em> and <em>rolling</em> Bloom Filters. The former are an
 efficient and flexible implementation of the classic <a
 href="http://www.sciencedirect.com/science/article/pii/S0020019006003127">Scalable Bloom Filters</a> paper by
 Almeida et al., <em>Information Processing Letters</em>, 101(6), p.255&ndash;261, 2007. The latter are a
 time-limited variation on this idea, whereby buckets in the scalable bloom filter can expire over time, freeing up
 memory. The buckets are then recycled ensuring that memory usage is kept reasonable.
 <p/>
 Scalable Bloom Filters are useful for storing sets of objects where you do not know <em>a priori</em> the number
 of elements you might need to store. By dynamically expanding the capacity of the Bloom Filter, as well as
 reducing the false positive probability of subsequent buckets according to a geometric series, the Scalable Bloom
 Filter can expand to accommodate orders of magnitude more elements that originally estimated, while preserving the
 overall configured false positive probability. Use the <a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html#withFalsePositiveProbabilityScaleFactor-double-"><code>BloomFilters.BloomFilterBuilder.withFalsePositiveProbabilityScaleFactor(double)</code></a> and
 <a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html#withCapacityGrowthFactor-double-"><code>BloomFilters.BloomFilterBuilder.withCapacityGrowthFactor(double)</code></a> builder methods
 to configure the scale factors for capacity and false positive probability in these implementations. The defaults
 (0.8 and 2.0 respectively) provide a good trade off of memory growth and performance.
 <p/>
 Rolling Bloom Filters allow elements in a Bloom Filter to expire over time. Use the <a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html#withExpiryStrategy-org.forgerock.bloomfilter.ExpiryStrategy-"><code>BloomFilters.BloomFilterBuilder.withExpiryStrategy(org.forgerock.bloomfilter.ExpiryStrategy)</code></a>
 method to configure how elements in your Bloom Filter will expire. By default, elements do not expire.

 <h2>Concurrency Strategies</h2>
 The implementations provided are currently all thread-safe, and adopt a flexible approach to concurrency control.
 Two concurrency strategies are currently supported:
 <ul>
     <li><em>SYNCHRONIZED</em> - uses synchronized blocks to ensure mutual exclusion of critical sections. For
     fixed-capacity bloom filters all methods are mutually exclusive. For scalable and rolling bloom filters,
     individual buckets are independently synchronized, allowing some additional concurrency. This implementation
     provides moderate read and write performance.</li>

     <li><em>COPY_ON_WRITE</em> - provides very fast read access at the cost of extremely expensive write
     operations, which must make a copy of (part of) the Bloom Filter to apply any changes. Write batching (see
     below) can be used to amortize write costs over many operations, however this implementation will still
     create additional temporary garbage and pressure on the garbage collector. Suitable for situations in which
     read performance (mightContain) is paramount and writes are relatively rare (and can tolerate increased
     latency).</li>
 </ul>
 Use the <a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html#withConcurrencyStrategy-org.forgerock.bloomfilter.ConcurrencyStrategy-"><code>BloomFilters.BloomFilterBuilder.withConcurrencyStrategy(org.forgerock.bloomfilter.ConcurrencyStrategy)</code></a>
 method to specify the concurrency strategy to use. The default is COPY_ON_WRITE.

 <h2>Write Batching</h2>
 To compensate for the relatively poor performance of COPY_ON_WRITE concurrency (see previous section), the
 implementation supports <em>write batching</em>. When enabled, individual calls to the <a href="../../../org/forgerock/bloomfilter/BloomFilter.html#add-E-"><code>BloomFilter.add(java.lang.Object)</code></a> method will be buffered in a traditional concurrent
 collection class until the write batch size is reached. At this point, the buffer will be flushed to the
 underlying bloom filter implementation in a single operation. This amortizes the cost of copying the underlying
 collection, at the cost of increased worst-case latencies (when the buffer is flushed) and increased memory churn.
 The implementation is very highly optimised, supporting very high throughput of both writes and reads, and so is a
 good choice when throughput is paramount and occasional high write latencies can be tolerated. Use
 <a href="../../../org/forgerock/bloomfilter/BloomFilters.BloomFilterBuilder.html#withWriteBatchSize-int-"><code>BloomFilters.BloomFilterBuilder.withWriteBatchSize(int)</code></a> to enable write batching.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://en.wikipedia.org/wiki/Bloom_filter">Bloom Filter Wikipedia entry</a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>org.openidentityplatform.commons.parent 2.1.7-SNAPSHOT Documentation</b></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/forgerock/authz/modules/oauth2/crest/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../org/forgerock/bloomfilter/monitoring/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/forgerock/bloomfilter/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2024 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</body>
</html>
