<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UpdateCommand (OpenIDM project 6.2.6-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UpdateCommand (OpenIDM project 6.2.6-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UpdateCommand.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/openidm/shell/impl/RemoteCommandScope.html" title="class in org.forgerock.openidm.shell.impl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommandConfig.html" title="class in org.forgerock.openidm.shell.impl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/openidm/shell/impl/UpdateCommand.html" target="_top">Frames</a></li>
<li><a href="UpdateCommand.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.forgerock.openidm.shell.impl</div>
<h2 title="Class UpdateCommand" class="title">Class UpdateCommand</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.forgerock.openidm.shell.impl.UpdateCommand</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">UpdateCommand</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Invoked by the command line interface, this command encapsulates all the logic and steps to perform an update to a
 running OpenIDM system.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#UpdateCommand-org.apache.felix.service.command.CommandSession-org.forgerock.openidm.shell.impl.HttpRemoteJsonResource-org.forgerock.openidm.shell.impl.UpdateCommandConfig-">UpdateCommand</a></span>(org.apache.felix.service.command.CommandSession&nbsp;session,
             <a href="../../../../../org/forgerock/openidm/shell/impl/HttpRemoteJsonResource.html" title="class in org.forgerock.openidm.shell.impl">HttpRemoteJsonResource</a>&nbsp;resource,
             <a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommandConfig.html" title="class in org.forgerock.openidm.shell.impl">UpdateCommandConfig</a>&nbsp;config)</code>
<div class="block">Constructs the UpdateCommand with the default StepExecutors for the Update OpenIDM process.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>org.forgerock.openidm.shell.impl.UpdateExecutionState</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#execute-org.forgerock.services.context.Context-">execute</a></span>(org.forgerock.services.context.Context&nbsp;context)</code>
<div class="block">For each step in the executeSequence, this executes each registered executor as long as the condition of
 the executor is ok to run.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected org.forgerock.json.JsonValue</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#fetchRepoUpdates-org.forgerock.services.context.Context-">fetchRepoUpdates</a></span>(org.forgerock.services.context.Context&nbsp;context)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#registerStepExecutor-org.forgerock.openidm.shell.impl.UpdateCommand.StepExecutor-">registerStepExecutor</a></span>(org.forgerock.openidm.shell.impl.UpdateCommand.StepExecutor&nbsp;stepExecutor)</code>
<div class="block">Registers a executor for the step it satisfies.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#setExecuteSequence-org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...-">setExecuteSequence</a></span>(org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...&nbsp;executeSequence)</code>
<div class="block">Saves the sequence of steps to execute.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommand.html#setRecoverySequence-org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...-">setRecoverySequence</a></span>(org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...&nbsp;recoverySequence)</code>
<div class="block">Saves the sequence of steps to execute once the command has entered recovery mode.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="UpdateCommand-org.apache.felix.service.command.CommandSession-org.forgerock.openidm.shell.impl.HttpRemoteJsonResource-org.forgerock.openidm.shell.impl.UpdateCommandConfig-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UpdateCommand</h4>
<pre>public&nbsp;UpdateCommand(org.apache.felix.service.command.CommandSession&nbsp;session,
                     <a href="../../../../../org/forgerock/openidm/shell/impl/HttpRemoteJsonResource.html" title="class in org.forgerock.openidm.shell.impl">HttpRemoteJsonResource</a>&nbsp;resource,
                     <a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommandConfig.html" title="class in org.forgerock.openidm.shell.impl">UpdateCommandConfig</a>&nbsp;config)</pre>
<div class="block">Constructs the UpdateCommand with the default StepExecutors for the Update OpenIDM process.
 <br/>
 Default Steps include:
 <ol>
 <li>Lookup the archive data</li>
 <li>Accept License</li>
 <li>Pause Scheduler</li>
 <li>waiting for jobs to complete</li>
 <li>Enter maintenance mode.</li>
 <li>Install Archive.</li>
 <li>Wait for the install to complete.</li>
 </ol>
 Recovery Steps include:
 <ol>
 <li>Exit Maintenance mode if needed.</li>
 <li>Restart Scheduler if needed.</li>
 <li>Force Restart if needed.</li>
 </ol>

 Engineering note: To add additional steps:
 <ol>
     <li>Add the step enum to UpdateStep</li>
     <li>Implement a new StepExecutor</li>
     <li>register the StepExecutor</li>
     <li>insert into the execute sequence or recovery sequence.</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>session</code> - the command line session to possibly log output to, or to get keyboard input.</dd>
<dd><code>resource</code> - the resource provider to execute REST calls to OpenIDM.</dd>
<dd><code>config</code> - the configuration provided by the command line parameters.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="registerStepExecutor-org.forgerock.openidm.shell.impl.UpdateCommand.StepExecutor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerStepExecutor</h4>
<pre>public&nbsp;void&nbsp;registerStepExecutor(org.forgerock.openidm.shell.impl.UpdateCommand.StepExecutor&nbsp;stepExecutor)</pre>
<div class="block">Registers a executor for the step it satisfies.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stepExecutor</code> - the executor to register.</dd>
</dl>
</li>
</ul>
<a name="setExecuteSequence-org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExecuteSequence</h4>
<pre>public&nbsp;void&nbsp;setExecuteSequence(org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...&nbsp;executeSequence)</pre>
<div class="block">Saves the sequence of steps to execute.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>executeSequence</code> - the array of steps to complete in the order provided.</dd>
</dl>
</li>
</ul>
<a name="setRecoverySequence-org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRecoverySequence</h4>
<pre>public&nbsp;void&nbsp;setRecoverySequence(org.forgerock.openidm.shell.impl.UpdateCommand.UpdateStep...&nbsp;recoverySequence)</pre>
<div class="block">Saves the sequence of steps to execute once the command has entered recovery mode.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recoverySequence</code> - the array of steps to complete in the order provided.</dd>
</dl>
</li>
</ul>
<a name="execute-org.forgerock.services.context.Context-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre>public&nbsp;org.forgerock.openidm.shell.impl.UpdateExecutionState&nbsp;execute(org.forgerock.services.context.Context&nbsp;context)</pre>
<div class="block">For each step in the executeSequence, this executes each registered executor as long as the condition of
 the executor is ok to run.  When all are complete, or one fails, or one aborts, this will then similarly
 loop through each step in the recoverySequence and execute its registered executor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - The context to pass to the REST calls.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value bean holding the results of the execution run.</dd>
</dl>
</li>
</ul>
<a name="fetchRepoUpdates-org.forgerock.services.context.Context-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>fetchRepoUpdates</h4>
<pre>protected&nbsp;org.forgerock.json.JsonValue&nbsp;fetchRepoUpdates(org.forgerock.services.context.Context&nbsp;context)
                                                 throws org.forgerock.json.resource.ResourceException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.forgerock.json.resource.ResourceException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UpdateCommand.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/openidm/shell/impl/RemoteCommandScope.html" title="class in org.forgerock.openidm.shell.impl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/forgerock/openidm/shell/impl/UpdateCommandConfig.html" title="class in org.forgerock.openidm.shell.impl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/openidm/shell/impl/UpdateCommand.html" target="_top">Frames</a></li>
<li><a href="UpdateCommand.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2025. All rights reserved.</small></p>
</body>
</html>
