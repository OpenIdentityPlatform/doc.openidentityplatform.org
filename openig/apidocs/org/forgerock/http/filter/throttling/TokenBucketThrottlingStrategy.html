<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc (1.8.0_442) on Fri Jan 31 08:26:03 UTC 2025 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TokenBucketThrottlingStrategy (OpenIG Project 5.3.2-SNAPSHOT API)</title>
<meta name="date" content="2025-01-31">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TokenBucketThrottlingStrategy (OpenIG Project 5.3.2-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenBucketThrottlingStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html" target="_top">Frames</a></li>
<li><a href="TokenBucketThrottlingStrategy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.forgerock.http.filter.throttling</div>
<h2 title="Class TokenBucketThrottlingStrategy" class="title">Class TokenBucketThrottlingStrategy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.forgerock.http.filter.throttling.TokenBucketThrottlingStrategy</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling">ThrottlingStrategy</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TokenBucketThrottlingStrategy</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling">ThrottlingStrategy</a></pre>
<div class="block">The rate limiting is implemented as a token bucket strategy
 that gives us the ability to handle rate limits through a sliding window. Multiple rates can be supported in
 parallel with the support of a partition key (we first try to find the bucket to use for each incoming request, then
 we apply the rate limit).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html#TokenBucketThrottlingStrategy-com.google.common.base.Ticker-java.util.concurrent.ScheduledExecutorService-org.forgerock.util.time.Duration-">TokenBucketThrottlingStrategy</a></span>(com.google.common.base.Ticker&nbsp;ticker,
                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduledExecutor,
                             org.forgerock.util.time.Duration&nbsp;cleaningInterval)</code>
<div class="block">Constructs a new <a href="../../../../../org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html" title="class in org.forgerock.http.filter.throttling"><code>TokenBucketThrottlingStrategy</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html#stop--">stop</a></span>()</code>
<div class="block">Stop and free any resources needed by the strategy.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>org.forgerock.util.promise.Promise&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,org.forgerock.util.promise.NeverThrowsException&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html#throttle-java.lang.String-org.forgerock.http.filter.throttling.ThrottlingRate-">throttle</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;partitionKey,
        <a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingRate.html" title="class in org.forgerock.http.filter.throttling">ThrottlingRate</a>&nbsp;throttlingRate)</code>
<div class="block">Based on the given partitionKey and throttlingRate, return if the call is accepted or not.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TokenBucketThrottlingStrategy-com.google.common.base.Ticker-java.util.concurrent.ScheduledExecutorService-org.forgerock.util.time.Duration-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TokenBucketThrottlingStrategy</h4>
<pre>public&nbsp;TokenBucketThrottlingStrategy(com.google.common.base.Ticker&nbsp;ticker,
                                     <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ScheduledExecutorService</a>&nbsp;scheduledExecutor,
                                     org.forgerock.util.time.Duration&nbsp;cleaningInterval)</pre>
<div class="block">Constructs a new <a href="../../../../../org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html" title="class in org.forgerock.http.filter.throttling"><code>TokenBucketThrottlingStrategy</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticker</code> - the <code>Ticker</code> to use to follow the timeline.</dd>
<dd><code>scheduledExecutor</code> - the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> used to schedule cleaning tasks.</dd>
<dd><code>cleaningInterval</code> - the interval between 2 cleaning tasks.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="throttle-java.lang.String-org.forgerock.http.filter.throttling.ThrottlingRate-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>throttle</h4>
<pre>public&nbsp;org.forgerock.util.promise.Promise&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,org.forgerock.util.promise.NeverThrowsException&gt;&nbsp;throttle(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;partitionKey,
                                                                                                         <a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingRate.html" title="class in org.forgerock.http.filter.throttling">ThrottlingRate</a>&nbsp;throttlingRate)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html#throttle-java.lang.String-org.forgerock.http.filter.throttling.ThrottlingRate-">ThrottlingStrategy</a></code></span></div>
<div class="block">Based on the given partitionKey and throttlingRate, return if the call is accepted or not.
 The returned promise is succeeded with a value of 0 if the call is accepted. Any value greater than 0 means that
 the next call that could be accepted after value nanoseconds.
 <p>This method returns a promise as the decision to let this call going through can be queued and thus completed
 later. That may allow for example to queue the first calls and complete the returned promises at a constant rate.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html#throttle-java.lang.String-org.forgerock.http.filter.throttling.ThrottlingRate-">throttle</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling">ThrottlingStrategy</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionKey</code> - the key used to identify the different groups</dd>
<dd><code>throttlingRate</code> - the throttling rate to apply</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a <code>Promise</code> meaning that the call is accepted (succeeds with 0) or refused (succeeds with value
 greater than 0)</dd>
</dl>
</li>
</ul>
<a name="stop--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html#stop--">ThrottlingStrategy</a></code></span></div>
<div class="block">Stop and free any resources needed by the strategy.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html#stop--">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling">ThrottlingStrategy</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenBucketThrottlingStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/http/filter/throttling/ThrottlingStrategy.html" title="interface in org.forgerock.http.filter.throttling"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/http/filter/throttling/TokenBucketThrottlingStrategy.html" target="_top">Frames</a></li>
<li><a href="TokenBucketThrottlingStrategy.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</body>
</html>
