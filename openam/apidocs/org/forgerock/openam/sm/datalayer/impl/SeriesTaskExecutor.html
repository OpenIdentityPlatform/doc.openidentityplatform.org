<!DOCTYPE HTML>
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<title>SeriesTaskExecutor (OpenAM Project 16.0.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SeriesTaskExecutor (OpenAM Project 16.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SeriesTaskExecutor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.forgerock.openam.sm.datalayer.impl</a></div>
<h2 title="Class SeriesTaskExecutor" class="title">Class SeriesTaskExecutor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.forgerock.openam.sm.datalayer.impl.SeriesTaskExecutor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../api/TaskExecutor.html" title="interface in org.forgerock.openam.sm.datalayer.api">TaskExecutor</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">SeriesTaskExecutor</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="../api/TaskExecutor.html" title="interface in org.forgerock.openam.sm.datalayer.api">TaskExecutor</a></pre>
<div class="block">The SeriesTaskExecutor is an executor that allows parallel processing of tasks, while guaranteeing that tasks on a
 single <a href="../../../cts/api/tokens/Token.html" title="class in org.forgerock.openam.cts.api.tokens"><code>Token</code></a> are always processed in order via a queuing mechanism.

 This task queue has some specific behaviours which allow for consistent
 operations under certain conditions.

 The executor will create a pre-defined number of <a href="SeriesTaskExecutorThread.html" title="class in org.forgerock.openam.sm.datalayer.impl"><code>SeriesTaskExecutorThread</code></a>
 threads which are responsible for processing tasks provided to this class. The
 <a href="../api/Task.html" title="interface in org.forgerock.openam.sm.datalayer.api"><code>Task</code></a>s themselves are keyed by the Token ID of the request.

 A <a href="../../../cts/impl/queue/QueueSelector.html" title="class in org.forgerock.openam.cts.impl.queue"><code>QueueSelector</code></a> algorithm is used to ensure that tasks for the same
 TokenID are processed by the same TaskProcessor within this instance of
 OpenAM. The intention here is to prevent unpredictable ordering of operations
 against the same Token ID which could cause concurrent modification errors
 at the storage layer.

 Each TaskProcessor is assigned a FIFO <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink"><code>BlockingQueue</code></a> instance which will
 provide the predictable processing order. The implication of this design ensures
 that when this queue is full, the caller is required to block.

 This provides an automatic throttling function for the CTS. The queues provide a
 buffer for the CTS in the event that more come in than can be handled. If however
 this situation persists for an extended duration, then the CTS queues will
 throttle the caller until the CTS has had time to catch up.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../cts/impl/queue/config/CTSQueueConfiguration.html#getQueueTimeout()"><code>CTSQueueConfiguration.getQueueTimeout()</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.util.concurrent.ExecutorService,org.forgerock.openam.sm.datalayer.impl.SeriesTaskExecutorThreadFactory,org.forgerock.openam.shared.concurrency.ThreadMonitor,org.forgerock.openam.cts.impl.queue.config.CTSQueueConfiguration,com.sun.identity.shared.debug.Debug)">SeriesTaskExecutor</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ExecutorService</a>&nbsp;poolService,
                  <a href="SeriesTaskExecutorThreadFactory.html" title="class in org.forgerock.openam.sm.datalayer.impl">SeriesTaskExecutorThreadFactory</a>&nbsp;processorFactory,
                  <a href="../../../shared/concurrency/ThreadMonitor.html" title="class in org.forgerock.openam.shared.concurrency">ThreadMonitor</a>&nbsp;monitor,
                  <a href="../../../cts/impl/queue/config/CTSQueueConfiguration.html" title="class in org.forgerock.openam.cts.impl.queue.config">CTSQueueConfiguration</a>&nbsp;configuration,
                  <a href="../../../../../../com/sun/identity/shared/debug/Debug.html" title="class in com.sun.identity.shared.debug">Debug</a>&nbsp;debug)</code></th>
<td class="colLast">
<div class="block">Create a default instance of the SeriesTaskExecutor.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#execute(java.lang.String,org.forgerock.openam.sm.datalayer.api.Task)">execute</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tokenId,
       <a href="../api/Task.html" title="interface in org.forgerock.openam.sm.datalayer.api">Task</a>&nbsp;task)</code></th>
<td class="colLast">
<div class="block">Executes the task for the given tokenId.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start()">start</a></span>()</code></th>
<td class="colLast">
<div class="block">Create TaskProcessor threads for all configured connections.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.util.concurrent.ExecutorService,org.forgerock.openam.sm.datalayer.impl.SeriesTaskExecutorThreadFactory,org.forgerock.openam.shared.concurrency.ThreadMonitor,org.forgerock.openam.cts.impl.queue.config.CTSQueueConfiguration,com.sun.identity.shared.debug.Debug)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SeriesTaskExecutor</h4>
<pre>@Inject
public&nbsp;SeriesTaskExecutor&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink">ExecutorService</a>&nbsp;poolService,
                          <a href="SeriesTaskExecutorThreadFactory.html" title="class in org.forgerock.openam.sm.datalayer.impl">SeriesTaskExecutorThreadFactory</a>&nbsp;processorFactory,
                          <a href="../../../shared/concurrency/ThreadMonitor.html" title="class in org.forgerock.openam.shared.concurrency">ThreadMonitor</a>&nbsp;monitor,
                          <a href="../../../cts/impl/queue/config/CTSQueueConfiguration.html" title="class in org.forgerock.openam.cts.impl.queue.config">CTSQueueConfiguration</a>&nbsp;configuration,
                          @Named("tokenDataLayer")
                          <a href="../../../../../../com/sun/identity/shared/debug/Debug.html" title="class in com.sun.identity.shared.debug">Debug</a>&nbsp;debug)</pre>
<div class="block">Create a default instance of the SeriesTaskExecutor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>poolService</code> - Required to scheduled worker threads.</dd>
<dd><code>processorFactory</code> - Required to create worker thread instances.</dd>
<dd><code>monitor</code> - Required to ensure threads are restarted.</dd>
<dd><code>configuration</code> - Required to determine runtime configuration options.</dd>
<dd><code>debug</code> - Required for debugging.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="execute(java.lang.String,org.forgerock.openam.sm.datalayer.api.Task)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>execute</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;execute&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;tokenId,
                    <a href="../api/Task.html" title="interface in org.forgerock.openam.sm.datalayer.api">Task</a>&nbsp;task)
             throws <a href="../api/DataLayerException.html" title="class in org.forgerock.openam.sm.datalayer.api">DataLayerException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../api/TaskExecutor.html#execute(java.lang.String,org.forgerock.openam.sm.datalayer.api.Task)">TaskExecutor</a></code></span></div>
<div class="block">Executes the task for the given tokenId.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/TaskExecutor.html#execute(java.lang.String,org.forgerock.openam.sm.datalayer.api.Task)">execute</a></code>&nbsp;in interface&nbsp;<code><a href="../api/TaskExecutor.html" title="interface in org.forgerock.openam.sm.datalayer.api">TaskExecutor</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tokenId</code> - The token the task is in reference to. May be null in the case of query.</dd>
<dd><code>task</code> - The task to be executed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../api/DataLayerException.html" title="class in org.forgerock.openam.sm.datalayer.api">DataLayerException</a></code></dd>
</dl>
</li>
</ul>
<a id="start()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;start()</pre>
<div class="block">Create TaskProcessor threads for all configured connections.
 Ensure each thread is monitored by <a href="../../../shared/concurrency/ThreadMonitor.html" title="class in org.forgerock.openam.shared.concurrency"><code>ThreadMonitor</code></a>.

 Synchronized to ensure that only one set of threads are initialised.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../api/TaskExecutor.html#start()">start</a></code>&nbsp;in interface&nbsp;<code><a href="../api/TaskExecutor.html" title="interface in org.forgerock.openam.sm.datalayer.api">TaskExecutor</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SeriesTaskExecutor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
