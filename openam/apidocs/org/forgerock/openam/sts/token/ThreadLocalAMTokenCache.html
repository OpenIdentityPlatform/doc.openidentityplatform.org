<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc (1.8.0_442) on Mon Feb 03 14:07:36 UTC 2025 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ThreadLocalAMTokenCache (OpenAM Project 15.1.4-SNAPSHOT API)</title>
<meta name="date" content="2025-02-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ThreadLocalAMTokenCache (OpenAM Project 15.1.4-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadLocalAMTokenCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/openam/sts/token/SAML2SubjectConfirmation.html" title="enum in org.forgerock.openam.sts.token"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCacheImpl.html" title="class in org.forgerock.openam.sts.token"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html" target="_top">Frames</a></li>
<li><a href="ThreadLocalAMTokenCache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.forgerock.openam.sts.token</div>
<h2 title="Interface ThreadLocalAMTokenCache" class="title">Interface ThreadLocalAMTokenCache</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCacheImpl.html" title="class in org.forgerock.openam.sts.token">ThreadLocalAMTokenCacheImpl</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">ThreadLocalAMTokenCache</span></pre>
<div class="block">This interface defines the contract that allows token validators (either SecurityPolicy- or STS-related) to persist
 the OpenAM session id resulting from a successful token verification. STS operations, like token transformation,
 involve a loosely-coupled deployment of token operations, like TokenValidators and TokenProviders. An OpenAM session
 id is the fundamental, internal token which must be communicated from TokenValidators to TokenProviders, as it is
 the basis for the subject asserted by tokens created by the TokenGenerationService, and the basis for subject
 attributes included as claims in these tokens.
 Configuration state in published sts instances will determine whether the OpenAM session resulting from token validation
 should be invalidated following output token generation. Note that these scenarios can be somewhat complicated: in a
 soap-sts ISSUE invocation protected by SecurityPolicy bindings, and containing a delegated token (ActAs/OnBehalfOf)
 in the RequestSecurityToken, two TokenValidators will be invoked: the first to validate the SupportingToken specified
 in the SecurityPolicy bindings protecting the ISSUE operation, and the second to validate the delegated token. Both
 sessions must potentially be invalidated, depending upon configuration state associated with the published soap-sts
 instance.
 The ValidationInvocationContext enum will allow TokenValidators to know the context of their invocation, and thus
 where to store the resulting OpenAM session in the ThreadLocal. They will also be created with the state which will
 tell them whether the OpenAM session should be invalidated, which will also allow them to update the ThreadLocal
 accordingly. The AMSessionInvalidatorImpl class will consult this cache to obtain the set of OpenAM session ids which
 must be invalidated following output token creation.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html#cacheSessionIdForContext-org.forgerock.openam.sts.token.validator.ValidationInvocationContext-java.lang.String-boolean-">cacheSessionIdForContext</a></span>(<a href="../../../../../org/forgerock/openam/sts/token/validator/ValidationInvocationContext.html" title="enum in org.forgerock.openam.sts.token.validator">ValidationInvocationContext</a>&nbsp;context,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionId,
                        boolean&nbsp;invalidateAfterTokenCreation)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html#clearCachedSessions--">clearCachedSessions</a></span>()</code>
<div class="block">Clear the thread-local.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html#getSessionIdForContext-org.forgerock.openam.sts.token.validator.ValidationInvocationContext-">getSessionIdForContext</a></span>(<a href="../../../../../org/forgerock/openam/sts/token/validator/ValidationInvocationContext.html" title="enum in org.forgerock.openam.sts.token.validator">ValidationInvocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html#getToBeInvalidatedAMSessionIds--">getToBeInvalidatedAMSessionIds</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getSessionIdForContext-org.forgerock.openam.sts.token.validator.ValidationInvocationContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSessionIdForContext</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getSessionIdForContext(<a href="../../../../../org/forgerock/openam/sts/token/validator/ValidationInvocationContext.html" title="enum in org.forgerock.openam.sts.token.validator">ValidationInvocationContext</a>&nbsp;context)
                       throws <a href="../../../../../org/forgerock/openam/sts/TokenCreationException.html" title="class in org.forgerock.openam.sts">TokenCreationException</a></pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - The validation context which generated the OpenAM Session. Determines where the session will
                be cached.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The OpenAM session id. Will not be null.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/forgerock/openam/sts/TokenCreationException.html" title="class in org.forgerock.openam.sts">TokenCreationException</a></code> - If no cache entry corresponding to the validation context exists.</dd>
</dl>
</li>
</ul>
<a name="cacheSessionIdForContext-org.forgerock.openam.sts.token.validator.ValidationInvocationContext-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheSessionIdForContext</h4>
<pre>void&nbsp;cacheSessionIdForContext(<a href="../../../../../org/forgerock/openam/sts/token/validator/ValidationInvocationContext.html" title="enum in org.forgerock.openam.sts.token.validator">ValidationInvocationContext</a>&nbsp;context,
                              <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sessionId,
                              boolean&nbsp;invalidateAfterTokenCreation)
                       throws <a href="../../../../../org/forgerock/openam/sts/TokenValidationException.html" title="class in org.forgerock.openam.sts">TokenValidationException</a></pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - The validation context which generated the OpenAM Session. Determines which cache will be consulted.</dd>
<dd><code>sessionId</code> - The to-be-cached OpenAM session id</dd>
<dd><code>invalidateAfterTokenCreation</code> - Whether this session should be invalidated at the conclusion of the current operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../org/forgerock/openam/sts/TokenValidationException.html" title="class in org.forgerock.openam.sts">TokenValidationException</a></code> - If a cache entry already exists</dd>
</dl>
</li>
</ul>
<a name="getToBeInvalidatedAMSessionIds--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getToBeInvalidatedAMSessionIds</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getToBeInvalidatedAMSessionIds()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The non-null, but possibly empty, set of OpenAM session ids which should be invalidated.</dd>
</dl>
</li>
</ul>
<a name="clearCachedSessions--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>clearCachedSessions</h4>
<pre>void&nbsp;clearCachedSessions()</pre>
<div class="block">Clear the thread-local. Must be called in a finally block in the outermost layer of an STS deployment.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadLocalAMTokenCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/forgerock/openam/sts/token/SAML2SubjectConfirmation.html" title="enum in org.forgerock.openam.sts.token"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/forgerock/openam/sts/token/ThreadLocalAMTokenCacheImpl.html" title="class in org.forgerock.openam.sts.token"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/forgerock/openam/sts/token/ThreadLocalAMTokenCache.html" target="_top">Frames</a></li>
<li><a href="ThreadLocalAMTokenCache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</body>
</html>
