<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AbstractOpenAMSessionTokenInterceptor (OpenAM Project 15.2.3-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractOpenAMSessionTokenInterceptor (OpenAM Project 15.2.3-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractOpenAMSessionTokenInterceptor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/OpenAMSessionAssertion.html" title="class in org.forgerock.openam.sts.soap.policy.am"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/forgerock/openam/sts/soap/policy/am/AbstractOpenAMSessionTokenInterceptor.html" target="_top">Frames</a></li>
<li><a href="AbstractOpenAMSessionTokenInterceptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.forgerock.openam.sts.soap.policy.am</div>
<h2 title="Class AbstractOpenAMSessionTokenInterceptor" class="title">Class AbstractOpenAMSessionTokenInterceptor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.cxf.phase.AbstractPhaseInterceptor&lt;org.apache.cxf.binding.soap.SoapMessage&gt;</li>
<li>
<ul class="inheritance">
<li>org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor</li>
<li>
<ul class="inheritance">
<li>org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor</li>
<li>
<ul class="inheritance">
<li>org.forgerock.openam.sts.soap.policy.am.AbstractOpenAMSessionTokenInterceptor</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.cxf.binding.soap.interceptor.SoapInterceptor, org.apache.cxf.interceptor.Interceptor&lt;org.apache.cxf.binding.soap.SoapMessage&gt;, org.apache.cxf.phase.PhaseInterceptor&lt;org.apache.cxf.binding.soap.SoapMessage&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/OpenAMSessionTokenClientInterceptor.html" title="class in org.forgerock.openam.sts.soap.policy.am">OpenAMSessionTokenClientInterceptor</a>, <a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/OpenAMSessionTokenServerInterceptor.html" title="class in org.forgerock.openam.sts.soap.policy.am">OpenAMSessionTokenServerInterceptor</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">AbstractOpenAMSessionTokenInterceptor</span>
extends org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor</pre>
<div class="block">This is the base class for the OpenAMSessionTokenClientInterceptor and OpenAMSessionTokenServerInterceptor classes.
 It extends the AbstractTokenInterceptor, and over-rides the handleMessage method to insure that the OpenAMSessionToken
 interceptors are invoked, even in the presence of a wsdl file with SecurityPolicy bindings. See
 http://cxf.547215.n5.nabble.com/Custom-SecurityPolicy-Assertions-and-the-Symmetric-binding-td5754879.html for more
 details.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/AbstractOpenAMSessionTokenInterceptor.html#AbstractOpenAMSessionTokenInterceptor--">AbstractOpenAMSessionTokenInterceptor</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/AbstractOpenAMSessionTokenInterceptor.html#handleMessage-org.apache.cxf.binding.soap.SoapMessage-">handleMessage</a></span>(org.apache.cxf.binding.soap.SoapMessage&nbsp;message)</code>
<div class="block">This method is over-ridden from the AbstractTokenInterceptor super-class.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/AbstractOpenAMSessionTokenInterceptor.html#isTLSInUse-org.apache.cxf.binding.soap.SoapMessage-">isTLSInUse</a></span>(org.apache.cxf.binding.soap.SoapMessage&nbsp;message)</code>
<div class="block">This method is called by the OpenAMSessionTokenServerInterceptor and OpenAMSessionTokenClientInterceptor classes
 when determining whether to assert the TransportToken.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor</h3>
<code>addToken, assertTokens, assertTokens, findSecurityHeader, getPassword, getTokenStore, getUnderstoodHeaders, policyNotAsserted, policyNotAsserted, processToken</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.cxf.binding.soap.interceptor.AbstractSoapInterceptor</h3>
<code>getFaultCodePrefix, getRoles, prepareStackTrace</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.cxf.phase.AbstractPhaseInterceptor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.cxf.phase.AbstractPhaseInterceptor</h3>
<code>addAfter, addAfter, addBefore, addBefore, getAdditionalInterceptors, getAfter, getBefore, getId, getPhase, handleFault, isGET, isRequestor, setAfter, setBefore</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.cxf.interceptor.Interceptor">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.cxf.interceptor.Interceptor</h3>
<code>handleFault</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractOpenAMSessionTokenInterceptor--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractOpenAMSessionTokenInterceptor</h4>
<pre>public&nbsp;AbstractOpenAMSessionTokenInterceptor()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="handleMessage-org.apache.cxf.binding.soap.SoapMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleMessage</h4>
<pre>public&nbsp;void&nbsp;handleMessage(org.apache.cxf.binding.soap.SoapMessage&nbsp;message)
                   throws org.apache.cxf.interceptor.Fault</pre>
<div class="block">This method is over-ridden from the AbstractTokenInterceptor super-class. The super-class implementation contains
 logic to prevent the invocation of the AbstractTokenInterceptor#addToken and #processToken methods when
 the PolicyBasedWSS4JOutInterceptor or PolicyBasedWSS4JInInterceptor are deployed, as in these cases, the interceptors
 set message state which prevents the AbstractTokenInterceptor from invoking the addToken and processToken methods
 of subclasses. This is because the PolicyBasedWSS4J*Interceptors are deployed when SecurityPolicy bindings are
 deployed, and the specific tokens (e.g. UNT, SAMLToken, KerberosToken) are handled by the higher-level
 SecurityPolicy-related tokens and binding which subsume the specific token types - e.g. the classes in the
 org.apache.cxf.ws.security.policy.model package, which include classes like the TransportToken, SignatureToken, etc.
 Over-riding the handleMessage in an AbstractTokenInterceptor sub-class appears to be a viable path for token
 types with  more restricted SecurityPolicy bindings, like the OpenAMSessionToken, which will support only the
 Transport and 'bare' bindings. Though there are several examples - e.g. the org.apache.cxf.ws.security.wss4j.SamlTokenInterceptor,
 which is used in the Transport, Symmetric, and Asymmetric bindings, and is a AbstractTokenInterceptor subclass.
 Given the documentation state of cxf and wss4j, and the complexity of the code-base, this ambiguity cannot be
 resolved without significant amounts of additional time. If the OpenAMSessionAssertion must be presented over the
 Symmetric or Asymmetric binding, then this work will be undertaken.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>handleMessage</code>&nbsp;in interface&nbsp;<code>org.apache.cxf.interceptor.Interceptor&lt;org.apache.cxf.binding.soap.SoapMessage&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>handleMessage</code>&nbsp;in class&nbsp;<code>org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - The message corresponding to the soap invocation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.cxf.interceptor.Fault</code> - if the assertTokens, addToken, or processToken methods throw an exception.</dd>
</dl>
</li>
</ul>
<a name="isTLSInUse-org.apache.cxf.binding.soap.SoapMessage-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isTLSInUse</h4>
<pre>public&nbsp;boolean&nbsp;isTLSInUse(org.apache.cxf.binding.soap.SoapMessage&nbsp;message)</pre>
<div class="block">This method is called by the OpenAMSessionTokenServerInterceptor and OpenAMSessionTokenClientInterceptor classes
 when determining whether to assert the TransportToken. The AbstractTokenInterceptor#assertTokens is called in all
 four JASPI phases. The isTLSInUse implemented in the AbstractTokenInterceptor does not work in the secure-request
 or validate-response phases - it seems to work exclusively in the validate-request case. The OpenAMSessionToken interceptors
 need to assert the TransportToken in all four cases to prevent FINE warning messages concerning an unasserted
 TransportToken, hence this override, which works in all cases. This override will also consult the superclass method.
 Note however, that there is no state in the outgoing message corresponding to "http.scheme" in the server egress
 message, so the validate-response is not able to assert the TransportToken, and thus the FINE message warning of an
 unasserted TransportToken will appear. This is really the domain of the TransportBindingHandler (see
 http://cxf.547215.n5.nabble.com/Custom-SecurityPolicy-Assertions-and-the-Symmetric-binding-td5754879.html
 for details), so we will have to live with this error message.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>isTLSInUse</code>&nbsp;in class&nbsp;<code>org.apache.cxf.ws.security.wss4j.AbstractTokenInterceptor</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - the SoapMessage encapsulating the STS invocation</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if tls is being deployed</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>for explanation of the approach
 chosen for this method.</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractOpenAMSessionTokenInterceptor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/forgerock/openam/sts/soap/policy/am/OpenAMSessionAssertion.html" title="class in org.forgerock.openam.sts.soap.policy.am"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/forgerock/openam/sts/soap/policy/am/AbstractOpenAMSessionTokenInterceptor.html" target="_top">Frames</a></li>
<li><a href="AbstractOpenAMSessionTokenInterceptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</body>
</html>
