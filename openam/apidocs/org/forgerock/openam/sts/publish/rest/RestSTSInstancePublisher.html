<!DOCTYPE HTML>
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<title>RestSTSInstancePublisher (OpenAM Project 16.0.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RestSTSInstancePublisher (OpenAM Project 16.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RestSTSInstancePublisher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.forgerock.openam.sts.publish.rest</a></div>
<h2 title="Interface RestSTSInstancePublisher" class="title">Interface RestSTSInstancePublisher</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="RestSTSInstancePublisherImpl.html" title="class in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisherImpl</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">RestSTSInstancePublisher</span></pre>
<div class="block">Defines the interface consumed to publish a Rest STS instance, and to remove this instance once its functionality
 should no longer be exposed.

 It may well be that this interface should be enhanced to handle a GET to the RestSTSPublishService, which will
 return the RestSTSInstanceConfig instances corresponding to all published REST STS instances. This method would then
 be consumed by a servlet-context-listener (or similar startup context) associated with the REST STS deployment. This
 would allow REST STS instances to re-constitute themselves after a server restart regardless of whether they are deployed
 locally (in the OpenAM .war) or remotely (in their own .war).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPublishedInstance(java.lang.String,java.lang.String)">getPublishedInstance</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm)</code></th>
<td class="colLast">
<div class="block">Called to return the config state corresponding to a specified Rest STS instance</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPublishedInstances()">getPublishedInstances</a></span>()</code></th>
<td class="colLast">
<div class="block">Called to obtain the configuration elements corresponding to previously-published STS instances.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInstanceExposedInCrest(java.lang.String)">isInstanceExposedInCrest</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId)</code></th>
<td class="colLast">
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the CREST router.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInstancePersistedInSMS(java.lang.String,java.lang.String)">isInstancePersistedInSMS</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm)</code></th>
<td class="colLast">
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the SMS.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#publishInstance(org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS,boolean)">publishInstance</a></span>&#8203;(<a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
               <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance,
               boolean&nbsp;republish)</code></th>
<td class="colLast">
<div class="block">Publish the Rest STS instance specified by the instanceConfig parameter.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerServiceListener()">registerServiceListener</a></span>()</code></th>
<td class="colLast">
<div class="block">This method is called by the RestSTSInstanceRepublishServlet, and causes the registration of a ServiceListener
 to listen for the creation of rest-sts instances.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeInstance(java.lang.String,java.lang.String,boolean)">removeInstance</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
              boolean&nbsp;removeOnlyFromRouter)</code></th>
<td class="colLast">
<div class="block">Remove the Rest STS instance from the SMS, and from the CREST router.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#republishExistingInstances()">republishExistingInstances</a></span>()</code></th>
<td class="colLast">
<div class="block">Called by the RestSTSRepublishServlet upon startup to re-publish previously-published Rest STS instances.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateInstanceInCrestRouter(java.lang.String,java.lang.String,org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS)">updateInstanceInCrestRouter</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
                           <a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                           <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)</code></th>
<td class="colLast">
<div class="block">Called by RestSTSPublishServiceListener in response to modify events.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateInstanceInSMS(java.lang.String,java.lang.String,org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS)">updateInstanceInSMS</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
                   <a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                   <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)</code></th>
<td class="colLast">
<div class="block">Called by RestSTSPublishServiceRequestHandler#handleUpdate, which is ultimately called by the AdminUI when an existing
 rest-sts instance is edited, or via a programmatic PUT to sts-publish/rest.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="publishInstance(org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>publishInstance</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;publishInstance&#8203;(<a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                       <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance,
                       boolean&nbsp;republish)
                throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Publish the Rest STS instance specified by the instanceConfig parameter. Publishing a Rest STS instance
 means persisting it to the SMS and exposing it via CREST.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instanceConfig</code> - The configuration state for the to-be-published Rest STS instance.</dd>
<dd><code>instance</code> - The RestSTS instance to be exposed</dd>
<dd><code>republish</code> - Determines whether this is an initial publish, or a re-publish. If re-publish, instanceConfig
                  not written to the SMS.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the urlElement, including the realm, at which the Rest STS instance has been published.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="removeInstance(java.lang.String,java.lang.String,boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeInstance</h4>
<pre class="methodSignature">void&nbsp;removeInstance&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
                    boolean&nbsp;removeOnlyFromRouter)
             throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Remove the Rest STS instance from the SMS, and from the CREST router.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
<dd><code>realm</code> - The realm in which the Rest STS is to be deployed.</dd>
<dd><code>removeOnlyFromRouter</code> - Set to true when called by a ServiceListener in a site deployment to remove a rest-sts instance, deleted
                             on another server, and thus removed from the SMS, but requiring removal from the CREST router.
                             Set to false in all other cases.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="updateInstanceInSMS(java.lang.String,java.lang.String,org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateInstanceInSMS</h4>
<pre class="methodSignature">void&nbsp;updateInstanceInSMS&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
                         <a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                         <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)
                  throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Called by RestSTSPublishServiceRequestHandler#handleUpdate, which is ultimately called by the AdminUI when an existing
 rest-sts instance is edited, or via a programmatic PUT to sts-publish/rest. This method will only write the
 RestSTSInstanceConfig to the SMS.
 <p>
 Whenever a rest-sts instance is updated/created/removed, both SMS and Crest router state must be mutated, and this must occur to all servers in a site
 deployment or in a multi-AM deployment. LDAP replication ensures that SMS state is shared, but the RestSTSPublishServiceListener
 responds to LDAP changes to insure that Crest router state is reconciled with ldap state. However, this listener
 must insure that it does not duplicate, or undo, any Crest mutations, and thus must somehow know if the AM server it is
 running on originated/received the AdminUI/programmatic rest-sts change (rest-sts instance create, delete, or modify), as
 only the AM instances which did not host the original change must reconcile crest router state with the SMS.
 <p>
 The RestSTSPublishServiceListener knows whether it must reconcile SMS and crest router state by seeing if the rest-sts
 instance is exposed in the crest router (isInstanceExposedInCrest). However, this works for the creation and deletion
 of rest-sts instances. In other words, the RestSTSPublishServiceListener which handles a create knows that the
 newly-created instance must be exposed in the crest router if it is not currently exposed in the crest router. The
 converse logic can be applied to handle crest router reconciliation for rest-sts instance deletion. However, for
 rest-sts instance update, the instance will be in the Crest router throughout, so work cannot be predictably segmented
 between the implementation of this interface, and the RestSTSPublishServiceListener both on the AM instance that
 hosted the change, and on those which need to reconcile crest router state with SMS state.
 <p>
 Thus, in order to not duplicate the logic between the implementation of this method, and the RestSTSPublishServiceListener
 which handles rest-sts instance modifications, this method will only persist the modified rest-sts instance in the
 SMS. This method will be called by RestSTSPublishServiceRequestHandler#handleUpdate. Then, the RestSTSPublishServiceListener
 will respond to modify events by calling updateInstanceInCrest, which will expose the updated instance in the Crest router.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id</dd>
<dd><code>realm</code> - the realm in which the sts is deployed</dd>
<dd><code>instanceConfig</code> - the RestSTSInstanceConfig corresponding to the updated state obtained from the PUT</dd>
<dd><code>instance</code> - the RestSTS instance corresponding to the updated state</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="updateInstanceInCrestRouter(java.lang.String,java.lang.String,org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig,org.forgerock.openam.sts.rest.RestSTS)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateInstanceInCrestRouter</h4>
<pre class="methodSignature">void&nbsp;updateInstanceInCrestRouter&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm,
                                 <a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                                 <a href="../../rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)
                          throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Called by RestSTSPublishServiceListener in response to modify events. This method will only remove the existing
 rest-sts instance from the Crest router, and re-expose the instance created from current SMS state.
 <p>
 Whenever a rest-sts instance
 is updated/created/removed, both SMS and Crest router state must be mutated, and this must occur to all servers in a site
 deployment or in a multi-AM deployment. LDAP replication ensures that SMS state is shared, but the RestSTSPublishServiceListener
 responds to LDAP changes to insure that Crest router state is reconciled with ldap state. However, this listener
 must insure that it does not duplicate, or undo, any Crest mutations, and thus must somehow know if the AM server it is
 running on originated/received the AdminUI/programmatic rest-sts change (rest-sts instance create, delete, or modify), as
 only the AM instances which did not host the original change must reconcile crest router state with the SMS.
 <p>
 The RestSTSPublishServiceListener knows whether it must reconcile SMS and crest router state by seeing if the rest-sts
 instance is exposed in the crest router (isInstanceExposedInCrest). However, this works for the creation and deletion
 of rest-sts instances. In other words, the RestSTSPublishServiceListener which handles a create knows that the
 newly-created instance must be exposed in the crest router if it is not currently exposed in the crest router. The
 converse logic can be applied to handle crest router reconciliation for rest-sts instance deletion. However, for
 rest-sts instance update, the instance will be in the Crest router throughout, so work cannot be predictably segmented
 between the implementation of this interface, and the RestSTSPublishServiceListener both on the AM instance that
 hosted the change, and on those which need to reconcile crest router state with SMS state.
 <p>
 Thus, in order to not duplicate the logic between the implementation of this method, and the RestSTSPublishServiceListener
 which handles rest-sts instance modifications, this method will only update crest router state with the rest-sts instance
 state obtained from the SMS. It is only called by the RestSTSPublishServiceListener, in response to ldap modify events.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id</dd>
<dd><code>realm</code> - the realm in which the sts is deployed</dd>
<dd><code>instanceConfig</code> - the RestSTSInstanceConfig corresponding to the updated state as obtained from the SMS</dd>
<dd><code>instance</code> - the RestSTS instance corresponding to the updated state</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="getPublishedInstances()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPublishedInstances</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&gt;&nbsp;getPublishedInstances()
                                           throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Called to obtain the configuration elements corresponding to previously-published STS instances.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The RestSTSInstanceConfig instances corresponding
 to published STS instances.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - if exception encountered obtaining persisted instance state</dd>
</dl>
</li>
</ul>
<a id="getPublishedInstance(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPublishedInstance</h4>
<pre class="methodSignature"><a href="../../rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;getPublishedInstance&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm)
                                    throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Called to return the config state corresponding to a specified Rest STS instance</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
<dd><code>realm</code> - The realm in which the Rest STS is to be deployed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The RestSTSInstanceConfig corresponding to this published instance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="republishExistingInstances()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>republishExistingInstances</h4>
<pre class="methodSignature">void&nbsp;republishExistingInstances()
                         throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Called by the RestSTSRepublishServlet upon startup to re-publish previously-published Rest STS instances.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - if exception encountered obtaining and re-publishing previously published instances.
 Note that exception will be thrown only if exception encountered which prevents the re-publishing of all
 previously-published instances. Exceptions encountered re-publishing individual instances will only be logged.</dd>
</dl>
</li>
</ul>
<a id="isInstanceExposedInCrest(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInstanceExposedInCrest</h4>
<pre class="methodSignature">boolean&nbsp;isInstanceExposedInCrest&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId)</pre>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the CREST router.
 This method is called by RestSTSPublishServiceRequestHandler#handleUpdate, and by the ServiceListener which
 listens for the creation of Rest STS instances on other site servers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
</dl>
</li>
</ul>
<a id="isInstancePersistedInSMS(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInstancePersistedInSMS</h4>
<pre class="methodSignature">boolean&nbsp;isInstancePersistedInSMS&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;stsId,
                                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;realm)
                          throws <a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the SMS.
 This method is called by RestSTSPublishServiceRequestHandler#handleUpdate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
<dd><code>realm</code> - The realm in which the Rest STS is to be deployed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a id="registerServiceListener()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>registerServiceListener</h4>
<pre class="methodSignature">void&nbsp;registerServiceListener()</pre>
<div class="block">This method is called by the RestSTSInstanceRepublishServlet, and causes the registration of a ServiceListener
 to listen for the creation of rest-sts instances. This listener has to be registered upon startup, so that the
 ServiceListener can expose rest-sts instances published to other site servers off of the rest-sts-instance
 CREST router in the current OpenAM server.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RestSTSInstancePublisher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
