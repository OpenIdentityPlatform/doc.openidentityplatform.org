<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang>
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>RestSTSInstancePublisherImpl (OpenAM Project 15.1.5-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RestSTSInstancePublisherImpl (OpenAM Project 15.1.5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RestSTSInstancePublisherImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSPublishServiceListener.html" title="class in org.forgerock.openam.sts.publish.rest"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html" target="_top">Frames</a></li>
<li><a href="RestSTSInstancePublisherImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.forgerock.openam.sts.publish.rest</div>
<h2 title="Class RestSTSInstancePublisherImpl" class="title">Class RestSTSInstancePublisherImpl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.forgerock.openam.sts.publish.rest.RestSTSInstancePublisherImpl</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RestSTSInstancePublisherImpl</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest"><code>The publishInstance and removeInstance methods are synchronized because I want state consistency around the various operations
 related to publishing and removing a rest-sts instance. In other words, I could use a ConcurrentHashMap for the
 publishedRoutes, and call putIfAbsent, but that would require first adding the Route to the router, and rolling-back
 these operations in the case of failure (i.e. removing the route from the router). Because publishing rest-sts instances
 will occur infrequently, synchronizing both of these actions seemed a better trade-off to insure consistent, non-interleaved
 mutations of all stateful elements involved with publishing a rest-sts instance.</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#getPublishedInstance-java.lang.String-java.lang.String-">getPublishedInstance</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm)</code>
<div class="block">Called to return the config state corresponding to a specified Rest STS instance</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#getPublishedInstances--">getPublishedInstances</a></span>()</code>
<div class="block">Called to obtain the configuration elements corresponding to previously-published STS instances.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#isInstanceExposedInCrest-java.lang.String-">isInstanceExposedInCrest</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId)</code>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the CREST router.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#isInstancePersistedInSMS-java.lang.String-java.lang.String-">isInstancePersistedInSMS</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm)</code>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the SMS.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#publishInstance-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-boolean-">publishInstance</a></span>(<a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
               <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;restSTSInstance,
               boolean&nbsp;republish)</code>
<div class="block">Publishes the rest STS instance at the specified relative path.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#registerServiceListener--">registerServiceListener</a></span>()</code>
<div class="block">This method is only called by the RestSTSSetupListener, called during OpenAM startup by the AMSetupServlet.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#removeInstance-java.lang.String-java.lang.String-boolean-">removeInstance</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
              boolean&nbsp;removeOnlyFromRouter)</code>
<div class="block">Removes the published rest-sts instance at the specified stsId.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#republishExistingInstances--">republishExistingInstances</a></span>()</code>
<div class="block">This method is only to be called by the RestSTSSetupListener, which calls it only to re-publish
 previously-published Rest STS instances during OpenAM startup.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#updateInstanceInCrestRouter-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">updateInstanceInCrestRouter</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
                           <a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                           <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)</code>
<div class="block">
 The method is synchronized so that two instances are not updated concurrently, as multiple configurations must be
 completed atomically.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html#updateInstanceInSMS-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">updateInstanceInSMS</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
                   <a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                   <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)</code>
<div class="block">
 The method is synchronized primarily as a sanity check, as excluding concurrent updates to published rest-sts instance
 state makes the system easier to reason about.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="publishInstance-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>publishInstance</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;publishInstance(<a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                              <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;restSTSInstance,
                              boolean&nbsp;republish)
                       throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Publishes the rest STS instance at the specified relative path. This method will be invoked when the Rest STS instance
 is initially published, and to re-constitute previously-published instances following a server restart.
 Note on transaction semantics: publishing a rest-sts instance means modifying both the CREST router, and the SMS.
 First the CREST router is modified, and then the SMS. If the SMS modifications fail, the CREST router modifications
 will be rolled-back, so that a publish can be successfully re-tried.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#publishInstance-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-boolean-">publishInstance</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>instanceConfig</code> - The RestSTSInstanceConfig which defined the guice bindings which specify the functionality of
                       the RestSTS instance. This RestSTSInstanceConfig will be persisted so that persisted instances
                       can be reconstituted in case of a server restart.</dd>
<dd><code>restSTSInstance</code> - The RestSTS instance defining the functionality of the rest STS service.</dd>
<dd><code>republish</code> - Indicates whether this is an original publish, or a republish following OpenAM restart.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the urlElement, including the realm, at which the Rest STS instance has been published.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - thrown in case a rest-sts instance has already been published at the specified
 subPath, or in case other errors prevented a successful publish.</dd>
</dl>
</li>
</ul>
<a name="removeInstance-java.lang.String-java.lang.String-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeInstance</h4>
<pre>public&nbsp;void&nbsp;removeInstance(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
                           boolean&nbsp;removeOnlyFromRouter)
                    throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">Removes the published rest-sts instance at the specified stsId. Note that when previously-published Rest STS
 instances are reconstituted following an OpenAM restart, the publishInstance above will be called, which will
 re-constitute the Route state in the Map, state necessary to remove the Route corresponding to the STS instance
 from the Crest router. This is important because the Route has a package-private ctor.
 Note on transaction semantics: The removal of a previously-published rest-sts instance involves removing the associated
 route from the CREST router (first step), and then removing the instance state from the SMS (second step). This
 method lacks the state to re-constitute CREST router state if the SMS modifications fail, and it may be a safe
 assumption that a removal would want the instance unavailable for invocation first-and-foremost. Nevertheless, it
 should be possible to invoke this method several times for the same rest-sts instance, in case the LDAP server was
 down in previous invocations. That means that the lack of a CREST route for a previously-published instance should
 not prevent the attempted removal of the associated configuration state from the SMS. Note that the consumption
 of this service is limited to Administrators, so malicious consumption is prevented.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#removeInstance-java.lang.String-java.lang.String-boolean-">removeInstance</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - the path, relative to the base rest-sts service, to the to-be-removed service. Note that this path
              includes the realm.</dd>
<dd><code>realm</code> - The realm of the STS instance</dd>
<dd><code>removeOnlyFromRouter</code> - Set to true when called by a ServiceListener in a site deployment to remove a rest-sts instance, deleted
                             on another server, and thus removed from the SMS, but requiring removal from the CREST router.
                             Set to false in all other cases.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - if the entry in the SMS could not be removed, or if no
 Route entry could be found in the Map corresponding to a previously-published instance.</dd>
</dl>
</li>
</ul>
<a name="updateInstanceInSMS-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateInstanceInSMS</h4>
<pre>public&nbsp;void&nbsp;updateInstanceInSMS(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
                                <a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                                <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)
                         throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">
 The method is synchronized primarily as a sanity check, as excluding concurrent updates to published rest-sts instance
 state makes the system easier to reason about.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#updateInstanceInSMS-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">updateInstanceInSMS</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id</dd>
<dd><code>realm</code> - the realm in which the sts is deployed</dd>
<dd><code>instanceConfig</code> - the RestSTSInstanceConfig corresponding to the updated state obtained from the PUT</dd>
<dd><code>instance</code> - the RestSTS instance corresponding to the updated state</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a name="updateInstanceInCrestRouter-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateInstanceInCrestRouter</h4>
<pre>public&nbsp;void&nbsp;updateInstanceInCrestRouter(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm,
                                        <a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;instanceConfig,
                                        <a href="../../../../../../org/forgerock/openam/sts/rest/RestSTS.html" title="interface in org.forgerock.openam.sts.rest">RestSTS</a>&nbsp;instance)
                                 throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">
 The method is synchronized so that two instances are not updated concurrently, as multiple configurations must be
 completed atomically.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#updateInstanceInCrestRouter-java.lang.String-java.lang.String-org.forgerock.openam.sts.rest.config.user.RestSTSInstanceConfig-org.forgerock.openam.sts.rest.RestSTS-">updateInstanceInCrestRouter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id</dd>
<dd><code>realm</code> - the realm in which the sts is deployed</dd>
<dd><code>instanceConfig</code> - the RestSTSInstanceConfig corresponding to the updated state as obtained from the SMS</dd>
<dd><code>instance</code> - the RestSTS instance corresponding to the updated state</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a name="getPublishedInstances--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPublishedInstances</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&gt;&nbsp;getPublishedInstances()
                                                  throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#getPublishedInstances--">RestSTSInstancePublisher</a></code></span></div>
<div class="block">Called to obtain the configuration elements corresponding to previously-published STS instances.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#getPublishedInstances--">getPublishedInstances</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The RestSTSInstanceConfig instances corresponding
 to published STS instances.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - if exception encountered obtaining persisted instance state</dd>
</dl>
</li>
</ul>
<a name="getPublishedInstance-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPublishedInstance</h4>
<pre>public&nbsp;<a href="../../../../../../org/forgerock/openam/sts/rest/config/user/RestSTSInstanceConfig.html" title="class in org.forgerock.openam.sts.rest.config.user">RestSTSInstanceConfig</a>&nbsp;getPublishedInstance(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm)
                                           throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#getPublishedInstance-java.lang.String-java.lang.String-">RestSTSInstancePublisher</a></code></span></div>
<div class="block">Called to return the config state corresponding to a specified Rest STS instance</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#getPublishedInstance-java.lang.String-java.lang.String-">getPublishedInstance</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
<dd><code>realm</code> - The realm in which the Rest STS is to be deployed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The RestSTSInstanceConfig corresponding to this published instance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a name="republishExistingInstances--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>republishExistingInstances</h4>
<pre>public&nbsp;void&nbsp;republishExistingInstances()
                                throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block">This method is only to be called by the RestSTSSetupListener, which calls it only to re-publish
 previously-published Rest STS instances during OpenAM startup.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#republishExistingInstances--">republishExistingInstances</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code> - if exception encountered obtaining and re-publishing previously published instances.
 Note that exception will be thrown only if exception encountered which prevents the re-publishing of all
 previously-published instances. Exceptions encountered re-publishing individual instances will only be logged.</dd>
</dl>
</li>
</ul>
<a name="isInstanceExposedInCrest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInstanceExposedInCrest</h4>
<pre>public&nbsp;boolean&nbsp;isInstanceExposedInCrest(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#isInstanceExposedInCrest-java.lang.String-">RestSTSInstancePublisher</a></code></span></div>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the CREST router.
 This method is called by RestSTSPublishServiceRequestHandler#handleUpdate, and by the ServiceListener which
 listens for the creation of Rest STS instances on other site servers.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#isInstanceExposedInCrest-java.lang.String-">isInstanceExposedInCrest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
</dl>
</li>
</ul>
<a name="isInstancePersistedInSMS-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInstancePersistedInSMS</h4>
<pre>public&nbsp;boolean&nbsp;isInstancePersistedInSMS(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;stsId,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;realm)
                                 throws <a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#isInstancePersistedInSMS-java.lang.String-java.lang.String-">RestSTSInstancePublisher</a></code></span></div>
<div class="block">Determines whether the Rest STS instance identified by the stsId is present in the SMS.
 This method is called by RestSTSPublishServiceRequestHandler#handleUpdate.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#isInstancePersistedInSMS-java.lang.String-java.lang.String-">isInstancePersistedInSMS</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stsId</code> - The sts id, obtained from RestSTSInstanceConfig#getDeploymentSubPath</dd>
<dd><code>realm</code> - The realm in which the Rest STS is to be deployed.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/STSPublishException.html" title="class in org.forgerock.openam.sts">STSPublishException</a></code></dd>
</dl>
</li>
</ul>
<a name="registerServiceListener--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>registerServiceListener</h4>
<pre>public&nbsp;void&nbsp;registerServiceListener()</pre>
<div class="block">This method is only called by the RestSTSSetupListener, called during OpenAM startup by the AMSetupServlet. It
 registers a ServiceListener to publish rest-sts instances published to servers in another site.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html#registerServiceListener--">registerServiceListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest">RestSTSInstancePublisher</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RestSTSInstancePublisherImpl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisher.html" title="interface in org.forgerock.openam.sts.publish.rest"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/forgerock/openam/sts/publish/rest/RestSTSPublishServiceListener.html" title="class in org.forgerock.openam.sts.publish.rest"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/forgerock/openam/sts/publish/rest/RestSTSInstancePublisherImpl.html" target="_top">Frames</a></li>
<li><a href="RestSTSInstancePublisherImpl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2025 <a href="https://github.com/OpenIdentityPlatform">Open Identity Platform Community</a>. All rights reserved.</small></p>
</body>
</html>
